function em(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var tt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ni(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Ld={exports:{}},si={},Od={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),rm=Symbol.for("react.portal"),nm=Symbol.for("react.fragment"),sm=Symbol.for("react.strict_mode"),am=Symbol.for("react.profiler"),im=Symbol.for("react.provider"),om=Symbol.for("react.context"),lm=Symbol.for("react.forward_ref"),cm=Symbol.for("react.suspense"),um=Symbol.for("react.memo"),dm=Symbol.for("react.lazy"),Ac=Symbol.iterator;function hm(e){return e===null||typeof e!="object"?null:(e=Ac&&e[Ac]||e["@@iterator"],typeof e=="function"?e:null)}var Rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ad=Object.assign,Md={};function Rn(e,t,r){this.props=e,this.context=t,this.refs=Md,this.updater=r||Rd}Rn.prototype.isReactComponent={};Rn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Id(){}Id.prototype=Rn.prototype;function _l(e,t,r){this.props=e,this.context=t,this.refs=Md,this.updater=r||Rd}var Nl=_l.prototype=new Id;Nl.constructor=_l;Ad(Nl,Rn.prototype);Nl.isPureReactComponent=!0;var Mc=Array.isArray,Dd=Object.prototype.hasOwnProperty,Sl={current:null},zd={key:!0,ref:!0,__self:!0,__source:!0};function Fd(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Dd.call(t,n)&&!zd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ds,type:e,key:i,ref:o,props:s,_owner:Sl.current}}function fm(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function mm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ic=/\/+/g;function Ai(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mm(""+e.key):t.toString(36)}function ga(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ds:case rm:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Ai(o,0):n,Mc(s)?(r="",e!=null&&(r=e.replace(Ic,"$&/")+"/"),ga(s,t,r,"",function(u){return u})):s!=null&&(Cl(s)&&(s=fm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ic,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Mc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Ai(i,l);o+=ga(i,t,r,c,s)}else if(c=hm(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Ai(i,l++),o+=ga(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ws(e,t,r){if(e==null)return e;var n=[],s=0;return ga(e,n,"","",function(i){return t.call(r,i,s++)}),n}function gm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},pa={transition:null},pm={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:pa,ReactCurrentOwner:Sl};function Ud(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Ws,forEach:function(e,t,r){Ws(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ws(e,function(){t++}),t},toArray:function(e){return Ws(e,function(t){return t})||[]},only:function(e){if(!Cl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=Rn;X.Fragment=nm;X.Profiler=am;X.PureComponent=_l;X.StrictMode=sm;X.Suspense=cm;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pm;X.act=Ud;X.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ad({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Sl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Dd.call(t,c)&&!zd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ds,type:e.type,key:s,ref:i,props:n,_owner:o}};X.createContext=function(e){return e={$$typeof:om,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:im,_context:e},e.Consumer=e};X.createElement=Fd;X.createFactory=function(e){var t=Fd.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:lm,render:e}};X.isValidElement=Cl;X.lazy=function(e){return{$$typeof:dm,_payload:{_status:-1,_result:e},_init:gm}};X.memo=function(e,t){return{$$typeof:um,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=pa.transition;pa.transition={};try{e()}finally{pa.transition=t}};X.unstable_act=Ud;X.useCallback=function(e,t){return He.current.useCallback(e,t)};X.useContext=function(e){return He.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return He.current.useDeferredValue(e)};X.useEffect=function(e,t){return He.current.useEffect(e,t)};X.useId=function(){return He.current.useId()};X.useImperativeHandle=function(e,t,r){return He.current.useImperativeHandle(e,t,r)};X.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return He.current.useMemo(e,t)};X.useReducer=function(e,t,r){return He.current.useReducer(e,t,r)};X.useRef=function(e){return He.current.useRef(e)};X.useState=function(e){return He.current.useState(e)};X.useSyncExternalStore=function(e,t,r){return He.current.useSyncExternalStore(e,t,r)};X.useTransition=function(){return He.current.useTransition()};X.version="18.3.1";Od.exports=X;var p=Od.exports;const Ot=ni(p),ym=em({__proto__:null,default:Ot},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=p,vm=Symbol.for("react.element"),bm=Symbol.for("react.fragment"),wm=Object.prototype.hasOwnProperty,km=xm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jm={key:!0,ref:!0,__self:!0,__source:!0};function Bd(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)wm.call(t,n)&&!jm.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:vm,type:e,key:i,ref:o,props:s,_owner:km.current}}si.Fragment=bm;si.jsx=Bd;si.jsxs=Bd;Ld.exports=si;var a=Ld.exports,Ca={},Vd={exports:{}},ot={},qd={exports:{}},Hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,M){var $=j.length;j.push(M);e:for(;0<$;){var F=$-1>>>1,H=j[F];if(0<s(H,M))j[F]=M,j[$]=H,$=F;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var M=j[0],$=j.pop();if($!==M){j[0]=$;e:for(var F=0,H=j.length,q=H>>>1;F<q;){var K=2*(F+1)-1,te=j[K],be=K+1,ke=j[be];if(0>s(te,$))be<H&&0>s(ke,te)?(j[F]=ke,j[be]=$,F=be):(j[F]=te,j[K]=$,F=K);else if(be<H&&0>s(ke,$))j[F]=ke,j[be]=$,F=be;else break e}}return M}function s(j,M){var $=j.sortIndex-M.sortIndex;return $!==0?$:j.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,y=!1,v=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(j){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=j)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function w(j){if(b=!1,x(j),!v)if(r(c)!==null)v=!0,A(E);else{var M=r(u);M!==null&&I(w,M.startTime-j)}}function E(j,M){v=!1,b&&(b=!1,g(T),T=-1),y=!0;var $=m;try{for(x(M),h=r(c);h!==null&&(!(h.expirationTime>M)||j&&!L());){var F=h.callback;if(typeof F=="function"){h.callback=null,m=h.priorityLevel;var H=F(h.expirationTime<=M);M=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(c)&&n(c),x(M)}else n(c);h=r(c)}if(h!==null)var q=!0;else{var K=r(u);K!==null&&I(w,K.startTime-M),q=!1}return q}finally{h=null,m=$,y=!1}}var N=!1,C=null,T=-1,R=5,P=-1;function L(){return!(e.unstable_now()-P<R)}function D(){if(C!==null){var j=e.unstable_now();P=j;var M=!0;try{M=C(!0,j)}finally{M?z():(N=!1,C=null)}}else N=!1}var z;if(typeof f=="function")z=function(){f(D)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,_=S.port2;S.port1.onmessage=D,z=function(){_.postMessage(null)}}else z=function(){k(D,0)};function A(j){C=j,N||(N=!0,z())}function I(j,M){T=k(function(){j(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,A(E))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(j){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var $=m;m=M;try{return j()}finally{m=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,M){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var $=m;m=j;try{return M()}finally{m=$}},e.unstable_scheduleCallback=function(j,M,$){var F=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?F+$:F):$=F,j){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=$+H,j={id:d++,callback:M,priorityLevel:j,startTime:$,expirationTime:H,sortIndex:-1},$>F?(j.sortIndex=$,t(u,j),r(c)===null&&j===r(u)&&(b?(g(T),T=-1):b=!0,I(w,$-F))):(j.sortIndex=H,t(c,j),v||y||(v=!0,A(E))),j},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(j){var M=m;return function(){var $=m;m=M;try{return j.apply(this,arguments)}finally{m=$}}}})(Hd);qd.exports=Hd;var _m=qd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=p,it=_m;function U(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wd=new Set,ys={};function Wr(e,t){jn(e,t),jn(e+"Capture",t)}function jn(e,t){for(ys[e]=t,e=0;e<t.length;e++)Wd.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),po=Object.prototype.hasOwnProperty,Sm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dc={},zc={};function Cm(e){return po.call(zc,e)?!0:po.call(Dc,e)?!1:Sm.test(e)?zc[e]=!0:(Dc[e]=!0,!1)}function Em(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Pm(e,t,r,n){if(t===null||typeof t>"u"||Em(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var El=/[\-:]([a-z])/g;function Pl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(El,Pl);Re[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(El,Pl);Re[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(El,Pl);Re[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function Tl(e,t,r,n){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Pm(t,r,s,n)&&(r=null),n||s===null?Cm(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Jt=Nm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.element"),rn=Symbol.for("react.portal"),nn=Symbol.for("react.fragment"),$l=Symbol.for("react.strict_mode"),yo=Symbol.for("react.profiler"),Yd=Symbol.for("react.provider"),Kd=Symbol.for("react.context"),Ll=Symbol.for("react.forward_ref"),xo=Symbol.for("react.suspense"),vo=Symbol.for("react.suspense_list"),Ol=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Gd=Symbol.for("react.offscreen"),Fc=Symbol.iterator;function Un(e){return e===null||typeof e!="object"?null:(e=Fc&&e[Fc]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Mi;function Qn(e){if(Mi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mi=t&&t[1]||""}return`
`+Mi+e}var Ii=!1;function Di(e,t){if(!e||Ii)return"";Ii=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ii=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qn(e):""}function Tm(e){switch(e.tag){case 5:return Qn(e.type);case 16:return Qn("Lazy");case 13:return Qn("Suspense");case 19:return Qn("SuspenseList");case 0:case 2:case 15:return e=Di(e.type,!1),e;case 11:return e=Di(e.type.render,!1),e;case 1:return e=Di(e.type,!0),e;default:return""}}function bo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case nn:return"Fragment";case rn:return"Portal";case yo:return"Profiler";case $l:return"StrictMode";case xo:return"Suspense";case vo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kd:return(e.displayName||"Context")+".Consumer";case Yd:return(e._context.displayName||"Context")+".Provider";case Ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ol:return t=e.displayName||null,t!==null?t:bo(e.type)||"Memo";case rr:t=e._payload,e=e._init;try{return bo(e(t))}catch{}}return null}function $m(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bo(t);case 8:return t===$l?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lm(e){var t=Jd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ks(e){e._valueTracker||(e._valueTracker=Lm(e))}function Qd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Jd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ea(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wo(e,t){var r=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Uc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=kr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Xd(e,t){t=t.checked,t!=null&&Tl(e,"checked",t,!1)}function ko(e,t){Xd(e,t);var r=kr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jo(e,t.type,r):t.hasOwnProperty("defaultValue")&&jo(e,t.type,kr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function jo(e,t,r){(t!=="number"||Ea(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Xn=Array.isArray;function gn(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+kr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function _o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(U(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Vc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(U(92));if(Xn(r)){if(1<r.length)throw Error(U(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:kr(r)}}function Zd(e,t){var r=kr(t.value),n=kr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function qc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function eh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function No(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?eh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Gs,th=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Gs=Gs||document.createElement("div"),Gs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Gs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Om=["Webkit","ms","Moz","O"];Object.keys(rs).forEach(function(e){Om.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rs[t]=rs[e]})});function rh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rs.hasOwnProperty(e)&&rs[e]?(""+t).trim():t+"px"}function nh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=rh(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Rm=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function So(e,t){if(t){if(Rm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(U(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(U(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(U(61))}if(t.style!=null&&typeof t.style!="object")throw Error(U(62))}}function Co(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eo=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Po=null,pn=null,yn=null;function Hc(e){if(e=Us(e)){if(typeof Po!="function")throw Error(U(280));var t=e.stateNode;t&&(t=ci(t),Po(e.stateNode,e.type,t))}}function sh(e){pn?yn?yn.push(e):yn=[e]:pn=e}function ah(){if(pn){var e=pn,t=yn;if(yn=pn=null,Hc(e),t)for(e=0;e<t.length;e++)Hc(t[e])}}function ih(e,t){return e(t)}function oh(){}var zi=!1;function lh(e,t,r){if(zi)return e(t,r);zi=!0;try{return ih(e,t,r)}finally{zi=!1,(pn!==null||yn!==null)&&(oh(),ah())}}function vs(e,t){var r=e.stateNode;if(r===null)return null;var n=ci(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(U(231,t,typeof r));return r}var To=!1;if(qt)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){To=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{To=!1}function Am(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var ns=!1,Pa=null,Ta=!1,$o=null,Mm={onError:function(e){ns=!0,Pa=e}};function Im(e,t,r,n,s,i,o,l,c){ns=!1,Pa=null,Am.apply(Mm,arguments)}function Dm(e,t,r,n,s,i,o,l,c){if(Im.apply(this,arguments),ns){if(ns){var u=Pa;ns=!1,Pa=null}else throw Error(U(198));Ta||(Ta=!0,$o=u)}}function Yr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ch(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wc(e){if(Yr(e)!==e)throw Error(U(188))}function zm(e){var t=e.alternate;if(!t){if(t=Yr(e),t===null)throw Error(U(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Wc(s),e;if(i===n)return Wc(s),t;i=i.sibling}throw Error(U(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(r.alternate!==n)throw Error(U(190))}if(r.tag!==3)throw Error(U(188));return r.stateNode.current===r?e:t}function uh(e){return e=zm(e),e!==null?dh(e):null}function dh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dh(e);if(t!==null)return t;e=e.sibling}return null}var hh=it.unstable_scheduleCallback,Yc=it.unstable_cancelCallback,Fm=it.unstable_shouldYield,Um=it.unstable_requestPaint,we=it.unstable_now,Bm=it.unstable_getCurrentPriorityLevel,Al=it.unstable_ImmediatePriority,fh=it.unstable_UserBlockingPriority,$a=it.unstable_NormalPriority,Vm=it.unstable_LowPriority,mh=it.unstable_IdlePriority,ai=null,Rt=null;function qm(e){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(ai,e,void 0,(e.current.flags&128)===128)}catch{}}var Nt=Math.clz32?Math.clz32:Ym,Hm=Math.log,Wm=Math.LN2;function Ym(e){return e>>>=0,e===0?32:31-(Hm(e)/Wm|0)|0}var Js=64,Qs=4194304;function Zn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function La(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Zn(l):(i&=o,i!==0&&(n=Zn(i)))}else o=r&~s,o!==0?n=Zn(o):i!==0&&(n=Zn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Nt(t),s=1<<r,n|=e[r],t&=~s;return n}function Km(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Nt(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Km(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Lo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gh(){var e=Js;return Js<<=1,!(Js&4194240)&&(Js=64),e}function Fi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Nt(t),e[t]=r}function Jm(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Nt(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Ml(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Nt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ne=0;function ph(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yh,Il,xh,vh,bh,Oo=!1,Xs=[],hr=null,fr=null,mr=null,bs=new Map,ws=new Map,ar=[],Qm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kc(e,t){switch(e){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":fr=null;break;case"mouseover":case"mouseout":mr=null;break;case"pointerover":case"pointerout":bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ws.delete(t.pointerId)}}function Vn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Us(t),t!==null&&Il(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Xm(e,t,r,n,s){switch(t){case"focusin":return hr=Vn(hr,e,t,r,n,s),!0;case"dragenter":return fr=Vn(fr,e,t,r,n,s),!0;case"mouseover":return mr=Vn(mr,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return bs.set(i,Vn(bs.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ws.set(i,Vn(ws.get(i)||null,e,t,r,n,s)),!0}return!1}function wh(e){var t=Mr(e.target);if(t!==null){var r=Yr(t);if(r!==null){if(t=r.tag,t===13){if(t=ch(r),t!==null){e.blockedOn=t,bh(e.priority,function(){xh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ro(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Eo=n,r.target.dispatchEvent(n),Eo=null}else return t=Us(r),t!==null&&Il(t),e.blockedOn=r,!1;t.shift()}return!0}function Gc(e,t,r){ya(e)&&r.delete(t)}function Zm(){Oo=!1,hr!==null&&ya(hr)&&(hr=null),fr!==null&&ya(fr)&&(fr=null),mr!==null&&ya(mr)&&(mr=null),bs.forEach(Gc),ws.forEach(Gc)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Oo||(Oo=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,Zm)))}function ks(e){function t(s){return qn(s,e)}if(0<Xs.length){qn(Xs[0],e);for(var r=1;r<Xs.length;r++){var n=Xs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(hr!==null&&qn(hr,e),fr!==null&&qn(fr,e),mr!==null&&qn(mr,e),bs.forEach(t),ws.forEach(t),r=0;r<ar.length;r++)n=ar[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)wh(r),r.blockedOn===null&&ar.shift()}var xn=Jt.ReactCurrentBatchConfig,Oa=!0;function eg(e,t,r,n){var s=ne,i=xn.transition;xn.transition=null;try{ne=1,Dl(e,t,r,n)}finally{ne=s,xn.transition=i}}function tg(e,t,r,n){var s=ne,i=xn.transition;xn.transition=null;try{ne=4,Dl(e,t,r,n)}finally{ne=s,xn.transition=i}}function Dl(e,t,r,n){if(Oa){var s=Ro(e,t,r,n);if(s===null)Ji(e,t,n,Ra,r),Kc(e,n);else if(Xm(s,e,t,r,n))n.stopPropagation();else if(Kc(e,n),t&4&&-1<Qm.indexOf(e)){for(;s!==null;){var i=Us(s);if(i!==null&&yh(i),i=Ro(e,t,r,n),i===null&&Ji(e,t,n,Ra,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ji(e,t,n,null,r)}}var Ra=null;function Ro(e,t,r,n){if(Ra=null,e=Rl(n),e=Mr(e),e!==null)if(t=Yr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ch(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ra=e,null}function kh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bm()){case Al:return 1;case fh:return 4;case $a:case Vm:return 16;case mh:return 536870912;default:return 16}default:return 16}}var cr=null,zl=null,xa=null;function jh(){if(xa)return xa;var e,t=zl,r=t.length,n,s="value"in cr?cr.value:cr.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return xa=s.slice(e,1<n?1-n:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function Jc(){return!1}function lt(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zs:Jc,this.isPropagationStopped=Jc,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var An={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fl=lt(An),Fs=ye({},An,{view:0,detail:0}),rg=lt(Fs),Ui,Bi,Hn,ii=ye({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ul,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hn&&(Hn&&e.type==="mousemove"?(Ui=e.screenX-Hn.screenX,Bi=e.screenY-Hn.screenY):Bi=Ui=0,Hn=e),Ui)},movementY:function(e){return"movementY"in e?e.movementY:Bi}}),Qc=lt(ii),ng=ye({},ii,{dataTransfer:0}),sg=lt(ng),ag=ye({},Fs,{relatedTarget:0}),Vi=lt(ag),ig=ye({},An,{animationName:0,elapsedTime:0,pseudoElement:0}),og=lt(ig),lg=ye({},An,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cg=lt(lg),ug=ye({},An,{data:0}),Xc=lt(ug),dg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fg[e])?!!t[e]:!1}function Ul(){return mg}var gg=ye({},Fs,{key:function(e){if(e.key){var t=dg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ul,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pg=lt(gg),yg=ye({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zc=lt(yg),xg=ye({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ul}),vg=lt(xg),bg=ye({},An,{propertyName:0,elapsedTime:0,pseudoElement:0}),wg=lt(bg),kg=ye({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jg=lt(kg),_g=[9,13,27,32],Bl=qt&&"CompositionEvent"in window,ss=null;qt&&"documentMode"in document&&(ss=document.documentMode);var Ng=qt&&"TextEvent"in window&&!ss,_h=qt&&(!Bl||ss&&8<ss&&11>=ss),eu=" ",tu=!1;function Nh(e,t){switch(e){case"keyup":return _g.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sn=!1;function Sg(e,t){switch(e){case"compositionend":return Sh(t);case"keypress":return t.which!==32?null:(tu=!0,eu);case"textInput":return e=t.data,e===eu&&tu?null:e;default:return null}}function Cg(e,t){if(sn)return e==="compositionend"||!Bl&&Nh(e,t)?(e=jh(),xa=zl=cr=null,sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _h&&t.locale!=="ko"?null:t.data;default:return null}}var Eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Eg[e.type]:t==="textarea"}function Ch(e,t,r,n){sh(n),t=Aa(t,"onChange"),0<t.length&&(r=new Fl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var as=null,js=null;function Pg(e){Dh(e,0)}function oi(e){var t=ln(e);if(Qd(t))return e}function Tg(e,t){if(e==="change")return t}var Eh=!1;if(qt){var qi;if(qt){var Hi="oninput"in document;if(!Hi){var nu=document.createElement("div");nu.setAttribute("oninput","return;"),Hi=typeof nu.oninput=="function"}qi=Hi}else qi=!1;Eh=qi&&(!document.documentMode||9<document.documentMode)}function su(){as&&(as.detachEvent("onpropertychange",Ph),js=as=null)}function Ph(e){if(e.propertyName==="value"&&oi(js)){var t=[];Ch(t,js,e,Rl(e)),lh(Pg,t)}}function $g(e,t,r){e==="focusin"?(su(),as=t,js=r,as.attachEvent("onpropertychange",Ph)):e==="focusout"&&su()}function Lg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return oi(js)}function Og(e,t){if(e==="click")return oi(t)}function Rg(e,t){if(e==="input"||e==="change")return oi(t)}function Ag(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Ag;function _s(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!po.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iu(e,t){var r=au(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=au(r)}}function Th(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Th(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function $h(){for(var e=window,t=Ea();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ea(e.document)}return t}function Vl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Mg(e){var t=$h(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Th(r.ownerDocument.documentElement,r)){if(n!==null&&Vl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=iu(r,i);var o=iu(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ig=qt&&"documentMode"in document&&11>=document.documentMode,an=null,Ao=null,is=null,Mo=!1;function ou(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mo||an==null||an!==Ea(n)||(n=an,"selectionStart"in n&&Vl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),is&&_s(is,n)||(is=n,n=Aa(Ao,"onSelect"),0<n.length&&(t=new Fl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=an)))}function ea(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var on={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionend:ea("Transition","TransitionEnd")},Wi={},Lh={};qt&&(Lh=document.createElement("div").style,"AnimationEvent"in window||(delete on.animationend.animation,delete on.animationiteration.animation,delete on.animationstart.animation),"TransitionEvent"in window||delete on.transitionend.transition);function li(e){if(Wi[e])return Wi[e];if(!on[e])return e;var t=on[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Lh)return Wi[e]=t[r];return e}var Oh=li("animationend"),Rh=li("animationiteration"),Ah=li("animationstart"),Mh=li("transitionend"),Ih=new Map,lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){Ih.set(e,t),Wr(t,[e])}for(var Yi=0;Yi<lu.length;Yi++){var Ki=lu[Yi],Dg=Ki.toLowerCase(),zg=Ki[0].toUpperCase()+Ki.slice(1);_r(Dg,"on"+zg)}_r(Oh,"onAnimationEnd");_r(Rh,"onAnimationIteration");_r(Ah,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(Mh,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fg=new Set("cancel close invalid load scroll toggle".split(" ").concat(es));function cu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Dm(n,t,void 0,e),e.currentTarget=null}function Dh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;cu(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;cu(s,l,u),i=c}}}if(Ta)throw e=$o,Ta=!1,$o=null,e}function le(e,t){var r=t[Uo];r===void 0&&(r=t[Uo]=new Set);var n=e+"__bubble";r.has(n)||(zh(t,e,2,!1),r.add(n))}function Gi(e,t,r){var n=0;t&&(n|=4),zh(r,e,n,t)}var ta="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[ta]){e[ta]=!0,Wd.forEach(function(r){r!=="selectionchange"&&(Fg.has(r)||Gi(r,!1,e),Gi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ta]||(t[ta]=!0,Gi("selectionchange",!1,t))}}function zh(e,t,r,n){switch(kh(t)){case 1:var s=eg;break;case 4:s=tg;break;default:s=Dl}r=s.bind(null,t,r,e),s=void 0,!To||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ji(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Mr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}lh(function(){var u=i,d=Rl(r),h=[];e:{var m=Ih.get(e);if(m!==void 0){var y=Fl,v=e;switch(e){case"keypress":if(va(r)===0)break e;case"keydown":case"keyup":y=pg;break;case"focusin":v="focus",y=Vi;break;case"focusout":v="blur",y=Vi;break;case"beforeblur":case"afterblur":y=Vi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=vg;break;case Oh:case Rh:case Ah:y=og;break;case Mh:y=wg;break;case"scroll":y=rg;break;case"wheel":y=jg;break;case"copy":case"cut":case"paste":y=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Zc}var b=(t&4)!==0,k=!b&&e==="scroll",g=b?m!==null?m+"Capture":null:m;b=[];for(var f=u,x;f!==null;){x=f;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,g!==null&&(w=vs(f,g),w!=null&&b.push(Ss(f,w,x)))),k)break;f=f.return}0<b.length&&(m=new y(m,v,null,r,d),h.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==Eo&&(v=r.relatedTarget||r.fromElement)&&(Mr(v)||v[Ht]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?Mr(v):null,v!==null&&(k=Yr(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(b=Qc,w="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Zc,w="onPointerLeave",g="onPointerEnter",f="pointer"),k=y==null?m:ln(y),x=v==null?m:ln(v),m=new b(w,f+"leave",y,r,d),m.target=k,m.relatedTarget=x,w=null,Mr(d)===u&&(b=new b(g,f+"enter",v,r,d),b.target=x,b.relatedTarget=k,w=b),k=w,y&&v)t:{for(b=y,g=v,f=0,x=b;x;x=Jr(x))f++;for(x=0,w=g;w;w=Jr(w))x++;for(;0<f-x;)b=Jr(b),f--;for(;0<x-f;)g=Jr(g),x--;for(;f--;){if(b===g||g!==null&&b===g.alternate)break t;b=Jr(b),g=Jr(g)}b=null}else b=null;y!==null&&uu(h,m,y,b,!1),v!==null&&k!==null&&uu(h,k,v,b,!0)}}e:{if(m=u?ln(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=Tg;else if(ru(m))if(Eh)E=Rg;else{E=Lg;var N=$g}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=Og);if(E&&(E=E(e,u))){Ch(h,E,r,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&jo(m,"number",m.value)}switch(N=u?ln(u):window,e){case"focusin":(ru(N)||N.contentEditable==="true")&&(an=N,Ao=u,is=null);break;case"focusout":is=Ao=an=null;break;case"mousedown":Mo=!0;break;case"contextmenu":case"mouseup":case"dragend":Mo=!1,ou(h,r,d);break;case"selectionchange":if(Ig)break;case"keydown":case"keyup":ou(h,r,d)}var C;if(Bl)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else sn?Nh(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(_h&&r.locale!=="ko"&&(sn||T!=="onCompositionStart"?T==="onCompositionEnd"&&sn&&(C=jh()):(cr=d,zl="value"in cr?cr.value:cr.textContent,sn=!0)),N=Aa(u,T),0<N.length&&(T=new Xc(T,e,null,r,d),h.push({event:T,listeners:N}),C?T.data=C:(C=Sh(r),C!==null&&(T.data=C)))),(C=Ng?Sg(e,r):Cg(e,r))&&(u=Aa(u,"onBeforeInput"),0<u.length&&(d=new Xc("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=C))}Dh(h,t)})}function Ss(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Aa(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vs(e,r),i!=null&&n.unshift(Ss(e,i,s)),i=vs(e,t),i!=null&&n.push(Ss(e,i,s))),e=e.return}return n}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uu(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=vs(r,i),c!=null&&o.unshift(Ss(r,c,l))):s||(c=vs(r,i),c!=null&&o.push(Ss(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Ug=/\r\n?/g,Bg=/\u0000|\uFFFD/g;function du(e){return(typeof e=="string"?e:""+e).replace(Ug,`
`).replace(Bg,"")}function ra(e,t,r){if(t=du(t),du(e)!==t&&r)throw Error(U(425))}function Ma(){}var Io=null,Do=null;function zo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fo=typeof setTimeout=="function"?setTimeout:void 0,Vg=typeof clearTimeout=="function"?clearTimeout:void 0,hu=typeof Promise=="function"?Promise:void 0,qg=typeof queueMicrotask=="function"?queueMicrotask:typeof hu<"u"?function(e){return hu.resolve(null).then(e).catch(Hg)}:Fo;function Hg(e){setTimeout(function(){throw e})}function Qi(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ks(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ks(t)}function gr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Mn,Cs="__reactProps$"+Mn,Ht="__reactContainer$"+Mn,Uo="__reactEvents$"+Mn,Wg="__reactListeners$"+Mn,Yg="__reactHandles$"+Mn;function Mr(e){var t=e[Lt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ht]||r[Lt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=fu(e);e!==null;){if(r=e[Lt])return r;e=fu(e)}return t}e=r,r=e.parentNode}return null}function Us(e){return e=e[Lt]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ln(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(U(33))}function ci(e){return e[Cs]||null}var Bo=[],cn=-1;function Nr(e){return{current:e}}function ue(e){0>cn||(e.current=Bo[cn],Bo[cn]=null,cn--)}function oe(e,t){cn++,Bo[cn]=e.current,e.current=t}var jr={},Fe=Nr(jr),Xe=Nr(!1),Ur=jr;function _n(e,t){var r=e.type.contextTypes;if(!r)return jr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ze(e){return e=e.childContextTypes,e!=null}function Ia(){ue(Xe),ue(Fe)}function mu(e,t,r){if(Fe.current!==jr)throw Error(U(168));oe(Fe,t),oe(Xe,r)}function Fh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(U(108,$m(e)||"Unknown",s));return ye({},r,n)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jr,Ur=Fe.current,oe(Fe,e),oe(Xe,Xe.current),!0}function gu(e,t,r){var n=e.stateNode;if(!n)throw Error(U(169));r?(e=Fh(e,t,Ur),n.__reactInternalMemoizedMergedChildContext=e,ue(Xe),ue(Fe),oe(Fe,e)):ue(Xe),oe(Xe,r)}var Ft=null,ui=!1,Xi=!1;function Uh(e){Ft===null?Ft=[e]:Ft.push(e)}function Kg(e){ui=!0,Uh(e)}function Sr(){if(!Xi&&Ft!==null){Xi=!0;var e=0,t=ne;try{var r=Ft;for(ne=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ft=null,ui=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(e+1)),hh(Al,Sr),s}finally{ne=t,Xi=!1}}return null}var un=[],dn=0,za=null,Fa=0,ut=[],dt=0,Br=null,Ut=1,Bt="";function Lr(e,t){un[dn++]=Fa,un[dn++]=za,za=e,Fa=t}function Bh(e,t,r){ut[dt++]=Ut,ut[dt++]=Bt,ut[dt++]=Br,Br=e;var n=Ut;e=Bt;var s=32-Nt(n)-1;n&=~(1<<s),r+=1;var i=32-Nt(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ut=1<<32-Nt(t)+s|r<<s|n,Bt=i+e}else Ut=1<<i|r<<s|n,Bt=e}function ql(e){e.return!==null&&(Lr(e,1),Bh(e,1,0))}function Hl(e){for(;e===za;)za=un[--dn],un[dn]=null,Fa=un[--dn],un[dn]=null;for(;e===Br;)Br=ut[--dt],ut[dt]=null,Bt=ut[--dt],ut[dt]=null,Ut=ut[--dt],ut[dt]=null}var at=null,st=null,fe=!1,_t=null;function Vh(e,t){var r=ht(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,st=gr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Br!==null?{id:Ut,overflow:Bt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ht(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,at=e,st=null,!0):!1;default:return!1}}function Vo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qo(e){if(fe){var t=st;if(t){var r=t;if(!pu(e,t)){if(Vo(e))throw Error(U(418));t=gr(r.nextSibling);var n=at;t&&pu(e,t)?Vh(n,r):(e.flags=e.flags&-4097|2,fe=!1,at=e)}}else{if(Vo(e))throw Error(U(418));e.flags=e.flags&-4097|2,fe=!1,at=e}}}function yu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function na(e){if(e!==at)return!1;if(!fe)return yu(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zo(e.type,e.memoizedProps)),t&&(t=st)){if(Vo(e))throw qh(),Error(U(418));for(;t;)Vh(e,t),t=gr(t.nextSibling)}if(yu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(U(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){st=gr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}st=null}}else st=at?gr(e.stateNode.nextSibling):null;return!0}function qh(){for(var e=st;e;)e=gr(e.nextSibling)}function Nn(){st=at=null,fe=!1}function Wl(e){_t===null?_t=[e]:_t.push(e)}var Gg=Jt.ReactCurrentBatchConfig;function Wn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(U(309));var n=r.stateNode}if(!n)throw Error(U(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(U(284));if(!r._owner)throw Error(U(290,e))}return e}function sa(e,t){throw e=Object.prototype.toString.call(t),Error(U(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xu(e){var t=e._init;return t(e._payload)}function Hh(e){function t(g,f){if(e){var x=g.deletions;x===null?(g.deletions=[f],g.flags|=16):x.push(f)}}function r(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function n(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function s(g,f){return g=vr(g,f),g.index=0,g.sibling=null,g}function i(g,f,x){return g.index=x,e?(x=g.alternate,x!==null?(x=x.index,x<f?(g.flags|=2,f):x):(g.flags|=2,f)):(g.flags|=1048576,f)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,f,x,w){return f===null||f.tag!==6?(f=ao(x,g.mode,w),f.return=g,f):(f=s(f,x),f.return=g,f)}function c(g,f,x,w){var E=x.type;return E===nn?d(g,f,x.props.children,w,x.key):f!==null&&(f.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===rr&&xu(E)===f.type)?(w=s(f,x.props),w.ref=Wn(g,f,x),w.return=g,w):(w=Sa(x.type,x.key,x.props,null,g.mode,w),w.ref=Wn(g,f,x),w.return=g,w)}function u(g,f,x,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==x.containerInfo||f.stateNode.implementation!==x.implementation?(f=io(x,g.mode,w),f.return=g,f):(f=s(f,x.children||[]),f.return=g,f)}function d(g,f,x,w,E){return f===null||f.tag!==7?(f=Fr(x,g.mode,w,E),f.return=g,f):(f=s(f,x),f.return=g,f)}function h(g,f,x){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ao(""+f,g.mode,x),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ys:return x=Sa(f.type,f.key,f.props,null,g.mode,x),x.ref=Wn(g,null,f),x.return=g,x;case rn:return f=io(f,g.mode,x),f.return=g,f;case rr:var w=f._init;return h(g,w(f._payload),x)}if(Xn(f)||Un(f))return f=Fr(f,g.mode,x,null),f.return=g,f;sa(g,f)}return null}function m(g,f,x,w){var E=f!==null?f.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:l(g,f,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:return x.key===E?c(g,f,x,w):null;case rn:return x.key===E?u(g,f,x,w):null;case rr:return E=x._init,m(g,f,E(x._payload),w)}if(Xn(x)||Un(x))return E!==null?null:d(g,f,x,w,null);sa(g,x)}return null}function y(g,f,x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(x)||null,l(f,g,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ys:return g=g.get(w.key===null?x:w.key)||null,c(f,g,w,E);case rn:return g=g.get(w.key===null?x:w.key)||null,u(f,g,w,E);case rr:var N=w._init;return y(g,f,x,N(w._payload),E)}if(Xn(w)||Un(w))return g=g.get(x)||null,d(f,g,w,E,null);sa(f,w)}return null}function v(g,f,x,w){for(var E=null,N=null,C=f,T=f=0,R=null;C!==null&&T<x.length;T++){C.index>T?(R=C,C=null):R=C.sibling;var P=m(g,C,x[T],w);if(P===null){C===null&&(C=R);break}e&&C&&P.alternate===null&&t(g,C),f=i(P,f,T),N===null?E=P:N.sibling=P,N=P,C=R}if(T===x.length)return r(g,C),fe&&Lr(g,T),E;if(C===null){for(;T<x.length;T++)C=h(g,x[T],w),C!==null&&(f=i(C,f,T),N===null?E=C:N.sibling=C,N=C);return fe&&Lr(g,T),E}for(C=n(g,C);T<x.length;T++)R=y(C,g,T,x[T],w),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?T:R.key),f=i(R,f,T),N===null?E=R:N.sibling=R,N=R);return e&&C.forEach(function(L){return t(g,L)}),fe&&Lr(g,T),E}function b(g,f,x,w){var E=Un(x);if(typeof E!="function")throw Error(U(150));if(x=E.call(x),x==null)throw Error(U(151));for(var N=E=null,C=f,T=f=0,R=null,P=x.next();C!==null&&!P.done;T++,P=x.next()){C.index>T?(R=C,C=null):R=C.sibling;var L=m(g,C,P.value,w);if(L===null){C===null&&(C=R);break}e&&C&&L.alternate===null&&t(g,C),f=i(L,f,T),N===null?E=L:N.sibling=L,N=L,C=R}if(P.done)return r(g,C),fe&&Lr(g,T),E;if(C===null){for(;!P.done;T++,P=x.next())P=h(g,P.value,w),P!==null&&(f=i(P,f,T),N===null?E=P:N.sibling=P,N=P);return fe&&Lr(g,T),E}for(C=n(g,C);!P.done;T++,P=x.next())P=y(C,g,T,P.value,w),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?T:P.key),f=i(P,f,T),N===null?E=P:N.sibling=P,N=P);return e&&C.forEach(function(D){return t(g,D)}),fe&&Lr(g,T),E}function k(g,f,x,w){if(typeof x=="object"&&x!==null&&x.type===nn&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ys:e:{for(var E=x.key,N=f;N!==null;){if(N.key===E){if(E=x.type,E===nn){if(N.tag===7){r(g,N.sibling),f=s(N,x.props.children),f.return=g,g=f;break e}}else if(N.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===rr&&xu(E)===N.type){r(g,N.sibling),f=s(N,x.props),f.ref=Wn(g,N,x),f.return=g,g=f;break e}r(g,N);break}else t(g,N);N=N.sibling}x.type===nn?(f=Fr(x.props.children,g.mode,w,x.key),f.return=g,g=f):(w=Sa(x.type,x.key,x.props,null,g.mode,w),w.ref=Wn(g,f,x),w.return=g,g=w)}return o(g);case rn:e:{for(N=x.key;f!==null;){if(f.key===N)if(f.tag===4&&f.stateNode.containerInfo===x.containerInfo&&f.stateNode.implementation===x.implementation){r(g,f.sibling),f=s(f,x.children||[]),f.return=g,g=f;break e}else{r(g,f);break}else t(g,f);f=f.sibling}f=io(x,g.mode,w),f.return=g,g=f}return o(g);case rr:return N=x._init,k(g,f,N(x._payload),w)}if(Xn(x))return v(g,f,x,w);if(Un(x))return b(g,f,x,w);sa(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,f!==null&&f.tag===6?(r(g,f.sibling),f=s(f,x),f.return=g,g=f):(r(g,f),f=ao(x,g.mode,w),f.return=g,g=f),o(g)):r(g,f)}return k}var Sn=Hh(!0),Wh=Hh(!1),Ua=Nr(null),Ba=null,hn=null,Yl=null;function Kl(){Yl=hn=Ba=null}function Gl(e){var t=Ua.current;ue(Ua),e._currentValue=t}function Ho(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function vn(e,t){Ba=e,Yl=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(Yl!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(Ba===null)throw Error(U(308));hn=e,Ba.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var Ir=null;function Jl(e){Ir===null?Ir=[e]:Ir.push(e)}function Yh(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Jl(t)):(r.next=s.next,s.next=r),t.interleaved=r,Wt(e,n)}function Wt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var nr=!1;function Ql(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ee&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Wt(e,r)}return s=n.interleaved,s===null?(t.next=t,Jl(n)):(t.next=s.next,s.next=t),n.interleaved=t,Wt(e,r)}function ba(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ml(e,r)}}function vu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Va(e,t,r,n){var s=e.updateQueue;nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(m=t,y=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(y,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,m=typeof v=="function"?v.call(y,h,m):v,m==null)break e;h=ye({},h,m);break e;case 2:nr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);qr|=o,e.lanes=o,e.memoizedState=h}}function bu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(U(191,s));s.call(n)}}}var Bs={},At=Nr(Bs),Es=Nr(Bs),Ps=Nr(Bs);function Dr(e){if(e===Bs)throw Error(U(174));return e}function Xl(e,t){switch(oe(Ps,t),oe(Es,e),oe(At,Bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:No(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=No(t,e)}ue(At),oe(At,t)}function Cn(){ue(At),ue(Es),ue(Ps)}function Gh(e){Dr(Ps.current);var t=Dr(At.current),r=No(t,e.type);t!==r&&(oe(Es,e),oe(At,r))}function Zl(e){Es.current===e&&(ue(At),ue(Es))}var me=Nr(0);function qa(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zi=[];function ec(){for(var e=0;e<Zi.length;e++)Zi[e]._workInProgressVersionPrimary=null;Zi.length=0}var wa=Jt.ReactCurrentDispatcher,eo=Jt.ReactCurrentBatchConfig,Vr=0,ge=null,Se=null,Te=null,Ha=!1,os=!1,Ts=0,Jg=0;function Ie(){throw Error(U(321))}function tc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ct(e[r],t[r]))return!1;return!0}function rc(e,t,r,n,s,i){if(Vr=i,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wa.current=e===null||e.memoizedState===null?ep:tp,e=r(n,s),os){i=0;do{if(os=!1,Ts=0,25<=i)throw Error(U(301));i+=1,Te=Se=null,t.updateQueue=null,wa.current=rp,e=r(n,s)}while(os)}if(wa.current=Wa,t=Se!==null&&Se.next!==null,Vr=0,Te=Se=ge=null,Ha=!1,t)throw Error(U(300));return e}function nc(){var e=Ts!==0;return Ts=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Te===null?ge.memoizedState=Te=e:Te=Te.next=e,Te}function gt(){if(Se===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Te===null?ge.memoizedState:Te.next;if(t!==null)Te=t,Se=e;else{if(e===null)throw Error(U(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Te===null?ge.memoizedState=Te=e:Te=Te.next=e}return Te}function $s(e,t){return typeof t=="function"?t(e):t}function to(e){var t=gt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=Se,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Vr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,ge.lanes|=d,qr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Ct(n,t.memoizedState)||(Qe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,ge.lanes|=i,qr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ro(e){var t=gt(),r=t.queue;if(r===null)throw Error(U(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ct(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Jh(){}function Qh(e,t){var r=ge,n=gt(),s=t(),i=!Ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Qe=!0),n=n.queue,sc(e0.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Te!==null&&Te.memoizedState.tag&1){if(r.flags|=2048,Ls(9,Zh.bind(null,r,n,s,t),void 0,null),$e===null)throw Error(U(349));Vr&30||Xh(r,t,s)}return s}function Xh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Zh(e,t,r,n){t.value=r,t.getSnapshot=n,t0(t)&&r0(e)}function e0(e,t,r){return r(function(){t0(t)&&r0(e)})}function t0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ct(e,r)}catch{return!0}}function r0(e){var t=Wt(e,1);t!==null&&St(t,e,1,-1)}function wu(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:e},t.queue=e,e=e.dispatch=Zg.bind(null,ge,e),[t.memoizedState,e]}function Ls(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function n0(){return gt().memoizedState}function ka(e,t,r,n){var s=$t();ge.flags|=e,s.memoizedState=Ls(1|t,r,void 0,n===void 0?null:n)}function di(e,t,r,n){var s=gt();n=n===void 0?null:n;var i=void 0;if(Se!==null){var o=Se.memoizedState;if(i=o.destroy,n!==null&&tc(n,o.deps)){s.memoizedState=Ls(t,r,i,n);return}}ge.flags|=e,s.memoizedState=Ls(1|t,r,i,n)}function ku(e,t){return ka(8390656,8,e,t)}function sc(e,t){return di(2048,8,e,t)}function s0(e,t){return di(4,2,e,t)}function a0(e,t){return di(4,4,e,t)}function i0(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function o0(e,t,r){return r=r!=null?r.concat([e]):null,di(4,4,i0.bind(null,t,e),r)}function ac(){}function l0(e,t){var r=gt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function c0(e,t){var r=gt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&tc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function u0(e,t,r){return Vr&21?(Ct(r,t)||(r=gh(),ge.lanes|=r,qr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=r)}function Qg(e,t){var r=ne;ne=r!==0&&4>r?r:4,e(!0);var n=eo.transition;eo.transition={};try{e(!1),t()}finally{ne=r,eo.transition=n}}function d0(){return gt().memoizedState}function Xg(e,t,r){var n=xr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},h0(e))f0(t,r);else if(r=Yh(e,t,r,n),r!==null){var s=qe();St(r,e,n,s),m0(r,t,n)}}function Zg(e,t,r){var n=xr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(h0(e))f0(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Jl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Yh(e,t,s,n),r!==null&&(s=qe(),St(r,e,n,s),m0(r,t,n))}}function h0(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function f0(e,t){os=Ha=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function m0(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ml(e,r)}}var Wa={readContext:mt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},ep={readContext:mt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:ku,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ka(4194308,4,i0.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ka(4194308,4,e,t)},useInsertionEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var r=$t();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=$t();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Xg.bind(null,ge,e),[n.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:wu,useDebugValue:ac,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=wu(!1),t=e[0];return e=Qg.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ge,s=$t();if(fe){if(r===void 0)throw Error(U(407));r=r()}else{if(r=t(),$e===null)throw Error(U(349));Vr&30||Xh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,ku(e0.bind(null,n,i,e),[e]),n.flags|=2048,Ls(9,Zh.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=$t(),t=$e.identifierPrefix;if(fe){var r=Bt,n=Ut;r=(n&~(1<<32-Nt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ts++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Jg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tp={readContext:mt,useCallback:l0,useContext:mt,useEffect:sc,useImperativeHandle:o0,useInsertionEffect:s0,useLayoutEffect:a0,useMemo:c0,useReducer:to,useRef:n0,useState:function(){return to($s)},useDebugValue:ac,useDeferredValue:function(e){var t=gt();return u0(t,Se.memoizedState,e)},useTransition:function(){var e=to($s)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Jh,useSyncExternalStore:Qh,useId:d0,unstable_isNewReconciler:!1},rp={readContext:mt,useCallback:l0,useContext:mt,useEffect:sc,useImperativeHandle:o0,useInsertionEffect:s0,useLayoutEffect:a0,useMemo:c0,useReducer:ro,useRef:n0,useState:function(){return ro($s)},useDebugValue:ac,useDeferredValue:function(e){var t=gt();return Se===null?t.memoizedState=e:u0(t,Se.memoizedState,e)},useTransition:function(){var e=ro($s)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Jh,useSyncExternalStore:Qh,useId:d0,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wo(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var hi={isMounted:function(e){return(e=e._reactInternals)?Yr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=qe(),s=xr(e),i=Vt(n,s);i.payload=t,r!=null&&(i.callback=r),t=pr(e,i,s),t!==null&&(St(t,e,s,n),ba(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=qe(),s=xr(e),i=Vt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=pr(e,i,s),t!==null&&(St(t,e,s,n),ba(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=qe(),n=xr(e),s=Vt(r,n);s.tag=2,t!=null&&(s.callback=t),t=pr(e,s,n),t!==null&&(St(t,e,n,r),ba(t,e,n))}};function ju(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!_s(r,n)||!_s(s,i):!0}function g0(e,t,r){var n=!1,s=jr,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=Ze(t)?Ur:Fe.current,n=t.contextTypes,i=(n=n!=null)?_n(e,s):jr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _u(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function Yo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ql(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=Ze(t)?Ur:Fe.current,s.context=_n(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wo(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&hi.enqueueReplaceState(s,s.state,null),Va(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function En(e,t){try{var r="",n=t;do r+=Tm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function no(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ko(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var np=typeof WeakMap=="function"?WeakMap:Map;function p0(e,t,r){r=Vt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ka||(Ka=!0,sl=n),Ko(e,t)},r}function y0(e,t,r){r=Vt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ko(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Ko(e,t),typeof n!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Nu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new np;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=yp.bind(null,e,t,r),t.then(e,e))}function Su(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Cu(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vt(-1,1),t.tag=2,pr(r,t,1))),r.lanes|=1),e)}var sp=Jt.ReactCurrentOwner,Qe=!1;function Ve(e,t,r,n){t.child=e===null?Wh(t,null,r,n):Sn(t,e.child,r,n)}function Eu(e,t,r,n,s){r=r.render;var i=t.ref;return vn(t,s),n=rc(e,t,r,n,i,s),r=nc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(fe&&r&&ql(t),t.flags|=1,Ve(e,t,n,s),t.child)}function Pu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!fc(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,x0(e,t,i,n,s)):(e=Sa(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:_s,r(o,n)&&e.ref===t.ref)return Yt(e,t,s)}return t.flags|=1,e=vr(i,n),e.ref=t.ref,e.return=t,t.child=e}function x0(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(_s(i,n)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Yt(e,t,s)}return Go(e,t,r,n,s)}function v0(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(mn,nt),nt|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(mn,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,oe(mn,nt),nt|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,oe(mn,nt),nt|=n;return Ve(e,t,s,r),t.child}function b0(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Go(e,t,r,n,s){var i=Ze(r)?Ur:Fe.current;return i=_n(t,i),vn(t,s),r=rc(e,t,r,n,i,s),n=nc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(fe&&n&&ql(t),t.flags|=1,Ve(e,t,r,s),t.child)}function Tu(e,t,r,n,s){if(Ze(r)){var i=!0;Da(t)}else i=!1;if(vn(t,s),t.stateNode===null)ja(e,t),g0(t,r,n),Yo(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Ze(r)?Ur:Fe.current,u=_n(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&_u(t,o,n,u),nr=!1;var m=t.memoizedState;o.state=m,Va(t,n,o,s),c=t.memoizedState,l!==n||m!==c||Xe.current||nr?(typeof d=="function"&&(Wo(t,r,d,n),c=t.memoizedState),(l=nr||ju(t,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Kh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:wt(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Ze(r)?Ur:Fe.current,c=_n(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&_u(t,o,n,c),nr=!1,m=t.memoizedState,o.state=m,Va(t,n,o,s);var v=t.memoizedState;l!==h||m!==v||Xe.current||nr?(typeof y=="function"&&(Wo(t,r,y,n),v=t.memoizedState),(u=nr||ju(t,r,u,n,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Jo(e,t,r,n,i,s)}function Jo(e,t,r,n,s,i){b0(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&gu(t,r,!1),Yt(e,t,i);n=t.stateNode,sp.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Sn(t,e.child,null,i),t.child=Sn(t,null,l,i)):Ve(e,t,l,i),t.memoizedState=n.state,s&&gu(t,r,!0),t.child}function w0(e){var t=e.stateNode;t.pendingContext?mu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mu(e,t.context,!1),Xl(e,t.containerInfo)}function $u(e,t,r,n,s){return Nn(),Wl(s),t.flags|=256,Ve(e,t,r,n),t.child}var Qo={dehydrated:null,treeContext:null,retryLane:0};function Xo(e){return{baseLanes:e,cachePool:null,transitions:null}}function k0(e,t,r){var n=t.pendingProps,s=me.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(me,s&1),e===null)return qo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gi(o,n,0,null),e=Fr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Xo(r),t.memoizedState=Qo,e):ic(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return ap(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=vr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=vr(l,i):(i=Fr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Xo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Qo,n}return i=e.child,e=i.sibling,n=vr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ic(e,t){return t=gi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function aa(e,t,r,n){return n!==null&&Wl(n),Sn(t,e.child,null,r),e=ic(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ap(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=no(Error(U(422))),aa(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=gi({mode:"visible",children:n.children},s,0,null),i=Fr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Sn(t,e.child,null,o),t.child.memoizedState=Xo(o),t.memoizedState=Qo,i);if(!(t.mode&1))return aa(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(U(419)),n=no(i,n,void 0),aa(e,t,o,n)}if(l=(o&e.childLanes)!==0,Qe||l){if(n=$e,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Wt(e,s),St(n,e,s,-1))}return hc(),n=no(Error(U(421))),aa(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=xp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,st=gr(s.nextSibling),at=t,fe=!0,_t=null,e!==null&&(ut[dt++]=Ut,ut[dt++]=Bt,ut[dt++]=Br,Ut=e.id,Bt=e.overflow,Br=t),t=ic(t,n.children),t.flags|=4096,t)}function Lu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ho(e.return,t,r)}function so(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function j0(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ve(e,t,n.children,r),n=me.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lu(e,r,t);else if(e.tag===19)Lu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(oe(me,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&qa(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),so(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qa(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}so(t,!0,r,null,i);break;case"together":so(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(U(153));if(t.child!==null){for(e=t.child,r=vr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ip(e,t,r){switch(t.tag){case 3:w0(t),Nn();break;case 5:Gh(t);break;case 1:Ze(t.type)&&Da(t);break;case 4:Xl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;oe(Ua,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(oe(me,me.current&1),t.flags|=128,null):r&t.child.childLanes?k0(e,t,r):(oe(me,me.current&1),e=Yt(e,t,r),e!==null?e.sibling:null);oe(me,me.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return j0(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(me,me.current),n)break;return null;case 22:case 23:return t.lanes=0,v0(e,t,r)}return Yt(e,t,r)}var _0,Zo,N0,S0;_0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zo=function(){};N0=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Dr(At.current);var i=null;switch(r){case"input":s=wo(e,s),n=wo(e,n),i=[];break;case"select":s=ye({},s,{value:void 0}),n=ye({},n,{value:void 0}),i=[];break;case"textarea":s=_o(e,s),n=_o(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ma)}So(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ys.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ys.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&le("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};S0=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yn(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function De(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function op(e,t,r){var n=t.pendingProps;switch(Hl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(t),null;case 1:return Ze(t.type)&&Ia(),De(t),null;case 3:return n=t.stateNode,Cn(),ue(Xe),ue(Fe),ec(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(na(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_t!==null&&(ol(_t),_t=null))),Zo(e,t),De(t),null;case 5:Zl(t);var s=Dr(Ps.current);if(r=t.type,e!==null&&t.stateNode!=null)N0(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(U(166));return De(t),null}if(e=Dr(At.current),na(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Lt]=t,n[Cs]=i,e=(t.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(s=0;s<es.length;s++)le(es[s],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":Uc(n,i),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},le("invalid",n);break;case"textarea":Vc(n,i),le("invalid",n)}So(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ra(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ra(n.textContent,l,e),s=["children",""+l]):ys.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&le("scroll",n)}switch(r){case"input":Ks(n),Bc(n,i,!0);break;case"textarea":Ks(n),qc(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ma)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=eh(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Lt]=t,e[Cs]=n,_0(e,t,!1,!1),t.stateNode=e;e:{switch(o=Co(r,n),r){case"dialog":le("cancel",e),le("close",e),s=n;break;case"iframe":case"object":case"embed":le("load",e),s=n;break;case"video":case"audio":for(s=0;s<es.length;s++)le(es[s],e);s=n;break;case"source":le("error",e),s=n;break;case"img":case"image":case"link":le("error",e),le("load",e),s=n;break;case"details":le("toggle",e),s=n;break;case"input":Uc(e,n),s=wo(e,n),le("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ye({},n,{value:void 0}),le("invalid",e);break;case"textarea":Vc(e,n),s=_o(e,n),le("invalid",e);break;default:s=n}So(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?nh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&th(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&xs(e,c):typeof c=="number"&&xs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ys.hasOwnProperty(i)?c!=null&&i==="onScroll"&&le("scroll",e):c!=null&&Tl(e,i,c,o))}switch(r){case"input":Ks(e),Bc(e,n,!1);break;case"textarea":Ks(e),qc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+kr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?gn(e,!!n.multiple,i,!1):n.defaultValue!=null&&gn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ma)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return De(t),null;case 6:if(e&&t.stateNode!=null)S0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(U(166));if(r=Dr(Ps.current),Dr(At.current),na(t)){if(n=t.stateNode,r=t.memoizedProps,n[Lt]=t,(i=n.nodeValue!==r)&&(e=at,e!==null))switch(e.tag){case 3:ra(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ra(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Lt]=t,t.stateNode=n}return De(t),null;case 13:if(ue(me),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&st!==null&&t.mode&1&&!(t.flags&128))qh(),Nn(),t.flags|=98560,i=!1;else if(i=na(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(U(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Lt]=t}else Nn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;De(t),i=!1}else _t!==null&&(ol(_t),_t=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):hc())),t.updateQueue!==null&&(t.flags|=4),De(t),null);case 4:return Cn(),Zo(e,t),e===null&&Ns(t.stateNode.containerInfo),De(t),null;case 10:return Gl(t.type._context),De(t),null;case 17:return Ze(t.type)&&Ia(),De(t),null;case 19:if(ue(me),i=t.memoizedState,i===null)return De(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Yn(i,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=qa(e),o!==null){for(t.flags|=128,Yn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return oe(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&we()>Pn&&(t.flags|=128,n=!0,Yn(i,!1),t.lanes=4194304)}else{if(!n)if(e=qa(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return De(t),null}else 2*we()-i.renderingStartTime>Pn&&r!==1073741824&&(t.flags|=128,n=!0,Yn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=we(),t.sibling=null,r=me.current,oe(me,n?r&1|2:r&1),t):(De(t),null);case 22:case 23:return dc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nt&1073741824&&(De(t),t.subtreeFlags&6&&(t.flags|=8192)):De(t),null;case 24:return null;case 25:return null}throw Error(U(156,t.tag))}function lp(e,t){switch(Hl(t),t.tag){case 1:return Ze(t.type)&&Ia(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),ue(Xe),ue(Fe),ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zl(t),null;case 13:if(ue(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(U(340));Nn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ue(me),null;case 4:return Cn(),null;case 10:return Gl(t.type._context),null;case 22:case 23:return dc(),null;case 24:return null;default:return null}}var ia=!1,ze=!1,cp=typeof WeakSet=="function"?WeakSet:Set,Y=null;function fn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){xe(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){xe(e,t,n)}}var Ou=!1;function up(e,t){if(Io=Oa,e=$h(),Vl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Do={focusedElem:e,selectionRange:r},Oa=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,k=v.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?b:wt(t.type,b),k);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(w){xe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return v=Ou,Ou=!1,v}function ls(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&el(t,r,i)}s=s.next}while(s!==n)}}function fi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function C0(e){var t=e.alternate;t!==null&&(e.alternate=null,C0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[Cs],delete t[Uo],delete t[Wg],delete t[Yg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function E0(e){return e.tag===5||e.tag===3||e.tag===4}function Ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||E0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ma));else if(n!==4&&(e=e.child,e!==null))for(rl(e,t,r),e=e.sibling;e!==null;)rl(e,t,r),e=e.sibling}function nl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(nl(e,t,r),e=e.sibling;e!==null;)nl(e,t,r),e=e.sibling}var Le=null,kt=!1;function Zt(e,t,r){for(r=r.child;r!==null;)P0(e,t,r),r=r.sibling}function P0(e,t,r){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(ai,r)}catch{}switch(r.tag){case 5:ze||fn(r,t);case 6:var n=Le,s=kt;Le=null,Zt(e,t,r),Le=n,kt=s,Le!==null&&(kt?(e=Le,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Le.removeChild(r.stateNode));break;case 18:Le!==null&&(kt?(e=Le,r=r.stateNode,e.nodeType===8?Qi(e.parentNode,r):e.nodeType===1&&Qi(e,r),ks(e)):Qi(Le,r.stateNode));break;case 4:n=Le,s=kt,Le=r.stateNode.containerInfo,kt=!0,Zt(e,t,r),Le=n,kt=s;break;case 0:case 11:case 14:case 15:if(!ze&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&el(r,t,o),s=s.next}while(s!==n)}Zt(e,t,r);break;case 1:if(!ze&&(fn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){xe(r,t,l)}Zt(e,t,r);break;case 21:Zt(e,t,r);break;case 22:r.mode&1?(ze=(n=ze)||r.memoizedState!==null,Zt(e,t,r),ze=n):Zt(e,t,r);break;default:Zt(e,t,r)}}function Au(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cp),t.forEach(function(n){var s=vp.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function bt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,kt=!1;break e;case 3:Le=l.stateNode.containerInfo,kt=!0;break e;case 4:Le=l.stateNode.containerInfo,kt=!0;break e}l=l.return}if(Le===null)throw Error(U(160));P0(i,o,s),Le=null,kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){xe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)T0(t,e),t=t.sibling}function T0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),Pt(e),n&4){try{ls(3,e,e.return),fi(3,e)}catch(b){xe(e,e.return,b)}try{ls(5,e,e.return)}catch(b){xe(e,e.return,b)}}break;case 1:bt(t,e),Pt(e),n&512&&r!==null&&fn(r,r.return);break;case 5:if(bt(t,e),Pt(e),n&512&&r!==null&&fn(r,r.return),e.flags&32){var s=e.stateNode;try{xs(s,"")}catch(b){xe(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Xd(s,i),Co(l,o);var u=Co(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?nh(s,h):d==="dangerouslySetInnerHTML"?th(s,h):d==="children"?xs(s,h):Tl(s,d,h,u)}switch(l){case"input":ko(s,i);break;case"textarea":Zd(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?gn(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?gn(s,!!i.multiple,i.defaultValue,!0):gn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cs]=i}catch(b){xe(e,e.return,b)}}break;case 6:if(bt(t,e),Pt(e),n&4){if(e.stateNode===null)throw Error(U(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){xe(e,e.return,b)}}break;case 3:if(bt(t,e),Pt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ks(t.containerInfo)}catch(b){xe(e,e.return,b)}break;case 4:bt(t,e),Pt(e);break;case 13:bt(t,e),Pt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(cc=we())),n&4&&Au(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(ze=(u=ze)||d,bt(t,e),ze=u):bt(t,e),Pt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Y=e,d=e.child;d!==null;){for(h=Y=d;Y!==null;){switch(m=Y,y=m.child,m.tag){case 0:case 11:case 14:case 15:ls(4,m,m.return);break;case 1:fn(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){xe(n,r,b)}}break;case 5:fn(m,m.return);break;case 22:if(m.memoizedState!==null){Iu(h);continue}}y!==null?(y.return=m,Y=y):Iu(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=rh("display",o))}catch(b){xe(e,e.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){xe(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:bt(t,e),Pt(e),n&4&&Au(e);break;case 21:break;default:bt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(E0(r)){var n=r;break e}r=r.return}throw Error(U(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(xs(s,""),n.flags&=-33);var i=Ru(e);nl(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Ru(e);rl(e,l,o);break;default:throw Error(U(161))}}catch(c){xe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dp(e,t,r){Y=e,$0(e)}function $0(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var s=Y,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ia;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ze;l=ia;var u=ze;if(ia=o,(ze=c)&&!u)for(Y=s;Y!==null;)o=Y,c=o.child,o.tag===22&&o.memoizedState!==null?Du(s):c!==null?(c.return=o,Y=c):Du(s);for(;i!==null;)Y=i,$0(i),i=i.sibling;Y=s,ia=l,ze=u}Mu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Y=i):Mu(e)}}function Mu(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ze||fi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ze)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:wt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&bu(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}bu(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&ks(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ze||t.flags&512&&tl(t)}catch(m){xe(t,t.return,m)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Iu(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function Du(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fi(4,t)}catch(c){xe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){xe(t,s,c)}}var i=t.return;try{tl(t)}catch(c){xe(t,i,c)}break;case 5:var o=t.return;try{tl(t)}catch(c){xe(t,o,c)}}}catch(c){xe(t,t.return,c)}if(t===e){Y=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Y=l;break}Y=t.return}}var hp=Math.ceil,Ya=Jt.ReactCurrentDispatcher,oc=Jt.ReactCurrentOwner,ft=Jt.ReactCurrentBatchConfig,ee=0,$e=null,_e=null,Oe=0,nt=0,mn=Nr(0),Ce=0,Os=null,qr=0,mi=0,lc=0,cs=null,Ge=null,cc=0,Pn=1/0,Dt=null,Ka=!1,sl=null,yr=null,oa=!1,ur=null,Ga=0,us=0,al=null,_a=-1,Na=0;function qe(){return ee&6?we():_a!==-1?_a:_a=we()}function xr(e){return e.mode&1?ee&2&&Oe!==0?Oe&-Oe:Gg.transition!==null?(Na===0&&(Na=gh()),Na):(e=ne,e!==0||(e=window.event,e=e===void 0?16:kh(e.type)),e):1}function St(e,t,r,n){if(50<us)throw us=0,al=null,Error(U(185));zs(e,r,n),(!(ee&2)||e!==$e)&&(e===$e&&(!(ee&2)&&(mi|=r),Ce===4&&ir(e,Oe)),et(e,n),r===1&&ee===0&&!(t.mode&1)&&(Pn=we()+500,ui&&Sr()))}function et(e,t){var r=e.callbackNode;Gm(e,t);var n=La(e,e===$e?Oe:0);if(n===0)r!==null&&Yc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Yc(r),t===1)e.tag===0?Kg(zu.bind(null,e)):Uh(zu.bind(null,e)),qg(function(){!(ee&6)&&Sr()}),r=null;else{switch(ph(n)){case 1:r=Al;break;case 4:r=fh;break;case 16:r=$a;break;case 536870912:r=mh;break;default:r=$a}r=z0(r,L0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function L0(e,t){if(_a=-1,Na=0,ee&6)throw Error(U(327));var r=e.callbackNode;if(bn()&&e.callbackNode!==r)return null;var n=La(e,e===$e?Oe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ja(e,n);else{t=n;var s=ee;ee|=2;var i=R0();($e!==e||Oe!==t)&&(Dt=null,Pn=we()+500,zr(e,t));do try{gp();break}catch(l){O0(e,l)}while(!0);Kl(),Ya.current=i,ee=s,_e!==null?t=0:($e=null,Oe=0,t=Ce)}if(t!==0){if(t===2&&(s=Lo(e),s!==0&&(n=s,t=il(e,s))),t===1)throw r=Os,zr(e,0),ir(e,n),et(e,we()),r;if(t===6)ir(e,n);else{if(s=e.current.alternate,!(n&30)&&!fp(s)&&(t=Ja(e,n),t===2&&(i=Lo(e),i!==0&&(n=i,t=il(e,i))),t===1))throw r=Os,zr(e,0),ir(e,n),et(e,we()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(U(345));case 2:Or(e,Ge,Dt);break;case 3:if(ir(e,n),(n&130023424)===n&&(t=cc+500-we(),10<t)){if(La(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Fo(Or.bind(null,e,Ge,Dt),t);break}Or(e,Ge,Dt);break;case 4:if(ir(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Nt(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=we()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hp(n/1960))-n,10<n){e.timeoutHandle=Fo(Or.bind(null,e,Ge,Dt),n);break}Or(e,Ge,Dt);break;case 5:Or(e,Ge,Dt);break;default:throw Error(U(329))}}}return et(e,we()),e.callbackNode===r?L0.bind(null,e):null}function il(e,t){var r=cs;return e.current.memoizedState.isDehydrated&&(zr(e,t).flags|=256),e=Ja(e,t),e!==2&&(t=Ge,Ge=r,t!==null&&ol(t)),e}function ol(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function fp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ir(e,t){for(t&=~lc,t&=~mi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Nt(t),n=1<<r;e[r]=-1,t&=~n}}function zu(e){if(ee&6)throw Error(U(327));bn();var t=La(e,0);if(!(t&1))return et(e,we()),null;var r=Ja(e,t);if(e.tag!==0&&r===2){var n=Lo(e);n!==0&&(t=n,r=il(e,n))}if(r===1)throw r=Os,zr(e,0),ir(e,t),et(e,we()),r;if(r===6)throw Error(U(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Or(e,Ge,Dt),et(e,we()),null}function uc(e,t){var r=ee;ee|=1;try{return e(t)}finally{ee=r,ee===0&&(Pn=we()+500,ui&&Sr())}}function Hr(e){ur!==null&&ur.tag===0&&!(ee&6)&&bn();var t=ee;ee|=1;var r=ft.transition,n=ne;try{if(ft.transition=null,ne=1,e)return e()}finally{ne=n,ft.transition=r,ee=t,!(ee&6)&&Sr()}}function dc(){nt=mn.current,ue(mn)}function zr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Vg(r)),_e!==null)for(r=_e.return;r!==null;){var n=r;switch(Hl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ia();break;case 3:Cn(),ue(Xe),ue(Fe),ec();break;case 5:Zl(n);break;case 4:Cn();break;case 13:ue(me);break;case 19:ue(me);break;case 10:Gl(n.type._context);break;case 22:case 23:dc()}r=r.return}if($e=e,_e=e=vr(e.current,null),Oe=nt=t,Ce=0,Os=null,lc=mi=qr=0,Ge=cs=null,Ir!==null){for(t=0;t<Ir.length;t++)if(r=Ir[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ir=null}return e}function O0(e,t){do{var r=_e;try{if(Kl(),wa.current=Wa,Ha){for(var n=ge.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ha=!1}if(Vr=0,Te=Se=ge=null,os=!1,Ts=0,oc.current=null,r===null||r.return===null){Ce=1,Os=t,_e=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Oe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Su(o);if(y!==null){y.flags&=-257,Cu(y,o,l,i,t),y.mode&1&&Nu(i,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break e}else{if(!(t&1)){Nu(i,u,t),hc();break e}c=Error(U(426))}}else if(fe&&l.mode&1){var k=Su(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Cu(k,o,l,i,t),Wl(En(c,l));break e}}i=c=En(c,l),Ce!==4&&(Ce=2),cs===null?cs=[i]:cs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=p0(i,c,t);vu(i,g);break e;case 1:l=c;var f=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yr===null||!yr.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=y0(i,l,t);vu(i,w);break e}}i=i.return}while(i!==null)}M0(r)}catch(E){t=E,_e===r&&r!==null&&(_e=r=r.return);continue}break}while(!0)}function R0(){var e=Ya.current;return Ya.current=Wa,e===null?Wa:e}function hc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),$e===null||!(qr&268435455)&&!(mi&268435455)||ir($e,Oe)}function Ja(e,t){var r=ee;ee|=2;var n=R0();($e!==e||Oe!==t)&&(Dt=null,zr(e,t));do try{mp();break}catch(s){O0(e,s)}while(!0);if(Kl(),ee=r,Ya.current=n,_e!==null)throw Error(U(261));return $e=null,Oe=0,Ce}function mp(){for(;_e!==null;)A0(_e)}function gp(){for(;_e!==null&&!Fm();)A0(_e)}function A0(e){var t=D0(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?M0(e):_e=t,oc.current=null}function M0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=lp(r,t),r!==null){r.flags&=32767,_e=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,_e=null;return}}else if(r=op(r,t,nt),r!==null){_e=r;return}if(t=t.sibling,t!==null){_e=t;return}_e=t=e}while(t!==null);Ce===0&&(Ce=5)}function Or(e,t,r){var n=ne,s=ft.transition;try{ft.transition=null,ne=1,pp(e,t,r,n)}finally{ft.transition=s,ne=n}return null}function pp(e,t,r,n){do bn();while(ur!==null);if(ee&6)throw Error(U(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(U(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Jm(e,i),e===$e&&(_e=$e=null,Oe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||oa||(oa=!0,z0($a,function(){return bn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=ne;ne=1;var l=ee;ee|=4,oc.current=null,up(e,r),T0(r,e),Mg(Do),Oa=!!Io,Do=Io=null,e.current=r,dp(r),Um(),ee=l,ne=o,ft.transition=i}else e.current=r;if(oa&&(oa=!1,ur=e,Ga=s),i=e.pendingLanes,i===0&&(yr=null),qm(r.stateNode),et(e,we()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ka)throw Ka=!1,e=sl,sl=null,e;return Ga&1&&e.tag!==0&&bn(),i=e.pendingLanes,i&1?e===al?us++:(us=0,al=e):us=0,Sr(),null}function bn(){if(ur!==null){var e=ph(Ga),t=ft.transition,r=ne;try{if(ft.transition=null,ne=16>e?16:e,ur===null)var n=!1;else{if(e=ur,ur=null,Ga=0,ee&6)throw Error(U(331));var s=ee;for(ee|=4,Y=e.current;Y!==null;){var i=Y,o=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Y=u;Y!==null;){var d=Y;switch(d.tag){case 0:case 11:case 15:ls(8,d,i)}var h=d.child;if(h!==null)h.return=d,Y=h;else for(;Y!==null;){d=Y;var m=d.sibling,y=d.return;if(C0(d),d===u){Y=null;break}if(m!==null){m.return=y,Y=m;break}Y=y}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}Y=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Y=o;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ls(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,Y=g;break e}Y=i.return}}var f=e.current;for(Y=f;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=f;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fi(9,l)}}catch(E){xe(l,l.return,E)}if(l===o){Y=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Y=w;break e}Y=l.return}}if(ee=s,Sr(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(ai,e)}catch{}n=!0}return n}finally{ne=r,ft.transition=t}}return!1}function Fu(e,t,r){t=En(r,t),t=p0(e,t,1),e=pr(e,t,1),t=qe(),e!==null&&(zs(e,1,t),et(e,t))}function xe(e,t,r){if(e.tag===3)Fu(e,e,r);else for(;t!==null;){if(t.tag===3){Fu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(yr===null||!yr.has(n))){e=En(r,e),e=y0(t,e,1),t=pr(t,e,1),e=qe(),t!==null&&(zs(t,1,e),et(t,e));break}}t=t.return}}function yp(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=qe(),e.pingedLanes|=e.suspendedLanes&r,$e===e&&(Oe&r)===r&&(Ce===4||Ce===3&&(Oe&130023424)===Oe&&500>we()-cc?zr(e,0):lc|=r),et(e,t)}function I0(e,t){t===0&&(e.mode&1?(t=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):t=1);var r=qe();e=Wt(e,t),e!==null&&(zs(e,t,r),et(e,r))}function xp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),I0(e,r)}function vp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(U(314))}n!==null&&n.delete(t),I0(e,r)}var D0;D0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Qe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Qe=!1,ip(e,t,r);Qe=!!(e.flags&131072)}else Qe=!1,fe&&t.flags&1048576&&Bh(t,Fa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ja(e,t),e=t.pendingProps;var s=_n(t,Fe.current);vn(t,r),s=rc(null,t,n,e,s,r);var i=nc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ze(n)?(i=!0,Da(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ql(t),s.updater=hi,t.stateNode=s,s._reactInternals=t,Yo(t,n,e,r),t=Jo(null,t,n,!0,i,r)):(t.tag=0,fe&&i&&ql(t),Ve(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=wp(n),e=wt(n,e),s){case 0:t=Go(null,t,n,e,r);break e;case 1:t=Tu(null,t,n,e,r);break e;case 11:t=Eu(null,t,n,e,r);break e;case 14:t=Pu(null,t,n,wt(n.type,e),r);break e}throw Error(U(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wt(n,s),Go(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wt(n,s),Tu(e,t,n,s,r);case 3:e:{if(w0(t),e===null)throw Error(U(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Kh(e,t),Va(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=En(Error(U(423)),t),t=$u(e,t,n,r,s);break e}else if(n!==s){s=En(Error(U(424)),t),t=$u(e,t,n,r,s);break e}else for(st=gr(t.stateNode.containerInfo.firstChild),at=t,fe=!0,_t=null,r=Wh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Nn(),n===s){t=Yt(e,t,r);break e}Ve(e,t,n,r)}t=t.child}return t;case 5:return Gh(t),e===null&&qo(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,zo(n,s)?o=null:i!==null&&zo(n,i)&&(t.flags|=32),b0(e,t),Ve(e,t,o,r),t.child;case 6:return e===null&&qo(t),null;case 13:return k0(e,t,r);case 4:return Xl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Sn(t,null,n,r):Ve(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wt(n,s),Eu(e,t,n,s,r);case 7:return Ve(e,t,t.pendingProps,r),t.child;case 8:return Ve(e,t,t.pendingProps.children,r),t.child;case 12:return Ve(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,oe(Ua,n._currentValue),n._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===s.children&&!Xe.current){t=Yt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Vt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ho(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ho(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ve(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,vn(t,r),s=mt(s),n=n(s),t.flags|=1,Ve(e,t,n,r),t.child;case 14:return n=t.type,s=wt(n,t.pendingProps),s=wt(n.type,s),Pu(e,t,n,s,r);case 15:return x0(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:wt(n,s),ja(e,t),t.tag=1,Ze(n)?(e=!0,Da(t)):e=!1,vn(t,r),g0(t,n,s),Yo(t,n,s,r),Jo(null,t,n,!0,e,r);case 19:return j0(e,t,r);case 22:return v0(e,t,r)}throw Error(U(156,t.tag))};function z0(e,t){return hh(e,t)}function bp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,r,n){return new bp(e,t,r,n)}function fc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wp(e){if(typeof e=="function")return fc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ll)return 11;if(e===Ol)return 14}return 2}function vr(e,t){var r=e.alternate;return r===null?(r=ht(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Sa(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")fc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case nn:return Fr(r.children,s,i,t);case $l:o=8,s|=8;break;case yo:return e=ht(12,r,t,s|2),e.elementType=yo,e.lanes=i,e;case xo:return e=ht(13,r,t,s),e.elementType=xo,e.lanes=i,e;case vo:return e=ht(19,r,t,s),e.elementType=vo,e.lanes=i,e;case Gd:return gi(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yd:o=10;break e;case Kd:o=9;break e;case Ll:o=11;break e;case Ol:o=14;break e;case rr:o=16,n=null;break e}throw Error(U(130,e==null?e:typeof e,""))}return t=ht(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Fr(e,t,r,n){return e=ht(7,e,n,t),e.lanes=r,e}function gi(e,t,r,n){return e=ht(22,e,n,t),e.elementType=Gd,e.lanes=r,e.stateNode={isHidden:!1},e}function ao(e,t,r){return e=ht(6,e,null,t),e.lanes=r,e}function io(e,t,r){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kp(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fi(0),this.expirationTimes=Fi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mc(e,t,r,n,s,i,o,l,c){return e=new kp(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ql(i),e}function jp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function F0(e){if(!e)return jr;e=e._reactInternals;e:{if(Yr(e)!==e||e.tag!==1)throw Error(U(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ze(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(U(171))}if(e.tag===1){var r=e.type;if(Ze(r))return Fh(e,r,t)}return t}function U0(e,t,r,n,s,i,o,l,c){return e=mc(r,n,!0,e,s,i,o,l,c),e.context=F0(null),r=e.current,n=qe(),s=xr(r),i=Vt(n,s),i.callback=t??null,pr(r,i,s),e.current.lanes=s,zs(e,s,n),et(e,n),e}function pi(e,t,r,n){var s=t.current,i=qe(),o=xr(s);return r=F0(r),t.context===null?t.context=r:t.pendingContext=r,t=Vt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=pr(s,t,o),e!==null&&(St(e,s,o,i),ba(e,s,o)),o}function Qa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Uu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gc(e,t){Uu(e,t),(e=e.alternate)&&Uu(e,t)}function _p(){return null}var B0=typeof reportError=="function"?reportError:function(e){console.error(e)};function pc(e){this._internalRoot=e}yi.prototype.render=pc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(U(409));pi(e,t,null,null)};yi.prototype.unmount=pc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){pi(null,e,null,null)}),t[Ht]=null}};function yi(e){this._internalRoot=e}yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=vh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ar.length&&t!==0&&t<ar[r].priority;r++);ar.splice(r,0,e),r===0&&wh(e)}};function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bu(){}function Np(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Qa(o);i.call(u)}}var o=U0(t,n,e,0,null,!1,!1,"",Bu);return e._reactRootContainer=o,e[Ht]=o.current,Ns(e.nodeType===8?e.parentNode:e),Hr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Qa(c);l.call(u)}}var c=mc(e,0,!1,null,null,!1,!1,"",Bu);return e._reactRootContainer=c,e[Ht]=c.current,Ns(e.nodeType===8?e.parentNode:e),Hr(function(){pi(t,c,r,n)}),c}function vi(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Qa(o);l.call(c)}}pi(t,o,e,s)}else o=Np(r,t,e,s,n);return Qa(o)}yh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zn(t.pendingLanes);r!==0&&(Ml(t,r|1),et(t,we()),!(ee&6)&&(Pn=we()+500,Sr()))}break;case 13:Hr(function(){var n=Wt(e,1);if(n!==null){var s=qe();St(n,e,1,s)}}),gc(e,1)}};Il=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var r=qe();St(t,e,134217728,r)}gc(e,134217728)}};xh=function(e){if(e.tag===13){var t=xr(e),r=Wt(e,t);if(r!==null){var n=qe();St(r,e,t,n)}gc(e,t)}};vh=function(){return ne};bh=function(e,t){var r=ne;try{return ne=e,t()}finally{ne=r}};Po=function(e,t,r){switch(t){case"input":if(ko(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ci(n);if(!s)throw Error(U(90));Qd(n),ko(n,s)}}}break;case"textarea":Zd(e,r);break;case"select":t=r.value,t!=null&&gn(e,!!r.multiple,t,!1)}};ih=uc;oh=Hr;var Sp={usingClientEntryPoint:!1,Events:[Us,ln,ci,sh,ah,uc]},Kn={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cp={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=uh(e),e===null?null:e.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||_p,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var la=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!la.isDisabled&&la.supportsFiber)try{ai=la.inject(Cp),Rt=la}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sp;ot.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yc(t))throw Error(U(200));return jp(e,t,null,r)};ot.createRoot=function(e,t){if(!yc(e))throw Error(U(299));var r=!1,n="",s=B0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mc(e,1,!1,null,null,r,!1,n,s),e[Ht]=t.current,Ns(e.nodeType===8?e.parentNode:e),new pc(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(U(188)):(e=Object.keys(e).join(","),Error(U(268,e)));return e=uh(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Hr(e)};ot.hydrate=function(e,t,r){if(!xi(t))throw Error(U(200));return vi(null,e,t,!0,r)};ot.hydrateRoot=function(e,t,r){if(!yc(e))throw Error(U(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=B0;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=U0(t,null,e,1,r??null,s,!1,i,o),e[Ht]=t.current,Ns(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new yi(t)};ot.render=function(e,t,r){if(!xi(t))throw Error(U(200));return vi(null,e,t,!1,r)};ot.unmountComponentAtNode=function(e){if(!xi(e))throw Error(U(40));return e._reactRootContainer?(Hr(function(){vi(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};ot.unstable_batchedUpdates=uc;ot.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!xi(r))throw Error(U(200));if(e==null||e._reactInternals===void 0)throw Error(U(38));return vi(e,t,r,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function V0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V0)}catch(e){console.error(e)}}V0(),Vd.exports=ot;var Ep=Vd.exports,Vu=Ep;Ca.createRoot=Vu.createRoot,Ca.hydrateRoot=Vu.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rs.apply(this,arguments)}var dr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(dr||(dr={}));const qu="popstate";function Pp(e){e===void 0&&(e={});function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=Kr(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ll("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:Xa(i))}function n(s,i){xc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return $p(t,r,n,e)}function pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Tp(){return Math.random().toString(36).substr(2,8)}function Hu(e,t){return{usr:e.state,key:e.key,idx:t}}function ll(e,t,r,n){return r===void 0&&(r=null),Rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Kr(t):t,{state:r,key:t&&t.key||n||Tp()})}function Xa(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Kr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function $p(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=dr.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Rs({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=dr.Pop;let k=d(),g=k==null?null:k-u;u=k,c&&c({action:l,location:b.location,delta:g})}function m(k,g){l=dr.Push;let f=ll(b.location,k,g);r&&r(f,k),u=d()+1;let x=Hu(f,u),w=b.createHref(f);try{o.pushState(x,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(w)}i&&c&&c({action:l,location:b.location,delta:1})}function y(k,g){l=dr.Replace;let f=ll(b.location,k,g);r&&r(f,k),u=d();let x=Hu(f,u),w=b.createHref(f);o.replaceState(x,"",w),i&&c&&c({action:l,location:b.location,delta:0})}function v(k){let g=s.location.origin!=="null"?s.location.origin:s.location.href,f=typeof k=="string"?k:Xa(k);return f=f.replace(/ $/,"%20"),pe(g,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,g)}let b={get action(){return l},get location(){return e(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(qu,h),c=k,()=>{s.removeEventListener(qu,h),c=null}},createHref(k){return t(s,k)},createURL:v,encodeLocation(k){let g=v(k);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:m,replace:y,go(k){return o.go(k)}};return b}var Wu;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wu||(Wu={}));function Lp(e,t,r){return r===void 0&&(r="/"),Op(e,t,r)}function Op(e,t,r,n){let s=typeof t=="string"?Kr(t):t,i=Tn(s.pathname||"/",r);if(i==null)return null;let o=q0(e);Rp(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Hp(i);l=Vp(o[c],u)}return l}function q0(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(pe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=br([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),q0(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Up(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of H0(i.path))s(i,o,c)}),t}function H0(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=H0(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Rp(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Bp(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Ap=/^:[\w-]+$/,Mp=3,Ip=2,Dp=1,zp=10,Fp=-2,Yu=e=>e==="*";function Up(e,t){let r=e.split("/"),n=r.length;return r.some(Yu)&&(n+=Fp),t&&(n+=Ip),r.filter(s=>!Yu(s)).reduce((s,i)=>s+(Ap.test(i)?Mp:i===""?Dp:zp),n)}function Bp(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Vp(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=cl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:br([i,h.pathname]),pathnameBase:Gp(br([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=br([i,h.pathnameBase]))}return o}function cl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=qp(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let b=l[h]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const v=l[h];return y&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function qp(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),xc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Hp(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Tn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Wp(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Kr(e):e;return{pathname:r?r.startsWith("/")?r:Yp(r,t):t,search:Jp(n),hash:Qp(s)}}function Yp(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function oo(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kp(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vc(e,t){let r=Kp(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bc(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Kr(e):(s=Rs({},e),pe(!s.pathname||!s.pathname.includes("?"),oo("?","pathname","search",s)),pe(!s.pathname||!s.pathname.includes("#"),oo("#","pathname","hash",s)),pe(!s.search||!s.search.includes("#"),oo("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=Wp(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const br=e=>e.join("/").replace(/\/\/+/g,"/"),Gp=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jp=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qp=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Xp(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const W0=["post","put","patch","delete"];new Set(W0);const Zp=["get",...W0];new Set(Zp);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},As.apply(this,arguments)}const bi=p.createContext(null),Y0=p.createContext(null),Qt=p.createContext(null),wi=p.createContext(null),It=p.createContext({outlet:null,matches:[],isDataRoute:!1}),K0=p.createContext(null);function ey(e,t){let{relative:r}=t===void 0?{}:t;In()||pe(!1);let{basename:n,navigator:s}=p.useContext(Qt),{hash:i,pathname:o,search:l}=ki(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:br([n,o])),s.createHref({pathname:c,search:l,hash:i})}function In(){return p.useContext(wi)!=null}function Cr(){return In()||pe(!1),p.useContext(wi).location}function G0(e){p.useContext(Qt).static||p.useLayoutEffect(e)}function Be(){let{isDataRoute:e}=p.useContext(It);return e?gy():ty()}function ty(){In()||pe(!1);let e=p.useContext(bi),{basename:t,future:r,navigator:n}=p.useContext(Qt),{matches:s}=p.useContext(It),{pathname:i}=Cr(),o=JSON.stringify(vc(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return G0(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=bc(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:br([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,o,i,e])}const ry=p.createContext(null);function ny(e){let t=p.useContext(It).outlet;return t&&p.createElement(ry.Provider,{value:e},t)}function Vs(){let{matches:e}=p.useContext(It),t=e[e.length-1];return t?t.params:{}}function ki(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(Qt),{matches:s}=p.useContext(It),{pathname:i}=Cr(),o=JSON.stringify(vc(s,n.v7_relativeSplatPath));return p.useMemo(()=>bc(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function sy(e,t){return ay(e,t)}function ay(e,t,r,n){In()||pe(!1);let{navigator:s,static:i}=p.useContext(Qt),{matches:o}=p.useContext(It),l=o[o.length-1],c=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let d=Cr(),h;if(t){var m;let g=typeof t=="string"?Kr(t):t;u==="/"||(m=g.pathname)!=null&&m.startsWith(u)||pe(!1),h=g}else h=d;let y=h.pathname||"/",v=y;if(u!=="/"){let g=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(g.length).join("/")}let b=Lp(e,{pathname:v}),k=uy(b&&b.map(g=>Object.assign({},g,{params:Object.assign({},c,g.params),pathname:br([u,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:br([u,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n);return t&&k?p.createElement(wi.Provider,{value:{location:As({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:dr.Pop}},k):k}function iy(){let e=my(),t=Xp(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,null)}const oy=p.createElement(iy,null);class ly extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(It.Provider,{value:this.props.routeContext},p.createElement(K0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cy(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(bi);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(It.Provider,{value:t},n)}function uy(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||pe(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:y}=r,v=h.route.loader&&m[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let y,v=!1,b=null,k=null;r&&(y=l&&h.route.id?l[h.route.id]:void 0,b=h.route.errorElement||oy,c&&(u<0&&m===0?(py("route-fallback"),v=!0,k=null):u===m&&(v=!0,k=h.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,m+1)),f=()=>{let x;return y?x=b:v?x=k:h.route.Component?x=p.createElement(h.route.Component,null):h.route.element?x=h.route.element:x=d,p.createElement(cy,{match:h,routeContext:{outlet:d,matches:g,isDataRoute:r!=null},children:x})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?p.createElement(ly,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:f(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):f()},null)}var J0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(J0||{}),Q0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Q0||{});function dy(e){let t=p.useContext(bi);return t||pe(!1),t}function hy(e){let t=p.useContext(Y0);return t||pe(!1),t}function fy(e){let t=p.useContext(It);return t||pe(!1),t}function X0(e){let t=fy(),r=t.matches[t.matches.length-1];return r.route.id||pe(!1),r.route.id}function my(){var e;let t=p.useContext(K0),r=hy(),n=X0();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function gy(){let{router:e}=dy(J0.UseNavigateStable),t=X0(Q0.UseNavigateStable),r=p.useRef(!1);return G0(()=>{r.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,As({fromRouteId:t},i)))},[e,t])}const Ku={};function py(e,t,r){Ku[e]||(Ku[e]=!0)}function yy(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Z0(e){let{to:t,replace:r,state:n,relative:s}=e;In()||pe(!1);let{future:i,static:o}=p.useContext(Qt),{matches:l}=p.useContext(It),{pathname:c}=Cr(),u=Be(),d=bc(t,vc(l,i.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function xy(e){return ny(e.context)}function ce(e){pe(!1)}function vy(e){let{basename:t="/",children:r=null,location:n,navigationType:s=dr.Pop,navigator:i,static:o=!1,future:l}=e;In()&&pe(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:As({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Kr(n));let{pathname:d="/",search:h="",hash:m="",state:y=null,key:v="default"}=n,b=p.useMemo(()=>{let k=Tn(d,c);return k==null?null:{location:{pathname:k,search:h,hash:m,state:y,key:v},navigationType:s}},[c,d,h,m,y,v,s]);return b==null?null:p.createElement(Qt.Provider,{value:u},p.createElement(wi.Provider,{children:r,value:b}))}function by(e){let{children:t,location:r}=e;return sy(ul(t),r)}new Promise(()=>{});function ul(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let i=[...t,s];if(n.type===p.Fragment){r.push.apply(r,ul(n.props.children,i));return}n.type!==ce&&pe(!1),!n.props.index||!n.props.children||pe(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ul(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(this,arguments)}function ef(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function wy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ky(e,t){return e.button===0&&(!t||t==="_self")&&!wy(e)}const jy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_y=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],Ny="6";try{window.__reactRouterVersion=Ny}catch{}const Sy=p.createContext({isTransitioning:!1}),Cy="startTransition",Gu=ym[Cy];function Ey(e){let{basename:t,children:r,future:n,window:s}=e,i=p.useRef();i.current==null&&(i.current=Pp({window:s,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&Gu?Gu(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>yy(n),[n]),p.createElement(vy,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const Py=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ty=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ve=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=ef(t,jy),{basename:y}=p.useContext(Qt),v,b=!1;if(typeof u=="string"&&Ty.test(u)&&(v=u,Py))try{let x=new URL(window.location.href),w=u.startsWith("//")?new URL(x.protocol+u):new URL(u),E=Tn(w.pathname,y);w.origin===x.origin&&E!=null?u=E+w.search+w.hash:b=!0}catch{}let k=ey(u,{relative:s}),g=Ly(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function f(x){n&&n(x),x.defaultPrevented||g(x)}return p.createElement("a",Za({},m,{href:v||k,onClick:b||i?n:f,ref:r,target:c}))}),Ju=p.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:s=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=t,h=ef(t,_y),m=ki(c,{relative:h.relative}),y=Cr(),v=p.useContext(Y0),{navigator:b,basename:k}=p.useContext(Qt),g=v!=null&&Oy(m)&&u===!0,f=b.encodeLocation?b.encodeLocation(m).pathname:m.pathname,x=y.pathname,w=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;s||(x=x.toLowerCase(),w=w?w.toLowerCase():null,f=f.toLowerCase()),w&&k&&(w=Tn(w,k)||w);const E=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let N=x===f||!o&&x.startsWith(f)&&x.charAt(E)==="/",C=w!=null&&(w===f||!o&&w.startsWith(f)&&w.charAt(f.length)==="/"),T={isActive:N,isPending:C,isTransitioning:g},R=N?n:void 0,P;typeof i=="function"?P=i(T):P=[i,N?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let L=typeof l=="function"?l(T):l;return p.createElement(ve,Za({},h,{"aria-current":R,className:P,ref:r,style:L,to:c,viewTransition:u}),typeof d=="function"?d(T):d)});var dl;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dl||(dl={}));var Qu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Qu||(Qu={}));function $y(e){let t=p.useContext(bi);return t||pe(!1),t}function Ly(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Be(),u=Cr(),d=ki(e,{relative:o});return p.useCallback(h=>{if(ky(h,r)){h.preventDefault();let m=n!==void 0?n:Xa(u)===Xa(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,s,r,e,i,o,l])}function Oy(e,t){t===void 0&&(t={});let r=p.useContext(Sy);r==null&&pe(!1);let{basename:n}=$y(dl.useViewTransitionState),s=ki(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Tn(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Tn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return cl(s.pathname,o)!=null||cl(s.pathname,i)!=null}const Ry="modulepreload",Ay=function(e){return"/church-connect/"+e},Xu={},$n=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=Ay(c),c in Xu)return;Xu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Ry,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},My=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$n(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class wc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Iy extends wc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Dy extends wc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zy extends wc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var hl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(hl||(hl={}));var Fy=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Uy{constructor(t,{headers:r={},customFetch:n,region:s=hl.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=My(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return Fy(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(v=>{throw new Iy(v)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Dy(d);if(!d.ok)throw new zy(d);let m=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield d.json():m==="application/octet-stream"?y=yield d.blob():m==="text/event-stream"?y=d:m==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Je={},kc={},ji={},qs={},_i={},Ni={},By=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ln=By();const Vy=Ln.fetch,tf=Ln.fetch.bind(Ln),rf=Ln.Headers,qy=Ln.Request,Hy=Ln.Response,Dn=Object.freeze(Object.defineProperty({__proto__:null,Headers:rf,Request:qy,Response:Hy,default:tf,fetch:Vy},Symbol.toStringTag,{value:"Module"})),Wy=tm(Dn);var Si={};Object.defineProperty(Si,"__esModule",{value:!0});let Yy=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Si.default=Yy;var nf=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ni,"__esModule",{value:!0});const Ky=nf(Wy),Gy=nf(Si);let Jy=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ky.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,y="OK")}catch{i.status===404&&b===""?(m=204,y="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&this.shouldThrowOnError)throw new Gy.default(u)}return{error:u,data:d,count:h,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Ni.default=Jy;var Qy=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_i,"__esModule",{value:!0});const Xy=Qy(Ni);let Zy=class extends Xy.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};_i.default=Zy;var ex=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});const tx=ex(_i);let rx=class extends tx.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};qs.default=rx;var nx=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});const Gn=nx(qs);let sx=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Gn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Gn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Gn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Gn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Gn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ji.default=sx;var Ci={},Ei={};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.version=void 0;Ei.version="0.0.0-automated";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.DEFAULT_HEADERS=void 0;const ax=Ei;Ci.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${ax.version}`};var sf=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kc,"__esModule",{value:!0});const ix=sf(ji),ox=sf(qs),lx=Ci;let cx=class af{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},lx.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new ix.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new af(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ox.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};kc.default=cx;var zn=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Je,"__esModule",{value:!0});Je.PostgrestError=Je.PostgrestBuilder=Je.PostgrestTransformBuilder=Je.PostgrestFilterBuilder=Je.PostgrestQueryBuilder=Je.PostgrestClient=void 0;const of=zn(kc);Je.PostgrestClient=of.default;const lf=zn(ji);Je.PostgrestQueryBuilder=lf.default;const cf=zn(qs);Je.PostgrestFilterBuilder=cf.default;const uf=zn(_i);Je.PostgrestTransformBuilder=uf.default;const df=zn(Ni);Je.PostgrestBuilder=df.default;const hf=zn(Si);Je.PostgrestError=hf.default;var ux=Je.default={PostgrestClient:of.default,PostgrestQueryBuilder:lf.default,PostgrestFilterBuilder:cf.default,PostgrestTransformBuilder:uf.default,PostgrestBuilder:df.default,PostgrestError:hf.default};const{PostgrestClient:dx,PostgrestQueryBuilder:M2,PostgrestFilterBuilder:I2,PostgrestTransformBuilder:D2,PostgrestBuilder:z2,PostgrestError:F2}=ux,hx="2.11.2",fx={"X-Client-Info":`realtime-js/${hx}`},mx="1.0.0",ff=1e4,gx=1e3;var wn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wn||(wn={}));var rt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(rt||(rt={}));var jt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jt||(jt={}));var fl;(function(e){e.websocket="websocket"})(fl||(fl={}));var Ar;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ar||(Ar={}));class px{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class mf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ae;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ae||(ae={}));const Zu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=yx(o,e,t,s),i),{})},yx=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?gf(i,o):ml(o)},gf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return wx(t,r)}switch(e){case ae.bool:return xx(t);case ae.float4:case ae.float8:case ae.int2:case ae.int4:case ae.int8:case ae.numeric:case ae.oid:return vx(t);case ae.json:case ae.jsonb:return bx(t);case ae.timestamp:return kx(t);case ae.abstime:case ae.date:case ae.daterange:case ae.int4range:case ae.int8range:case ae.money:case ae.reltime:case ae.text:case ae.time:case ae.timestamptz:case ae.timetz:case ae.tsrange:case ae.tstzrange:return ml(t);default:return ml(t)}},ml=e=>e,xx=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},vx=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bx=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},wx=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>gf(t,l))}return e},kx=e=>typeof e=="string"?e.replace(" ","T"):e,pf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class lo{constructor(t,r,n={},s=ff){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ed;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ed||(ed={}));class ds{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ds.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=ds.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ds.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(k=>k.presence_ref),y=h.map(k=>k.presence_ref),v=d.filter(k=>y.indexOf(k.presence_ref)<0),b=h.filter(k=>m.indexOf(k.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(y=>y.presence_ref),m=d.filter(y=>h.indexOf(y.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var td;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(td||(td={}));var rd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rd||(rd={}));var zt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(zt||(zt={}));class jc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new lo(this,jt.join,this.params,this.timeout),this.rejoinTimer=new mf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ds(this),this.broadcastEndpointURL=pf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(zt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(zt.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(zt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let b=0;b<y;b++){const k=m[b],{filter:{event:g,schema:f,table:x,filter:w}}=k,E=d&&d[b];if(E&&E.event===g&&E.schema===f&&E.table===x&&E.filter===w)v.push(Object.assign(Object.assign({},k),{id:E.id}));else{this.unsubscribe(),t==null||t(zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(zt.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=rt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new lo(this,jt.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new lo(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=jt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,b,k;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(b=y.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,b,k,g,f,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const w=y.id,E=(v=y.filter)===null||v===void 0?void 0:v.event;return w&&((b=r.ids)===null||b===void 0?void 0:b.includes(w))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const w=(f=(g=y==null?void 0:y.filter)===null||g===void 0?void 0:g.event)===null||f===void 0?void 0:f.toLocaleLowerCase();return w==="*"||w===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:b,table:k,commit_timestamp:g,type:f,errors:x}=v;m=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:g,eventType:f,new:{},old:{},errors:x}),this._getPayloadRecords(v))}y.callback(m,n)})}_isClosed(){return this.state===rt.closed}_isJoined(){return this.state===rt.joined}_isJoining(){return this.state===rt.joining}_isLeaving(){return this.state===rt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&jc.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jt.close,{},t)}_onError(t){this._on(jt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Zu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Zu(t.columns,t.old_record)),r}}const jx=()=>{},_x=typeof WebSocket<"u",Nx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Sx{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=fx,this.params={},this.timeout=ff,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=jx,this.conn=null,this.sendBuffer=[],this.serializer=new px,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>$n(async()=>{const{default:c}=await Promise.resolve().then(()=>Dn);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${fl.websocket}`,this.httpEndpoint=pf(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new mf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(_x){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Cx(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),$n(async()=>{const{default:t}=await import("./browser-DYfq3SmP.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mx}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wn.connecting:return Ar.Connecting;case wn.open:return Ar.Open;case wn.closing:return Ar.Closing;default:return Ar.Closed}}isConnected(){return this.connectionState()===Ar.Open}channel(t,r={config:{}}){const n=new jc(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(jt.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(gx,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(jt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Nx],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Cx{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=wn.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class _c extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Ex extends _c{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gl extends _c{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Px=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const yf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$n(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Tx=()=>Px(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $n(()=>Promise.resolve().then(()=>Dn),void 0)).Response:Response}),pl=e=>{if(Array.isArray(e))return e.map(r=>pl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=pl(n)}),t};var Gr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const co=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$x=(e,t,r)=>Gr(void 0,void 0,void 0,function*(){const n=yield Tx();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new Ex(co(s),e.status||500))}).catch(s=>{t(new gl(co(s),s))}):t(new gl(co(e),e))}),Lx=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Hs(e,t,r,n,s,i){return Gr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Lx(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>$x(c,l,n))})})}function ei(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Hs(e,"GET",t,r,n)})}function sr(e,t,r,n,s){return Gr(this,void 0,void 0,function*(){return Hs(e,"POST",t,n,s,r)})}function Ox(e,t,r,n,s){return Gr(this,void 0,void 0,function*(){return Hs(e,"PUT",t,n,s,r)})}function Rx(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Hs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function xf(e,t,r,n,s){return Gr(this,void 0,void 0,function*(){return Hs(e,"DELETE",t,n,s,r)})}var Ke=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ax={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mx{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=yf(s)}uploadOrUpdate(t,r,n,s){return Ke(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},nd),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Pe(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ke(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:nd.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Pe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield sr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new _c("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ke(this,void 0,void 0,function*(){try{return{data:{path:(yield sr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ke(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield sr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ke(this,void 0,void 0,function*(){try{const s=yield sr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}download(t,r){return Ke(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield ei(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Pe(l))return{data:null,error:l};throw l}})}info(t){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ei(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pl(n),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}exists(t){return Ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Rx(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Pe(n)&&n instanceof gl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ke(this,void 0,void 0,function*(){try{return{data:yield xf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ke(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Ax),r),{prefix:t||""});return{data:yield sr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Ix="2.7.1",Dx={"X-Client-Info":`storage-js/${Ix}`};var Qr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class zx{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},Dx),r),this.fetch=yf(n)}listBuckets(){return Qr(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}})}getBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield ei(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Qr(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Qr(this,void 0,void 0,function*(){try{return{data:yield Ox(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Qr(this,void 0,void 0,function*(){try{return{data:yield xf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}}class Fx extends zx{constructor(t,r={},n){super(t,r,n)}from(t){return new Mx(this.url,this.headers,t,this.fetch)}}const Ux="2.49.4";let ts="";typeof Deno<"u"?ts="deno":typeof document<"u"?ts="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ts="react-native":ts="node";const Bx={"X-Client-Info":`supabase-js-${ts}/${Ux}`},Vx={headers:Bx},qx={schema:"public"},Hx={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Wx={};var Yx=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Kx=e=>{let t;return e?t=e:typeof fetch>"u"?t=tf:t=fetch,(...r)=>t(...r)},Gx=()=>typeof Headers>"u"?rf:Headers,Jx=(e,t,r)=>{const n=Kx(r),s=Gx();return(i,o)=>Yx(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Qx=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function Xx(e){return e.replace(/\/$/,"")}function Zx(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:o,auth:l,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>Qx(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const vf="2.69.1",tn=30*1e3,yl=3,uo=yl*tn,e1="http://localhost:9999",t1="supabase.auth.token",r1={"X-Client-Info":`gotrue-js/${vf}`},xl="X-Supabase-Api-Version",bf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n1=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,s1=6e5;class Nc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Q(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class a1 extends Nc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function i1(e){return Q(e)&&e.name==="AuthApiError"}class wf extends Nc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Er extends Nc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class er extends Er{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o1(e){return Q(e)&&e.name==="AuthSessionMissingError"}class ho extends Er{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ca extends Er{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ua extends Er{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l1(e){return Q(e)&&e.name==="AuthImplicitGrantRedirectError"}class sd extends Er{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vl extends Er{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function fo(e){return Q(e)&&e.name==="AuthRetryableFetchError"}class ad extends Er{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class hs extends Er{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const id="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),od=` 	
\r=`.split(""),c1=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<od.length;t+=1)e[od[t].charCodeAt(0)]=-2;for(let t=0;t<id.length;t+=1)e[id[t].charCodeAt(0)]=t;return e})();function kf(e,t,r){const n=c1[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ld(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{h1(o,n,r)};for(let o=0;o<e.length;o+=1)kf(e.charCodeAt(o),s,i);return t.join("")}function u1(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function d1(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}u1(n,t)}}function h1(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function f1(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)kf(e.charCodeAt(s),r,n);return new Uint8Array(t)}function m1(e){const t=[];return d1(e,r=>t.push(r)),new Uint8Array(t)}function g1(e){return Math.round(Date.now()/1e3)+e}function p1(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Tt=()=>typeof window<"u"&&typeof document<"u",$r={tested:!1,writable:!1},fs=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($r.tested)return $r.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$r.tested=!0,$r.writable=!0}catch{$r.tested=!0,$r.writable=!1}return $r.writable};function y1(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const jf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$n(async()=>{const{default:n}=await Promise.resolve().then(()=>Dn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},x1=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_f=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},da=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ha=async(e,t)=>{await e.removeItem(t)};class Pi{constructor(){this.promise=new Pi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Pi.promiseConstructor=Promise;function mo(e){const t=e.split(".");if(t.length!==3)throw new hs("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!n1.test(t[n]))throw new hs("JWT not in base64url format");return{header:JSON.parse(ld(t[0])),payload:JSON.parse(ld(t[1])),signature:f1(t[2]),raw:{header:t[0],payload:t[1]}}}async function v1(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function b1(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function w1(e){return("0"+e.toString(16)).substr(-2)}function k1(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,w1).join("")}async function j1(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function _1(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await j1(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xr(e,t,r=!1){const n=k1();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await _f(e,`${t}-code-verifier`,s);const i=await _1(n);return[i,n===i?"plain":"s256"]}const N1=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S1(e){const t=e.headers.get(xl);if(!t||!t.match(N1))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function C1(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function E1(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var P1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Rr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),T1=[502,503,504];async function cd(e){var t;if(!x1(e))throw new vl(Rr(e),0);if(T1.includes(e.status))throw new vl(Rr(e),e.status);let r;try{r=await e.json()}catch(i){throw new wf(Rr(i),i)}let n;const s=S1(e);if(s&&s.getTime()>=bf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ad(Rr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new er}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ad(Rr(r),e.status,r.weak_password.reasons);throw new a1(Rr(r),e.status||500,n)}const $1=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Z(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[xl]||(i[xl]=bf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await L1(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function L1(e,t,r,n,s,i){const o=$1(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new vl(Rr(c),0)}if(l.ok||await cd(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await cd(c)}}function tr(e){var t;let r=null;M1(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=g1(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function ud(e){const t=tr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function or(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function O1(e){return{data:e,error:null}}function R1(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=P1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function A1(e){return e}function M1(e){return e.access_token&&e.refresh_token&&e.expires_in}var I1=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class D1{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=jf(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:or})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=I1(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:R1,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Q(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:or})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:A1});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);u[`${k}Page`]=b}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Q(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:or})}catch(r){if(Q(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:or})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:or})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await Z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}}const z1={getItem:e=>fs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{fs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{fs()&&globalThis.localStorage.removeItem(e)}};function dd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function F1(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zr={debug:!!(globalThis&&fs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Nf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class U1 extends Nf{}async function B1(e,t,r){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new U1(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Zr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}F1();const V1={url:e1,storageKey:t1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r1,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function hd(e,t,r){return await r()}class Ms{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ms.nextInstanceID,Ms.nextInstanceID+=1,this.instanceID>0&&Tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},V1),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D1({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=jf(s.fetch),this.lock=s.lock||hd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Tt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=B1:this.lock=hd,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:fs()?this.storage=z1:(this.memoryStorage={},this.storage=dd(this.memoryStorage)):(this.memoryStorage={},this.storage=dd(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${vf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=y1(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Tt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),l1(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Q(r)?{error:r}:{error:new wf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:tr}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Xr(this.storage,this.storageKey)),i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:v},xform:tr})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:tr})}else throw new ca("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Q(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ud})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ud})}else throw new ca("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ho}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await da(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:tr});if(await ha(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ho}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Q(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ho}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xr(this.storage,this.storageKey));const{error:h}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ca("You must provide either an email or phone number.")}catch(l){if(Q(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:tr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Q(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Xr(this.storage,this.storageKey)),await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:O1})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new er;const{error:s}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Q(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ca("You must provide either an email or phone number and a type")}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await da(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<uo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:or}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new er}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:or})})}catch(r){if(Q(r))return o1(r)&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new er;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Xr(this.storage,this.storageKey));const{data:u,error:d}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:or});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new er;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=mo(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Q(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new er;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Q(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Tt())throw new ua("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ua(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new sd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ua("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new sd("No code detected.");const{data:f,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:f.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new ua("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const y=m-d;y*1e3<=tn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:b,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(Q(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await da(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(i1(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ha(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=p1(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Xr(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Q(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Q(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Tt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Q(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await b1(async s=>(s>0&&await v1(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tr})),(s,i)=>{const o=200*Math.pow(2,s);return i&&fo(i)&&Date.now()+o-n<tn})}catch(n){if(this._debug(r,"error",n),Q(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await da(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<uo;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${uo}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),fo(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new er;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Pi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new er;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Q(i)){const o={session:null,error:i};return fo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await _f(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await ha(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),tn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/tn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${tn}ms, refresh threshold is ${yl} ticks`),s<=yl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Nf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Q(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Q(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mo(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+s1>Date.now()))return n;const{data:s,error:i}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new hs("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new hs("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=mo(n);if(C1(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const u=E1(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,m1(`${l}.${c}`)))throw new hs("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}}Ms.nextInstanceID=0;const q1=Ms;class H1 extends q1{constructor(t){super(t)}}var W1=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Y1{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Xx(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:qx,realtime:Wx,auth:Object.assign(Object.assign({},Hx),{storageKey:c}),global:Vx},d=Zx(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Jx(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new dx(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Uy(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Fx(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return W1(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H1({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new Sx(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const K1=(e,t,r)=>new Y1(e,t,r),Ti=()=>"/church-connect/",lr=e=>{const t=Ti(),r=e.startsWith("/")?e.substring(1):e,n=t.startsWith("/")?t.substring(1):t;return r.startsWith(n)?"/"+r:t+r},Sf=()=>{const e=window.location.hash;return e.includes("access_token=")||e.includes("refresh_token=")||e.includes("type=recovery")||e.includes("type=signup")},fd=()=>{const e=Ti(),t=window.location.pathname;if(Sf()){const r=window.location.hash;if(!t.startsWith(e)){const n=t.startsWith("/")?t.substring(1):t,s=e+n;return window.location.href=`${window.location.origin}${s}${r}`,!0}return!1}if(t==="/"&&e!=="/")return window.location.pathname=e,!0;if(!t.startsWith(e)&&!t.includes("/auth/callback")){const r=t.startsWith("/")?t.substring(1):t,n=e+r;return window.location.pathname=n,!0}return!1},G1=()=>{const e=window.location.origin,t=Ti();return`${e}${t}#/auth/callback`},J1="https://xlsazndxtgqlsyohzjhp.supabase.co",Q1="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhsc2F6bmR4dGdxbHN5b2h6amhwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4Nzc3MTIsImV4cCI6MjA1OTQ1MzcxMn0.N1oXEwBKFjmiP0zacqY6HTHr-50-PZZjTBUzkkIyub4",X1=()=>{if(!(typeof window>"u"))return G1()},O=K1(J1,Q1,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,redirectTo:X1()}}),Cf=p.createContext(),fa=()=>{const e=window.location.origin,t=Ti();return window.location.hostname==="bajejosh.github.io"||t.startsWith("/church-connect")?`${e}${t}#`:`${e}${t}`},Z1=({children:e})=>{const[t,r]=p.useState(null),[n,s]=p.useState(!0),[i,o]=p.useState(null);p.useEffect(()=>{(async()=>{var k;try{const{data:g,error:f}=await O.auth.getSession();if(f)throw f;r(((k=g==null?void 0:g.session)==null?void 0:k.user)||null)}catch(g){o(g.message)}finally{s(!1)}})();const{data:{subscription:b}}=O.auth.onAuthStateChange((k,g)=>{r((g==null?void 0:g.user)||null),s(!1)});return()=>b.unsubscribe()},[]);const y={user:t,loading:n,error:i,signUp:async(v,b,k={})=>{try{const{data:g,error:f}=await O.auth.signUp({email:v,password:b,options:{data:k,emailRedirectTo:`${fa()}/auth/callback`}});if(f)throw f;return g}catch(g){throw o(g.message),g}},signIn:async(v,b)=>{try{const{data:k,error:g}=await O.auth.signInWithPassword({email:v,password:b,options:{redirectTo:`${fa()}/auth/callback`}});if(g)throw g;return k}catch(k){throw o(k.message),k}},signOut:async()=>{try{r(null),localStorage.removeItem("userFullName"),localStorage.removeItem("userAvatarUrl");const{error:v}=await O.auth.signOut();v&&(console.warn("Warning during sign out process:",v.message),v.message.includes("Auth session missing")&&console.log("Session was already expired or invalid")),window.location.href=`${window.location.origin}${lr("login")}`}catch(v){console.warn("Error in sign out process:",v.message),window.location.href=`${window.location.origin}${lr("login")}`}},resetPassword:async v=>{try{const{error:b}=await O.auth.resetPasswordForEmail(v,{redirectTo:`${fa()}/auth/callback?reset=true`});if(b)throw b}catch(b){throw o(b.message),b}},updatePassword:async v=>{try{const{error:b}=await O.auth.updateUser({password:v});if(b)throw b}catch(b){throw o(b.message),b}},updateProfile:async v=>{try{if(v.email){const{error:k}=await O.auth.updateUser({email:v.email,options:{emailRedirectTo:`${fa()}/auth/callback`}});if(k)throw k}const{error:b}=await O.from("profiles").update({full_name:v.fullName,updated_at:new Date}).eq("id",t.id);if(b)throw b}catch(b){throw o(b.message),b}},isAuthenticated:!!t};return a.jsx(Cf.Provider,{value:y,children:e})},Ae=()=>{const e=p.useContext(Cf);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},Ef=p.createContext(),ev=({children:e})=>{const[t,r]=p.useState(()=>{const s=localStorage.getItem("theme");return s?s==="dark":!0});p.useEffect(()=>{t?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]);const n=()=>{r(s=>!s)};return a.jsx(Ef.Provider,{value:{darkMode:t,toggleDarkMode:n},children:e})},Pf=()=>{const e=p.useContext(Ef);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},Tf=p.createContext(),tv=({children:e})=>{const[t,r]=p.useState(!1),n=()=>{r(i=>!i)},s=()=>{r(!1)};return a.jsx(Tf.Provider,{value:{isSidebarOpen:t,toggleSidebar:n,closeSidebar:s},children:e})},$f=()=>{const e=p.useContext(Tf);if(e===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return e};var Lf={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},md=Ot.createContext&&Ot.createContext(Lf),wr=function(){return wr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wr.apply(this,arguments)},rv=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};function Of(e){return e&&e.map(function(t,r){return Ot.createElement(t.tag,wr({key:r},t.attr),Of(t.child))})}function W(e){return function(t){return Ot.createElement(nv,wr({attr:wr({},e.attr)},t),Of(e.child))}}function nv(e){var t=function(r){var n=e.attr,s=e.size,i=e.title,o=rv(e,["attr","size","title"]),l=s||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Ot.createElement("svg",wr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:wr(wr({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ot.createElement("title",null,i),e.children)};return md!==void 0?Ot.createElement(md.Consumer,null,function(r){return t(r)}):t(Lf)}function go(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"}}]})(e)}function sv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function ms(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function av(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function iv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(e)}function ti(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function Sc(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"}}]})(e)}function Pr(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function ov(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"}}]})(e)}function gd(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"}}]})(e)}function lv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function kn(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function cv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function Rf(e){return W({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function Af(e){return W({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function uv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(e)}function Tr(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M464.46 246.68L352 179.2V128h48c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-48V16c0-8.84-7.16-16-16-16h-32c-8.84 0-16 7.16-16 16v48h-48c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h48v51.2l-112.46 67.48A31.997 31.997 0 0 0 160 274.12V512h96v-96c0-35.35 28.65-64 64-64s64 28.65 64 64v96h96V274.12c0-11.24-5.9-21.66-15.54-27.44zM0 395.96V496c0 8.84 7.16 16 16 16h112V320L19.39 366.54A32.024 32.024 0 0 0 0 395.96zm620.61-29.42L512 320v192h112c8.84 0 16-7.16 16-16V395.96c0-12.8-7.63-24.37-19.39-29.42z"}}]})(e)}function dv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function hv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function fv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"}}]})(e)}function pd(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488 352h-40V109.25l59.31-59.31c6.25-6.25 6.25-16.38 0-22.63L484.69 4.69c-6.25-6.25-16.38-6.25-22.63 0L402.75 64H192v96h114.75L160 306.75V24c0-13.26-10.75-24-24-24H88C74.75 0 64 10.74 64 24v40H24C10.75 64 0 74.74 0 88v48c0 13.25 10.75 24 24 24h40v264c0 13.25 10.75 24 24 24h232v-96H205.25L352 205.25V488c0 13.25 10.75 24 24 24h48c13.25 0 24-10.75 24-24v-40h40c13.25 0 24-10.75 24-24v-48c0-13.26-10.75-24-24-24z"}}]})(e)}function mv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Fn(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function gv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"}}]})(e)}function $i(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function pv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"}}]})(e)}function Mf(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function yv(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function Cc(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function Jn(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function yd(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-64 268c0 10.7-12.9 16-20.5 8.5L104 376H76c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h28l35.5-36.5c7.6-7.6 20.5-2.2 20.5 8.5v136zm33.2-47.6c9.1-9.3 9.1-24.1 0-33.4-22.1-22.8 12.2-56.2 34.4-33.5 27.2 27.9 27.2 72.4 0 100.4-21.8 22.3-56.9-10.4-34.4-33.5zm86-117.1c54.4 55.9 54.4 144.8 0 200.8-21.8 22.4-57-10.3-34.4-33.5 36.2-37.2 36.3-96.5 0-133.8-22.1-22.8 12.3-56.3 34.4-33.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function xv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function vv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"}}]})(e)}function If(e){return W({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"}}]})(e)}function bl(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)}function Df(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function zf(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"}}]})(e)}function bv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function wv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}}]})(e)}function Is(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function kv(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function jv(e){return W({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z"}}]})(e)}function Ec(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"}}]})(e)}function Kt(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M470.38 1.51L150.41 96A32 32 0 0 0 128 126.51v261.41A139 139 0 0 0 96 384c-53 0-96 28.66-96 64s43 64 96 64 96-28.66 96-64V214.32l256-75v184.61a138.4 138.4 0 0 0-32-3.93c-53 0-96 28.66-96 64s43 64 96 64 96-28.65 96-64V32a32 32 0 0 0-41.62-30.49z"}}]})(e)}function _v(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(e)}function Nv(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z"}}]})(e)}function Ue(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function Et(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M256 128c35.35 0 64-28.65 64-64S291.35 0 256 0s-64 28.65-64 64 28.65 64 64 64zm-30.63 169.75c14.06 16.72 39 19.09 55.97 5.22l88-72.02c17.09-13.98 19.59-39.19 5.62-56.28-13.97-17.11-39.19-19.59-56.31-5.62l-57.44 47-38.91-46.31c-15.44-18.39-39.22-27.92-64-25.33-24.19 2.48-45.25 16.27-56.37 36.92l-49.37 92.03c-23.4 43.64-8.69 96.37 34.19 123.75L131.56 432H40c-22.09 0-40 17.91-40 40s17.91 40 40 40h208c34.08 0 53.77-42.79 28.28-68.28L166.42 333.86l34.8-64.87 24.15 28.76z"}}]})(e)}function Sv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}function Pc(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function Li(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function Cv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"}}]})(e)}function Ff(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function gs(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(e)}function Tc(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"}}]})(e)}function Uf(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"}}]})(e)}function xd(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"}}]})(e)}function Mt(e){return W({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function Oi(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function Ev(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function $c(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Gt(e){return W({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Pv(e){return W({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(e)}function Bf(e){return W({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"}}]})(e)}function Tv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"}}]})(e)}function $v(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29 7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160-93.3 160-208 160z"}}]})(e)}function Lv(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"}}]})(e)}const Ov=({className:e=""})=>{const{darkMode:t,toggleDarkMode:r}=Pf();return a.jsx("button",{onClick:r,className:`p-2 rounded-full transition-colors duration-200 ${t?"bg-gray-800 text-yellow-300 hover:bg-gray-700":"bg-blue-100 text-blue-800 hover:bg-blue-200"} ${e}`,"aria-label":t?"Switch to light mode":"Switch to dark mode",title:t?"Switch to light mode":"Switch to dark mode",children:t?a.jsx(Tc,{className:"w-5 h-5"}):a.jsx(Ec,{className:"w-5 h-5"})})},Ri=({userId:e,fullName:t="",email:r="",avatarUrl:n=null,size:s="md",className:i=""})=>{const[o,l]=p.useState(n),[c,u]=p.useState(!n&&!!e),d={sm:"h-6 w-6 text-xs",md:"h-8 w-8 text-sm",lg:"h-10 w-10 text-base",xl:"h-12 w-12 text-lg","2xl":"h-16 w-16 text-xl","3xl":"h-24 w-24 text-2xl","4xl":"h-32 w-32 text-4xl"};p.useEffect(()=>{const y=async()=>{if(!(!e||n))try{u(!0);const{data:b,error:k}=await O.from("profiles").select("avatar_url").eq("id",e).single();if(!k&&(b!=null&&b.avatar_url))localStorage.setItem(`userAvatarUrl:${e}`,b.avatar_url),l(b.avatar_url);else if(k){console.warn("Error fetching profile image:",k);const g=localStorage.getItem(`userAvatarUrl:${e}`);g&&l(g)}}catch(b){console.error("Error:",b)}finally{u(!1)}},v=localStorage.getItem(`userAvatarUrl:${e}`);v?(l(v),u(!1)):y()},[e,n]);const h=()=>t&&t.length>0?t.charAt(0).toUpperCase():r&&r.length>0?r.charAt(0).toUpperCase():"U",m=d[s]||d.md;return a.jsx("div",{className:`rounded-full overflow-hidden flex items-center justify-center ${m} ${i}`,children:c?a.jsx("div",{className:"animate-pulse bg-blue-100 dark:bg-blue-900 h-full w-full"}):o?a.jsx("img",{src:o,alt:t||"User",className:"h-full w-full object-cover",onError:()=>l(null)}):a.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 flex items-center justify-center h-full w-full text-blue-600 dark:text-blue-300 font-medium",children:h()})})},Rv=()=>{var d;const{user:e,signOut:t}=Ae(),{darkMode:r}=Pf(),{toggleSidebar:n}=$f(),[s,i]=p.useState(!1),o=Be(),[l,c]=p.useState(0),u=async()=>{try{await t(),o("/login")}catch(h){console.error("Error signing out:",h),o("/login")}};return p.useEffect(()=>{(async()=>{try{if(!(e!=null&&e.id))return;const{count:y,error:v}=await O.from("notifications").select("id",{count:"exact",head:!0}).eq("recipient_id",e.id).eq("read",!1);v||c(y||0)}catch(y){console.error("Error fetching notification count:",y)}})();const m=O.channel("notifications_count").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${e==null?void 0:e.id}`},()=>{c(y=>y+1)}).subscribe();return()=>{m.unsubscribe()}},[e==null?void 0:e.id]),a.jsx("header",{className:"bg-white shadow-sm dark:bg-dark-secondary sticky top-0 z-30",children:a.jsx("div",{className:"max-w-7xl mx-auto px-3 py-3",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("button",{className:"mr-2 md:hidden text-gray-600 dark:text-gray-300",onClick:n,children:a.jsx(iv,{className:"text-xl"})}),a.jsx(ve,{to:"/dashboard",className:"flex items-center",children:a.jsx("span",{className:"text-xl font-bold text-blue-600",children:"Church Connect"})})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ov,{}),a.jsxs(ve,{to:"/notifications",className:"relative text-gray-600 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400",children:[a.jsx(ti,{className:"text-xl"}),l>0&&a.jsx("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:l>9?"9+":l})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{className:"flex items-center",onClick:()=>i(!s),children:a.jsx(Ri,{userId:e==null?void 0:e.id,fullName:(d=e==null?void 0:e.user_metadata)==null?void 0:d.full_name,email:e==null?void 0:e.email,size:"md"})}),s&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-50",children:[a.jsx(ve,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>i(!1),children:"Your Profile"}),a.jsx(ve,{to:"/settings",className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>i(!1),children:"Settings"}),a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",onClick:u,children:[a.jsx(Ff,{className:"mr-2"}),"Sign out"]})]})]})]})]})})})},Av=()=>{const e=Cr(),{user:t}=Ae(),[r,n]=p.useState(0),s=i=>i==="/dashboard"&&e.pathname==="/"?!0:e.pathname===i||e.pathname.startsWith(`${i}/`);return p.useEffect(()=>{(async()=>{try{if(!(t!=null&&t.id))return;const{count:l,error:c}=await O.from("notifications").select("id",{count:"exact",head:!0}).eq("recipient_id",t.id).eq("read",!1);c||n(l||0)}catch(l){console.error("Error fetching notification count:",l)}})();const o=O.channel("notifications_count_bottom_nav").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${t==null?void 0:t.id}`},()=>{n(l=>l+1)}).subscribe();return()=>{o.unsubscribe()}},[t==null?void 0:t.id]),a.jsx("nav",{className:"fixed bottom-0 w-full bg-white border-t border-gray-200 py-2 md:hidden dark:bg-dark-secondary dark:border-gray-800",children:a.jsxs("div",{className:"flex justify-around items-center",children:[a.jsxs(ve,{to:"/dashboard",className:`flex flex-col items-center p-2 text-xs ${s("/dashboard")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[a.jsx(Df,{className:"text-xl mb-1"}),a.jsx("span",{children:"Home"})]}),a.jsxs(ve,{to:"/calendar",className:`flex flex-col items-center p-2 text-xs ${s("/calendar")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[a.jsx(Pr,{className:"text-xl mb-1"}),a.jsx("span",{children:"Calendar"})]}),a.jsxs(ve,{to:"/songs",className:`flex flex-col items-center p-2 text-xs ${s("/songs")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[a.jsx(Kt,{className:"text-xl mb-1"}),a.jsx("span",{children:"Songs"})]}),a.jsxs(ve,{to:"/notifications",className:`flex flex-col items-center p-2 text-xs relative ${s("/notifications")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[a.jsxs("span",{className:"relative",children:[a.jsx(ti,{className:"text-xl mb-1"}),r>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center",children:r>9?"9+":r})]}),a.jsx("span",{children:"Alerts"})]}),a.jsxs(ve,{to:"/profile",className:`flex flex-col items-center p-2 text-xs ${s("/profile")?"text-blue-600 dark:text-blue-400":"text-gray-600 dark:text-gray-400"}`,children:[a.jsx(Gt,{className:"text-xl mb-1"}),a.jsx("span",{children:"Profile"})]})]})})},vd=({className:e})=>{var s,i,o,l;const{user:t}=Ae(),r=[{path:"/dashboard",icon:a.jsx(Df,{}),label:"Dashboard"},{path:"/calendar",icon:a.jsx(Pr,{}),label:"Calendar"},{path:"/services",icon:a.jsx(jv,{}),label:"Services"},{path:"/songs",icon:a.jsx(Kt,{}),label:"Songs"},{path:"/teams",icon:a.jsx(Pv,{}),label:"Teams"},{path:"/prayer-requests",icon:a.jsx(Et,{}),label:"Prayer Requests"},{path:"/churches",icon:a.jsx(Tr,{}),label:"Churches"}],n=[{path:"/profile",icon:a.jsx(Gt,{}),label:"Profile"},{path:"/settings",icon:a.jsx(hv,{}),label:"Settings"}];return a.jsxs("aside",{className:`${e} flex flex-col h-full w-full bg-white dark:bg-dark-secondary shadow-lg border-r border-gray-200 dark:border-gray-700`,children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 w-full",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium",children:((i=(s=t==null?void 0:t.user_metadata)==null?void 0:s.full_name)==null?void 0:i.charAt(0))||((o=t==null?void 0:t.email)==null?void 0:o.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:((l=t==null?void 0:t.user_metadata)==null?void 0:l.full_name)||"User"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:(t==null?void 0:t.email)||"No email"})]})]})}),a.jsx("nav",{className:"flex-1 px-4 py-4 space-y-2 bg-white dark:bg-dark-secondary w-full",children:r.map(c=>a.jsxs(Ju,{to:c.path,className:({isActive:u})=>`flex items-center px-4 py-2 text-sm font-medium rounded-md ${u?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 shadow-sm":"text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 hover:shadow-sm"}`,children:[a.jsx("span",{className:"mr-3 text-lg",children:c.icon}),c.label]},c.path))}),a.jsx("div",{className:"px-4 py-4 space-y-2 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-dark-secondary w-full",children:n.map(c=>a.jsxs(Ju,{to:c.path,className:({isActive:u})=>`flex items-center px-4 py-2 text-sm font-medium rounded-md ${u?"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300 shadow-sm":"text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800 hover:shadow-sm"}`,children:[a.jsx("span",{className:"mr-3 text-lg",children:c.icon}),c.label]},c.path))})]})},Mv=({children:e})=>{const[t,r]=p.useState(window.innerWidth<768),{isSidebarOpen:n,closeSidebar:s}=$f();return p.useEffect(()=>{const i=()=>{r(window.innerWidth<768)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),p.useEffect(()=>{!t&&n&&s()},[t,n,s]),a.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50 dark:bg-gradient-dark",children:[a.jsx(Rv,{}),a.jsxs("div",{className:"flex flex-1 relative",children:[!t&&a.jsx("div",{className:"hidden md:block w-64 fixed top-[3.8rem] bottom-0 left-0 z-20",children:a.jsx(vd,{className:"h-full"})}),t&&n&&a.jsxs("div",{className:"fixed inset-0 z-40 flex",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity",onClick:s,"aria-hidden":"true"}),a.jsx("div",{className:"relative flex-1 flex flex-col max-w-xs w-full transform transition ease-in-out duration-300",children:a.jsx("div",{className:"absolute top-0 bottom-0 left-0 w-full",children:a.jsx(vd,{className:"h-full"})})})]}),a.jsx("main",{className:"flex-1 px-4 md:px-6 pt-4 pb-[100px] md:ml-64 md:pt-4",children:e})]}),t&&a.jsx(Av,{})]})},Iv=()=>{const{isAuthenticated:e,loading:t}=Ae();return t?a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?a.jsx(Mv,{children:a.jsx(xy,{})}):a.jsx(Z0,{to:"/login",replace:!0})},Dv=()=>{const{signIn:e}=Ae(),t=Be(),[r,n]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,h]=p.useState(()=>{const v=localStorage.getItem("darkMode");return v===null?!0:v==="true"});p.useEffect(()=>{d?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",d),d?document.body.classList.add("dark","bg-gray-900"):document.body.classList.remove("dark","bg-gray-900")},[d]);const m=()=>{h(v=>!v)},y=async v=>{v.preventDefault();try{l(null),u(!0),await e(r,s),t("/dashboard")}catch(b){l(b.message||"Failed to sign in"),console.error("Login error:",b)}finally{u(!1)}};return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${d?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} px-4 py-12 sm:px-6 lg:px-8`,children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("button",{onClick:m,className:`p-2 rounded-full ${d?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,"aria-label":d?"Switch to light mode":"Switch to dark mode",children:d?a.jsx(Tc,{}):a.jsx(Ec,{})})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:`text-3xl font-bold ${d?"text-blue-400":"text-blue-600"}`,children:"Church Connect"}),a.jsx("h2",{className:`mt-6 text-2xl font-bold ${d?"text-white":"text-gray-900"}`,children:"Welcome back"}),a.jsx("p",{className:`mt-2 text-sm ${d?"text-gray-400":"text-gray-600"}`,children:"Sign in to your account"})]}),a.jsxs("div",{className:`${d?"bg-gray-800":"bg-white"} p-8 shadow rounded-lg`,children:[o&&a.jsx("div",{className:`mb-4 p-3 ${d?"bg-red-900 text-red-200":"bg-red-100 text-red-700"} rounded-md text-sm`,children:o}),a.jsxs("form",{className:"space-y-6",onSubmit:y,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${d?"text-gray-300":"text-gray-700"}`,children:"Email address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx($i,{className:"text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${d?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"you@example.com",value:r,onChange:v=>n(v.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${d?"text-gray-300":"text-gray-700"}`,children:"Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${d?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"",value:s,onChange:v=>i(v.target.value)})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:`h-4 w-4 text-blue-600 focus:ring-blue-500 ${d?"border-gray-600":"border-gray-300"} rounded`}),a.jsx("label",{htmlFor:"remember-me",className:`ml-2 block text-sm ${d?"text-gray-300":"text-gray-700"}`,children:"Remember me"})]}),a.jsx("div",{className:"text-sm",children:a.jsx(ve,{to:"/forgot-password",className:`font-medium ${d?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Forgot your password?"})})]}),a.jsx("div",{children:a.jsxs("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[c?a.jsx("div",{className:"animate-spin h-5 w-5 mr-2 border-t-2 border-white rounded-full"}):a.jsx(Cv,{className:"mr-2"}),"Sign in"]})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:`w-full border-t ${d?"border-gray-600":"border-gray-300"}`})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:`px-2 ${d?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or"})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:`text-sm ${d?"text-gray-400":"text-gray-600"}`,children:["Don't have an account?"," ",a.jsx(ve,{to:"/register",className:`font-medium ${d?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Sign up"})]})})]})]})]})})},zv=()=>{const{signUp:e}=Ae(),t=Be(),[r,n]=p.useState({email:"",password:"",confirmPassword:"",fullName:"",churchName:""}),[s,i]=p.useState(null),[o,l]=p.useState(!1),[c,u]=p.useState(()=>{const y=localStorage.getItem("darkMode");return y===null?!0:y==="true"});p.useEffect(()=>{c?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",c),c?document.body.classList.add("dark","bg-gray-900"):document.body.classList.remove("dark","bg-gray-900")},[c]);const d=()=>{u(y=>!y)},h=y=>{const{name:v,value:b}=y.target;n(k=>({...k,[v]:b}))},m=async y=>{if(y.preventDefault(),r.password!==r.confirmPassword){i("Passwords do not match");return}try{i(null),l(!0),await e(r.email,r.password,{full_name:r.fullName,church_name:r.churchName}),t("/verify-email")}catch(v){i(v.message||"Failed to sign up")}finally{l(!1)}};return a.jsx("div",{className:`min-h-screen flex items-center justify-center ${c?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"} px-4 py-12 sm:px-6 lg:px-8`,children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsx("div",{className:"absolute top-4 right-4",children:a.jsx("button",{onClick:d,className:`p-2 rounded-full ${c?"bg-gray-700 text-gray-200":"bg-gray-200 text-gray-700"}`,"aria-label":c?"Switch to light mode":"Switch to dark mode",children:c?a.jsx(Tc,{}):a.jsx(Ec,{})})}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:`text-3xl font-bold ${c?"text-blue-400":"text-blue-600"}`,children:"Church Connect"}),a.jsx("h2",{className:`mt-6 text-2xl font-bold ${c?"text-white":"text-gray-900"}`,children:"Create an account"}),a.jsx("p",{className:`mt-2 text-sm ${c?"text-gray-400":"text-gray-600"}`,children:"Join the community today"})]}),a.jsxs("div",{className:`${c?"bg-gray-800":"bg-white"} p-8 shadow rounded-lg`,children:[s&&a.jsx("div",{className:`mb-4 p-3 ${c?"bg-red-900 text-red-200":"bg-red-100 text-red-700"} rounded-md text-sm`,children:s}),a.jsxs("form",{className:"space-y-4",onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Email address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx($i,{className:"text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${c?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"you@example.com",value:r.email,onChange:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Full Name"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Gt,{className:"text-gray-400"})}),a.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${c?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"John Doe",value:r.fullName,onChange:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"churchName",className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Church Name"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Tr,{className:"text-gray-400"})}),a.jsx("input",{id:"churchName",name:"churchName",type:"text",className:`appearance-none block w-full pl-10 px-3 py-3 border ${c?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"Grace Community Church",value:r.churchName,onChange:h})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional - You can join or create a church later"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${c?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"",value:r.password,onChange:h})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"}`,children:"Confirm Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"text-gray-400"})}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:`appearance-none block w-full pl-10 px-3 py-3 border ${c?"border-gray-600 bg-gray-700 text-gray-100 placeholder-gray-500":"border-gray-300 bg-white text-gray-900 placeholder-gray-400"} rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500`,placeholder:"",value:r.confirmPassword,onChange:h})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"submit",disabled:o,className:"mt-4 w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o?a.jsx("div",{className:"animate-spin h-5 w-5 mr-2 border-t-2 border-white rounded-full"}):a.jsx($c,{className:"mr-2"}),"Sign up"]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:`text-sm ${c?"text-gray-400":"text-gray-600"}`,children:["Already have an account?"," ",a.jsx(ve,{to:"/login",className:`font-medium ${c?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-500"}`,children:"Sign in"})]})})]})]})})},Fv=()=>{const{resetPassword:e}=Ae(),[t,r]=p.useState(""),[n,s]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(""),u=async d=>{d.preventDefault();try{s(null),o(!0),c(""),await e(t),c("Password reset instructions have been sent to your email. Please check your inbox."),r("")}catch(h){s(h.message||"Failed to send password reset email")}finally{o(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-blue-600",children:"Church Connect"}),a.jsx("h2",{className:"mt-6 text-2xl font-bold text-gray-900",children:"Reset your password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your email address below and we'll send you a link to reset your password"})]}),a.jsxs("div",{className:"bg-white p-8 shadow rounded-lg",children:[n&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:n}),l&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded-md text-sm",children:l}),a.jsxs("form",{className:"space-y-6",onSubmit:u,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx($i,{className:"text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full pl-10 px-3 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"you@example.com",value:t,onChange:d=>r(d.target.value)})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"submit",disabled:i,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i?a.jsx("div",{className:"animate-spin h-5 w-5 mr-2 border-t-2 border-white rounded-full"}):a.jsx(_v,{className:"mr-2"}),"Send Reset Link"]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",a.jsx(ve,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Back to login"})]})})]})]})})},Uv=()=>{const{updatePassword:e}=Ae(),t=Be(),[r,n]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,h]=p.useState(null);p.useEffect(()=>{const y=window.location.hash.substring(1);new URLSearchParams(y).get("access_token")?h(!0):l("Invalid reset link. Please request a new password reset link.")},[]);const m=async y=>{if(y.preventDefault(),r!==s){l("Passwords do not match");return}if(r.length<6){l("Password must be at least 6 characters");return}try{l(null),u(!0),await e(r),t("/login",{state:{message:"Password successfully reset. Please log in with your new password."}})}catch(v){l(v.message||"Failed to reset password")}finally{u(!1)}};return o&&!d?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"w-full max-w-md",children:a.jsxs("div",{className:"bg-white p-8 shadow rounded-lg",children:[a.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:o}),a.jsx("button",{onClick:()=>t("/forgot-password"),className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Request New Reset Link"})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-blue-600",children:"Church Connect"}),a.jsx("h2",{className:"mt-6 text-2xl font-bold text-gray-900",children:"Set new password"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please enter a new password for your account"})]}),a.jsxs("div",{className:"bg-white p-8 shadow rounded-lg",children:[o&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:o}),a.jsxs("form",{className:"space-y-6",onSubmit:m,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full pl-10 px-3 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"",value:r,onChange:y=>n(y.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Is,{className:"text-gray-400"})}),a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full pl-10 px-3 py-3 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"",value:s,onChange:y=>i(y.target.value)})]})]}),a.jsx("div",{children:a.jsxs("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[c?a.jsx("div",{className:"animate-spin h-5 w-5 mr-2 border-t-2 border-white rounded-full"}):a.jsx(kn,{className:"mr-2"}),"Reset Password"]})})]})]})]})})},Bv=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-blue-600",children:"Church Connect"}),a.jsx("h2",{className:"mt-6 text-2xl font-bold text-gray-900",children:"Verify your email"})]}),a.jsxs("div",{className:"bg-white p-8 shadow rounded-lg text-center",children:[a.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx($i,{className:"text-2xl text-blue-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Check your inbox"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"We sent a verification link to your email address. Please click the link to verify your account."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-4 border border-gray-200 rounded-md bg-gray-50",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:"Next steps:"}),a.jsxs("ul",{className:"text-sm text-gray-600 text-left space-y-2",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx(kn,{className:"mt-1 mr-2 text-green-500 flex-shrink-0"}),a.jsx("span",{children:"Check your email inbox (and spam folder)"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(kn,{className:"mt-1 mr-2 text-green-500 flex-shrink-0"}),a.jsx("span",{children:"Click the verification link in the email"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx(kn,{className:"mt-1 mr-2 text-green-500 flex-shrink-0"}),a.jsx("span",{children:"Return to Church Connect and sign in"})]})]})]}),a.jsx(ve,{to:"/login",className:"block w-full py-3 px-4 text-center border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back to Login"})]}),a.jsxs("p",{className:"mt-6 text-sm text-gray-500",children:["Didn't receive an email? Check your spam folder or"," ",a.jsx(ve,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"try again"})]})]})]})}),Vv=()=>{const e=Be(),[t,r]=p.useState(null),[n,s]=p.useState("Verifying your account...");return p.useEffect(()=>{(async()=>{try{s("Processing authentication...");const o=new URLSearchParams(window.location.hash.substring(1)),l=o.get("error_description");if(l)throw new Error(l);if(console.log("Auth hash found:",window.location.hash?"Yes (hash exists)":"No"),o.get("type")==="recovery"){s("Password reset confirmed"),e(lr("dashboard"),{replace:!0});return}const{data:u,error:d}=await O.auth.getSession();if(d)throw d;if(u!=null&&u.session)s("Authentication successful, redirecting to dashboard"),console.log("Authentication successful, redirecting to dashboard"),setTimeout(()=>{e(lr("dashboard"),{replace:!0})},100);else{const h=o.get("access_token"),m=o.get("refresh_token");if(h){s("Processing access token...");try{const{data:y,error:v}=await O.auth.setSession({access_token:h,refresh_token:m||""});if(v)throw v;if(y!=null&&y.session){s("Session established, redirecting to dashboard"),setTimeout(()=>{e(lr("dashboard"),{replace:!0})},100);return}}catch(y){console.error("Token processing error:",y)}}s("No session found, redirecting to login"),console.log("No session found, redirecting to login"),setTimeout(()=>{e(lr("login"),{replace:!0})},100)}}catch(o){console.error("Auth callback error:",o),r(o.message),s("Authentication error, redirecting to login"),setTimeout(()=>{e(lr("login"),{replace:!0})},1500)}})()},[e]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:t?"Authentication Error":"Verifying Your Account"}),t?a.jsx("div",{className:"text-red-500 mb-4",children:t}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:n})]}),t&&a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Redirecting you to the login page..."})]})})};var Vf={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(tt,function(){var r=1e3,n=6e4,s=36e5,i="millisecond",o="second",l="minute",c="hour",u="day",d="week",h="month",m="quarter",y="year",v="date",b="Invalid Date",k=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var _=["th","st","nd","rd"],A=S%100;return"["+S+(_[(A-20)%10]||_[A]||_[0])+"]"}},x=function(S,_,A){var I=String(S);return!I||I.length>=_?S:""+Array(_+1-I.length).join(A)+S},w={s:x,z:function(S){var _=-S.utcOffset(),A=Math.abs(_),I=Math.floor(A/60),j=A%60;return(_<=0?"+":"-")+x(I,2,"0")+":"+x(j,2,"0")},m:function S(_,A){if(_.date()<A.date())return-S(A,_);var I=12*(A.year()-_.year())+(A.month()-_.month()),j=_.clone().add(I,h),M=A-j<0,$=_.clone().add(I+(M?-1:1),h);return+(-(I+(A-j)/(M?j-$:$-j))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:h,y,w:d,d:u,D:v,h:c,m:l,s:o,ms:i,Q:m}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},E="en",N={};N[E]=f;var C="$isDayjsObject",T=function(S){return S instanceof D||!(!S||!S[C])},R=function S(_,A,I){var j;if(!_)return E;if(typeof _=="string"){var M=_.toLowerCase();N[M]&&(j=M),A&&(N[M]=A,j=M);var $=_.split("-");if(!j&&$.length>1)return S($[0])}else{var F=_.name;N[F]=_,j=F}return!I&&j&&(E=j),j||!I&&E},P=function(S,_){if(T(S))return S.clone();var A=typeof _=="object"?_:{};return A.date=S,A.args=arguments,new D(A)},L=w;L.l=R,L.i=T,L.w=function(S,_){return P(S,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var D=function(){function S(A){this.$L=R(A.locale,null,!0),this.parse(A),this.$x=this.$x||A.x||{},this[C]=!0}var _=S.prototype;return _.parse=function(A){this.$d=function(I){var j=I.date,M=I.utc;if(j===null)return new Date(NaN);if(L.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var $=j.match(k);if($){var F=$[2]-1||0,H=($[7]||"0").substring(0,3);return M?new Date(Date.UTC($[1],F,$[3]||1,$[4]||0,$[5]||0,$[6]||0,H)):new Date($[1],F,$[3]||1,$[4]||0,$[5]||0,$[6]||0,H)}}return new Date(j)}(A),this.init()},_.init=function(){var A=this.$d;this.$y=A.getFullYear(),this.$M=A.getMonth(),this.$D=A.getDate(),this.$W=A.getDay(),this.$H=A.getHours(),this.$m=A.getMinutes(),this.$s=A.getSeconds(),this.$ms=A.getMilliseconds()},_.$utils=function(){return L},_.isValid=function(){return this.$d.toString()!==b},_.isSame=function(A,I){var j=P(A);return this.startOf(I)<=j&&j<=this.endOf(I)},_.isAfter=function(A,I){return P(A)<this.startOf(I)},_.isBefore=function(A,I){return this.endOf(I)<P(A)},_.$g=function(A,I,j){return L.u(A)?this[I]:this.set(j,A)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(A,I){var j=this,M=!!L.u(I)||I,$=L.p(A),F=function(yt,Ee){var ct=L.w(j.$u?Date.UTC(j.$y,Ee,yt):new Date(j.$y,Ee,yt),j);return M?ct:ct.endOf(u)},H=function(yt,Ee){return L.w(j.toDate()[yt].apply(j.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(Ee)),j)},q=this.$W,K=this.$M,te=this.$D,be="set"+(this.$u?"UTC":"");switch($){case y:return M?F(1,0):F(31,11);case h:return M?F(1,K):F(0,K+1);case d:var ke=this.$locale().weekStart||0,pt=(q<ke?q+7:q)-ke;return F(M?te-pt:te+(6-pt),K);case u:case v:return H(be+"Hours",0);case c:return H(be+"Minutes",1);case l:return H(be+"Seconds",2);case o:return H(be+"Milliseconds",3);default:return this.clone()}},_.endOf=function(A){return this.startOf(A,!1)},_.$set=function(A,I){var j,M=L.p(A),$="set"+(this.$u?"UTC":""),F=(j={},j[u]=$+"Date",j[v]=$+"Date",j[h]=$+"Month",j[y]=$+"FullYear",j[c]=$+"Hours",j[l]=$+"Minutes",j[o]=$+"Seconds",j[i]=$+"Milliseconds",j)[M],H=M===u?this.$D+(I-this.$W):I;if(M===h||M===y){var q=this.clone().set(v,1);q.$d[F](H),q.init(),this.$d=q.set(v,Math.min(this.$D,q.daysInMonth())).$d}else F&&this.$d[F](H);return this.init(),this},_.set=function(A,I){return this.clone().$set(A,I)},_.get=function(A){return this[L.p(A)]()},_.add=function(A,I){var j,M=this;A=Number(A);var $=L.p(I),F=function(K){var te=P(M);return L.w(te.date(te.date()+Math.round(K*A)),M)};if($===h)return this.set(h,this.$M+A);if($===y)return this.set(y,this.$y+A);if($===u)return F(1);if($===d)return F(7);var H=(j={},j[l]=n,j[c]=s,j[o]=r,j)[$]||1,q=this.$d.getTime()+A*H;return L.w(q,this)},_.subtract=function(A,I){return this.add(-1*A,I)},_.format=function(A){var I=this,j=this.$locale();if(!this.isValid())return j.invalidDate||b;var M=A||"YYYY-MM-DDTHH:mm:ssZ",$=L.z(this),F=this.$H,H=this.$m,q=this.$M,K=j.weekdays,te=j.months,be=j.meridiem,ke=function(Ee,ct,xt,B){return Ee&&(Ee[ct]||Ee(I,M))||xt[ct].slice(0,B)},pt=function(Ee){return L.s(F%12||12,Ee,"0")},yt=be||function(Ee,ct,xt){var B=Ee<12?"AM":"PM";return xt?B.toLowerCase():B};return M.replace(g,function(Ee,ct){return ct||function(xt){switch(xt){case"YY":return String(I.$y).slice(-2);case"YYYY":return L.s(I.$y,4,"0");case"M":return q+1;case"MM":return L.s(q+1,2,"0");case"MMM":return ke(j.monthsShort,q,te,3);case"MMMM":return ke(te,q);case"D":return I.$D;case"DD":return L.s(I.$D,2,"0");case"d":return String(I.$W);case"dd":return ke(j.weekdaysMin,I.$W,K,2);case"ddd":return ke(j.weekdaysShort,I.$W,K,3);case"dddd":return K[I.$W];case"H":return String(F);case"HH":return L.s(F,2,"0");case"h":return pt(1);case"hh":return pt(2);case"a":return yt(F,H,!0);case"A":return yt(F,H,!1);case"m":return String(H);case"mm":return L.s(H,2,"0");case"s":return String(I.$s);case"ss":return L.s(I.$s,2,"0");case"SSS":return L.s(I.$ms,3,"0");case"Z":return $}return null}(Ee)||$.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(A,I,j){var M,$=this,F=L.p(I),H=P(A),q=(H.utcOffset()-this.utcOffset())*n,K=this-H,te=function(){return L.m($,H)};switch(F){case y:M=te()/12;break;case h:M=te();break;case m:M=te()/3;break;case d:M=(K-q)/6048e5;break;case u:M=(K-q)/864e5;break;case c:M=K/s;break;case l:M=K/n;break;case o:M=K/r;break;default:M=K}return j?M:L.a(M)},_.daysInMonth=function(){return this.endOf(h).$D},_.$locale=function(){return N[this.$L]},_.locale=function(A,I){if(!A)return this.$L;var j=this.clone(),M=R(A,I,!0);return M&&(j.$L=M),j},_.clone=function(){return L.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},S}(),z=D.prototype;return P.prototype=z,[["$ms",i],["$s",o],["$m",l],["$H",c],["$W",u],["$M",h],["$y",y],["$D",v]].forEach(function(S){z[S[1]]=function(_){return this.$g(_,S[0],S[1])}}),P.extend=function(S,_){return S.$i||(S(_,D,P),S.$i=!0),P},P.locale=R,P.isDayjs=T,P.unix=function(S){return P(1e3*S)},P.en=N[E],P.Ls=N,P.p={},P})})(Vf);var qv=Vf.exports;const ie=ni(qv);var qf={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(tt,function(){return function(r,n,s){r=r||{};var i=n.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,d,h,m){return i.fromToBase(u,d,h,m)}s.en.relativeTime=o,i.fromToBase=function(u,d,h,m,y){for(var v,b,k,g=h.$locale().relativeTime||o,f=r.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],x=f.length,w=0;w<x;w+=1){var E=f[w];E.d&&(v=m?s(u).diff(h,E.d,!0):h.diff(u,E.d,!0));var N=(r.rounding||Math.round)(Math.abs(v));if(k=v>0,N<=E.r||!E.r){N<=1&&w>0&&(E=f[w-1]);var C=g[E.l];y&&(N=y(""+N)),b=typeof C=="string"?C.replace("%d",N):C(N,d,E.l,k);break}}if(d)return b;var T=k?g.future:g.past;return typeof T=="function"?T(b):T.replace("%s",b)},i.to=function(u,d){return l(u,d,this,!0)},i.from=function(u,d){return l(u,d,this)};var c=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}})})(qf);var Hv=qf.exports;const Lc=ni(Hv),wl=({imageUrl:e,onClose:t,allImages:r=[]})=>{const[n,s]=p.useState(0),[i,o]=p.useState(0),[l,c]=p.useState(0),u=r.length>0?r:[e];p.useEffect(()=>{if(r.length>0&&e){const k=r.findIndex(g=>g===e);k>=0&&s(k)}},[e,r]);const d=k=>{k.stopPropagation()},h=k=>{k.stopPropagation(),u.length>1&&s(g=>g===0?u.length-1:g-1)},m=k=>{k.stopPropagation(),u.length>1&&s(g=>g===u.length-1?0:g+1)};p.useEffect(()=>{const k=g=>{g.key==="ArrowLeft"?h(g):g.key==="ArrowRight"?m(g):g.key==="Escape"&&t()};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[u.length]);const y=k=>{o(k.targetTouches[0].clientX)},v=k=>{c(k.targetTouches[0].clientX)},b=()=>{i-l>100?m({stopPropagation:()=>{}}):i-l<-100&&h({stopPropagation:()=>{}}),o(0),c(0)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",onClick:t,children:a.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[a.jsx("button",{className:"absolute top-4 right-4 bg-white rounded-full p-2 text-gray-800 hover:bg-gray-100 z-10",onClick:t,children:a.jsx(Mt,{})}),u.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 text-gray-800 hover:bg-gray-100 z-10",onClick:h,children:a.jsx(Rf,{})}),a.jsx("button",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white rounded-full p-2 text-gray-800 hover:bg-gray-100 z-10",onClick:m,children:a.jsx(Af,{})})]}),a.jsx("img",{src:u[n],alt:"Full size",className:"max-h-[90vh] max-w-full mx-auto object-contain rounded-lg",onClick:d,onTouchStart:y,onTouchMove:v,onTouchEnd:b}),u.length>1&&a.jsxs("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-sm",children:[n+1," / ",u.length]})]})})},Wv=({post:e,authorInfo:t,relativeTime:r,formattedDate:n,isEvent:s,isPrayer:i,isAnnouncement:o})=>{var h;const l=Be(),[c,u]=p.useState(null);p.useEffect(()=>{if(e.is_anonymous||t&&t.full_name||e.full_name&&e.full_name!=="User"||!e.user_id)return;(async()=>{try{const{data:y,error:v}=await O.from("profiles").select("full_name, avatar_url").eq("id",e.user_id).single();if(v)throw v;y&&y.full_name&&u(y)}catch(y){console.error("Error fetching author info:",y)}})()},[e.user_id,e.is_anonymous,t]);const d=()=>{var m;if(e.is_anonymous)return"Anonymous";if(t!=null&&t.full_name&&t.full_name!=="User")return t.full_name;if(c!=null&&c.full_name&&c.full_name!=="User")return c.full_name;if(e.full_name&&e.full_name!=="User")return e.full_name;if((m=e.profile)!=null&&m.full_name&&e.profile.full_name!=="User")return e.profile.full_name;if(e.author_name&&e.author_name!=="User")return e.author_name;if(e.user_id===localStorage.getItem("userId")){const y=localStorage.getItem("userFullName");if(y)return y}return"User"};return a.jsx("div",{className:"flex items-center",children:e.is_anonymous?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 mr-3",children:a.jsx("div",{className:"h-full w-full flex items-center justify-center",children:a.jsx(Gt,{className:"text-gray-400 dark:text-gray-500"})})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Anonymous"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r,e.church_name&&`  ${e.church_name}`]}),bd(s,i,o)]}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",title:n,children:n})]})]}):a.jsxs("div",{className:"flex items-center cursor-pointer",onClick:()=>l(`/profile/${e.user_id}`),children:[a.jsx("div",{className:"mr-3",children:a.jsx(Ri,{userId:e.user_id,fullName:d(),avatarUrl:(t==null?void 0:t.avatar_url)||(c==null?void 0:c.avatar_url)||e.avatar_url||((h=e.profile)==null?void 0:h.avatar_url),size:"lg"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:d()}),a.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r,e.church_name&&`  ${e.church_name}`]}),bd(s,i,o)]}),a.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",title:n,children:n})]})]})})},bd=(e,t,r)=>!e&&!t&&!r?null:a.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${e?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":t?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"bg-yellow-100 dark:bg-yellow-900 text-yellow-700 dark:text-yellow-300"}`,children:[e&&a.jsx(Pr,{className:"mr-1 text-xs"}),t&&a.jsx(Et,{className:"mr-1 text-xs"}),r&&a.jsx(Sc,{className:"mr-1 text-xs"}),e?"Event":t?"Prayer":"Announcement"]}),kl=e=>{if(!e)return null;const t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/watch\?.*v=)([^&?\/\s]+)/,/youtube\.com\/shorts\/([^&?\/\s]+)/,/youtu\.be\/([^&?\/\s]+)/];for(const r of t){const n=e.match(r);if(n&&n[1])return n[1]}return null},jl=e=>{if(!e)return null;const t=/suno\.com\/song\/([^?\/\s]+)/,r=e.match(t);if(r&&r[1])return r[1];try{const n=new URL(e);if(e.includes("suno.com")&&n.searchParams.get("sh"))return n.searchParams.get("sh")}catch{}return null},Yv=e=>{try{return new URL(e),!0}catch{return!1}},wd=e=>!e||!Yv(e)?"text":kl(e)?"youtube":jl(e)||e.includes("suno.com")?"suno":"url",kd=e=>({type:"youtube",videoId:e,src:`https://www.youtube.com/embed/${e}`}),ma=e=>({type:"suno",songId:e,src:`https://suno.com/player/${e}`}),en=e=>({type:"url",url:e}),jd=e=>{if(!e)return[{type:"text",content:""}];const t=e.trim(),r=wd(t);if(r==="youtube"){const o=kl(t);if(o)return[kd(o)]}if(r==="suno"){const o=jl(t);if(o)return[ma(o)];if(t.includes("suno.com"))try{const c=new URL(t).searchParams.get("sh");if(c)return[ma(c)]}catch{}}if(r==="url")return[en(t)];const n=/(https?:\/\/[^\s]+)/g,s=e.split(n),i=[];return s.forEach((o,l)=>{if(n.test(o)){const c=wd(o);if(c==="youtube"){const u=kl(o);u?i.push(kd(u)):i.push(en(o))}else if(c==="suno"){const u=jl(o);if(u)i.push(ma(u));else if(o.includes("suno.com"))try{const h=new URL(o).searchParams.get("sh");h?i.push(ma(h)):i.push(en(o))}catch{i.push(en(o))}else i.push(en(o))}else i.push(en(o))}else o&&i.push({type:"text",content:o})}),i},Kv=({post:e,onPostUpdated:t,onCancel:r})=>{var D,z;const{user:n}=Ae(),[s,i]=p.useState((e==null?void 0:e.content)||""),[o,l]=p.useState((e==null?void 0:e.post_type)||"regular"),[c,u]=p.useState([]),[d,h]=p.useState([]),[m,y]=p.useState((e==null?void 0:e.media_urls)||[]),[v,b]=p.useState(!1),[k,g]=p.useState((e==null?void 0:e.is_anonymous)||!1),f=p.useRef();p.useEffect(()=>{e&&(i(e.content||""),l(e.post_type||"regular"),g(e.is_anonymous||!1),y(e.media_urls||[]))},[e]);const x=S=>{i(S.target.value)},w=S=>{const _=Array.from(S.target.files);if(_.length===0)return;const A=_.filter(j=>j.type.startsWith("image/")||j.type.startsWith("video/")),I=A.map(j=>({file:j,url:URL.createObjectURL(j),type:j.type.startsWith("image/")?"image":"video"}));u([...c,...A]),h([...d,...I])},E=S=>{URL.revokeObjectURL(d[S].url);const _=[...c];_.splice(S,1);const A=[...d];A.splice(S,1),u(_),h(A)},N=S=>{const _=[...m];_.splice(S,1),y(_)},C=S=>{l(S)},T=async S=>{if(S.preventDefault(),!(!s.trim()&&c.length===0&&m.length===0))try{b(!0);const _=[];if(c.length>0)for(const $ of c){const F=$.name.split(".").pop(),H=`${Date.now()}-${Math.random().toString(36).substring(2)}.${F}`,q=`posts/${n.id}/${H}`,{error:K}=await O.storage.from("media").upload(q,$);if(K)throw console.error("Media upload error:",K),K;const{data:te}=O.storage.from("media").getPublicUrl(q);_.push(te.publicUrl)}const A=[...m,..._],I={content:s.trim(),media_urls:A,post_type:o,is_anonymous:o==="prayer"&&k,updated_at:new Date().toISOString()},{data:j,error:M}=await O.from("posts").update(I).eq("id",e.id).select().single();if(M)throw console.error("Post update error:",M),M;console.log("Post updated successfully:",j),d.forEach($=>URL.revokeObjectURL($.url)),t&&t(j)}catch(_){console.error("Error updating post:",_),alert("Failed to update post. Please try again: "+_.message)}finally{b(!1)}},R=({type:S,icon:_,label:A,active:I})=>a.jsxs("button",{type:"button",className:`flex items-center px-3 py-1.5 rounded-full text-sm ${I?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>C(S),children:[_,a.jsx("span",{className:"ml-1",children:A})]}),{avatar_url:P,full_name:L}=(n==null?void 0:n.user_metadata)||{};return a.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Edit Post"}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(Mt,{})})]}),a.jsxs("form",{onSubmit:T,children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-200",children:P?a.jsx("img",{src:P,alt:L,className:"h-full w-full object-cover"}):a.jsx("div",{className:"h-full w-full flex items-center justify-center",children:a.jsx(Gt,{className:"text-gray-400"})})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("textarea",{placeholder:"What's on your mind?",className:"w-full border rounded-lg p-3 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-lg text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-800 dark:border-gray-700 resize-none",rows:4,value:s,onChange:x}),m.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Media"}),a.jsx("div",{className:`grid gap-2 ${m.length>1?"grid-cols-2":"grid-cols-1"}`,children:m.map((S,_)=>{const A=S.match(/\.(mp4|webm|ogg)$/i);return a.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:[A?a.jsx("video",{src:S,className:"w-full h-48 object-cover",controls:!0}):a.jsx("img",{src:S,alt:`Media ${_+1}`,className:"w-full h-48 object-cover"}),a.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white rounded-full p-1",onClick:()=>N(_),children:a.jsx(Mt,{})})]},_)})})]}),d.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Media"}),a.jsx("div",{className:`grid gap-2 ${d.length>1?"grid-cols-2":"grid-cols-1"}`,children:d.map((S,_)=>a.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:[S.type==="image"?a.jsx("img",{src:S.url,alt:`Upload preview ${_+1}`,className:"w-full h-48 object-cover"}):a.jsx("video",{src:S.url,className:"w-full h-48 object-cover",controls:!0}),a.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white rounded-full p-1",onClick:()=>E(_),children:a.jsx(Mt,{})})]},_))})]})]})]})}),a.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Post type:"}),a.jsx(R,{type:"regular",icon:a.jsx(Gt,{className:"text-blue-500"}),label:"Regular",active:o==="regular"}),a.jsx(R,{type:"prayer",icon:a.jsx(Et,{className:"text-purple-500"}),label:"Prayer Request",active:o==="prayer"}),a.jsx(R,{type:"event",icon:a.jsx(Pr,{className:"text-green-500"}),label:"Event",active:o==="event"}),(((D=n==null?void 0:n.user_metadata)==null?void 0:D.role)==="admin"||((z=n==null?void 0:n.user_metadata)==null?void 0:z.role)==="worship_leader")&&a.jsx(R,{type:"announcement",icon:a.jsx(Sc,{className:"text-yellow-500"}),label:"Announcement",active:o==="announcement"})]})}),o==="prayer"&&a.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:a.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:k,onChange:S=>g(S.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),a.jsx("span",{children:"Post anonymously"})]})}),a.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",className:"flex items-center text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md px-3 py-1.5",onClick:()=>f.current.click(),children:[a.jsx(zf,{className:"text-green-500 mr-1.5"}),a.jsx("span",{className:"text-sm",children:"Add Photo"})]}),a.jsxs("button",{type:"button",className:"flex items-center text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md px-3 py-1.5",onClick:()=>f.current.click(),children:[a.jsx(Bf,{className:"text-red-500 mr-1.5"}),a.jsx("span",{className:"text-sm",children:"Add Video"})]}),a.jsx("input",{type:"file",multiple:!0,ref:f,className:"hidden",onChange:w,accept:"image/*,video/*"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",className:"px-4 py-1.5 text-sm border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700",onClick:r,children:"Cancel"}),a.jsx("button",{type:"submit",disabled:v||!s.trim()&&c.length===0&&m.length===0,className:"px-4 py-1.5 text-sm font-medium bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:v?a.jsxs(a.Fragment,{children:[a.jsx(gs,{className:"animate-spin mr-1.5"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Pc,{className:"mr-1.5"}),"Save Changes"]})})]})]})]})]})},Gv=({title:e="Confirm Delete",message:t="Are you sure you want to delete this item? This action cannot be undone.",confirmText:r="Delete",cancelText:n="Cancel",isDeleting:s=!1,onConfirm:i,onCancel:o})=>a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 dark:bg-gray-800 dark:bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:o}),a.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:a.jsxs("div",{className:"sm:flex sm:items-start",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(Mf,{className:"h-6 w-6 text-red-600 dark:text-red-300"})}),a.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[a.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",id:"modal-title",children:e}),a.jsx("div",{className:"mt-2",children:a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t})})]})]})}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm ${s?"opacity-75 cursor-not-allowed":""}`,onClick:i,disabled:s,children:s?"Deleting...":r}),a.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-gray-800 text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:o,disabled:s,children:n})]})]})]})}),Hf=({post:e,currentUserId:t,onPostUpdated:r,onPostDeleted:n})=>{var Ye;const[s,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState([]),[d,h]=p.useState(!1),[m,y]=p.useState(!1),[v,b]=p.useState(e.userReactions||{}),[k,g]=p.useState(null),[f,x]=p.useState(!1),[w,E]=p.useState(!1),[N,C]=p.useState(!1),[T,R]=p.useState(!1),[P,L]=p.useState(null),[D,z]=p.useState(e.is_pinned||!1),[S,_]=p.useState(!1);p.useEffect(()=>{e.userReactions&&b(e.userReactions)},[e.userReactions]),p.useEffect(()=>{var V,G;if(!e.is_anonymous){if((V=e.profile)!=null&&V.full_name&&((G=e.profile)==null?void 0:G.full_name)!=="User"){g(e.profile);return}if(e.user_id)try{(async()=>{const{data:se,error:je}=await O.from("profiles").select("full_name, avatar_url").eq("id",e.user_id).single();if(je)throw je;se&&g(se)})()}catch(he){console.error("Error fetching author info:",he)}}},[e.user_id,e.is_anonymous,e.profile]);const A=V=>{const G=new Date(V),se=Math.floor((new Date-G)/1e3);if(se<60)return"just now";if(se<3600){const je=Math.floor(se/60);return`${je} ${je===1?"minute":"minutes"} ago`}else if(se<86400){const je=Math.floor(se/3600);return`${je} ${je===1?"hour":"hours"} ago`}else if(se<604800){const je=Math.floor(se/86400);return`${je} ${je===1?"day":"days"} ago`}else return new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},I=A(e.created_at),j=new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),M=e.post_type==="event",$=e.post_type==="prayer",F=e.post_type==="announcement",H=V=>{var he;const G=(he=e.reactions)==null?void 0:he.find(se=>se.reaction_type===V);return G?parseInt(G.count):0},q=H("like"),K=H("pray"),te=async V=>{if(t)try{const{data:G,error:he}=await O.rpc("toggle_post_reaction",{post_id_param:e.id,user_id_param:t,reaction_type_param:V});if(he)throw he;b(se=>({...se,[V]:G}))}catch(G){console.error("Error toggling reaction:",G)}},be=async()=>{if(!(!t||t!==e.user_id))try{_(!0);try{const{data:V,error:G}=await O.rpc("toggle_post_pin",{post_id_param:e.id,user_id_param:t});if(G)throw G;z(V),e.is_pinned=V,r&&r({...e,is_pinned:V})}catch(V){console.warn("Function toggle_post_pin not found. Falling back to direct update.",V);const G=!D,{error:he}=await O.from("posts").update({is_pinned:G}).eq("id",e.id).eq("user_id",t);if(he)throw he;z(G),e.is_pinned=G,r&&r({...e,is_pinned:G})}}catch(V){console.error("Error toggling pin status:",V)}finally{_(!1),x(!1)}};p.useEffect(()=>{s&&J()},[s]);const ke=()=>{E(!0),x(!1)},pt=V=>{if(E(!1),r)r(V);else{const G=JSON.parse(JSON.stringify(V));Object.assign(e,G)}},yt=()=>{C(!0),x(!1)},Ee=async()=>{try{R(!0);const{error:V}=await O.from("posts").delete().eq("id",e.id);if(V)throw V;C(!1),n&&n(e.id)}catch(V){console.error("Error deleting post:",V),alert("Failed to delete post: "+V.message)}finally{R(!1)}},ct=()=>{C(!1)},xt=()=>{E(!1)},B=V=>{var G;return V?V.user_id===t?localStorage.getItem("userFullName")||"You":(G=V.profiles)!=null&&G.full_name&&V.profiles.full_name!=="User"?V.profiles.full_name:"User":"User"},J=async()=>{if(e.id)try{h(!0);const{data:V,error:G}=await O.from("comments").select("*").eq("post_id",e.id).order("created_at",{ascending:!0});if(G)throw G;if(!V||V.length===0){u([]);return}const he=await Promise.all(V.map(async se=>{if(!se.user_id)return{...se,profiles:null};try{const{data:je}=await O.from("profiles").select("full_name, avatar_url").eq("id",se.user_id).single();return{...se,profiles:je}}catch(je){return console.error("Error fetching commenter profile:",je),{...se,profiles:null}}}));u(he)}catch(V){console.error("Error fetching comments:",V)}finally{h(!1)}},Ne=async V=>{if(V.preventDefault(),!(!o.trim()||!t))try{y(!0);const{data:G,error:he}=await O.from("comments").insert({post_id:e.id,user_id:t,content:o.trim()}).select();if(he)throw he;if(G&&G.length>0){const se={...G[0],profiles:{full_name:localStorage.getItem("userFullName")||"You",avatar_url:localStorage.getItem("userAvatarUrl")||null}};u(je=>[...je,se])}l("")}catch(G){console.error("Error submitting comment:",G)}finally{y(!1)}},de=(V,G)=>{switch(V.type){case"youtube":return a.jsx("div",{className:"aspect-w-16 aspect-h-9 mt-3 rounded-lg overflow-hidden",children:a.jsx("iframe",{src:V.src,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"w-full h-full border-0"})},`youtube-${G}`);case"suno":return a.jsx("div",{className:"mt-3 rounded-lg overflow-hidden",children:a.jsx("iframe",{src:V.src,title:"Suno music player",allow:"autoplay",className:"w-full h-24 border-0"})},`suno-${G}`);case"url":return a.jsx("a",{href:V.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline break-all",children:V.url},`url-${G}`);case"text":default:return a.jsx("span",{children:V.content},`text-${G}`)}},re=()=>jd(e.content).map((G,he)=>de(G,he)),Me=(V,G)=>jd(V).map((se,je)=>de(se,`comment-${G}-${je}`));return a.jsxs(a.Fragment,{children:[P&&a.jsx(wl,{imageUrl:P,onClose:()=>L(null),allImages:((Ye=e.media_urls)==null?void 0:Ye.filter(V=>!V.match(/\.(mp4|webm|ogg)$/i)))||[]}),N&&a.jsx(Gv,{title:"Delete Post",message:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",isDeleting:T,onConfirm:Ee,onCancel:ct}),w?a.jsx(Kv,{post:e,onPostUpdated:pt,onCancel:xt}):a.jsxs("div",{className:`bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden mb-4 ${D?"border-l-4 border-blue-500":""}`,children:[a.jsxs("div",{className:"p-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wv,{post:e,authorInfo:k,relativeTime:I,formattedDate:j,isEvent:M,isPrayer:$,isAnnouncement:F}),D&&a.jsxs("div",{className:"ml-2 flex items-center bg-blue-100 dark:bg-blue-900/30 px-2 py-0.5 rounded-full",title:"Pinned post",children:[a.jsx(xd,{className:"text-blue-500 mr-1"}),a.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium",children:"Pinned"})]})]}),a.jsxs("div",{className:"relative ml-auto",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>x(!f),children:a.jsx(gv,{})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-md shadow-lg z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsx("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",onClick:()=>x(!1),children:"Save post"}),t===e.user_id&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",onClick:ke,children:[a.jsx(Fn,{className:"mr-2"})," Edit post"]}),a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",onClick:be,disabled:S,children:[a.jsx(xd,{className:"mr-2"})," ",D?"Unpin post":"Pin to top"]}),a.jsxs("button",{className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center",onClick:yt,children:[a.jsx(Oi,{className:"mr-2"})," Delete post"]})]})]})})]})]}),a.jsxs("div",{className:"p-4 pt-0",children:[a.jsx("div",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-line",children:re()}),e.media_urls&&e.media_urls.length>0&&a.jsx("div",{className:`mt-3 grid ${e.media_urls.length>1?"grid-cols-2 gap-2":"grid-cols-1"}`,children:e.media_urls.map((V,G)=>V.match(/\.(mp4|webm|ogg)$/i)?a.jsx("video",{src:V,className:"w-full h-auto rounded-md object-cover",controls:!0},G):a.jsx("img",{src:V,alt:`Post media ${G+1}`,className:"w-full h-auto rounded-md object-cover cursor-pointer",onClick:()=>L(V)},G))})]}),(q>0||K>0||e.commentsCount>0)&&a.jsxs("div",{className:"px-4 py-2 flex justify-between text-sm text-gray-500 dark:text-gray-400 border-t border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center",children:[q>0&&a.jsxs("span",{className:"inline-flex items-center mr-3",children:[a.jsx(bl,{className:"text-red-500 mr-1"})," ",q]}),K>0&&a.jsxs("span",{className:"inline-flex items-center",children:[a.jsx(Et,{className:"text-purple-500 mr-1"})," ",K]})]}),e.commentsCount>0&&a.jsxs("button",{className:"hover:underline",onClick:()=>i(!s),children:[e.commentsCount," ",e.commentsCount===1?"comment":"comments"]})]}),a.jsxs("div",{className:"px-2 py-2 grid grid-cols-3 gap-2 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("button",{className:`flex items-center justify-center p-2 rounded-md ${v.like?"text-red-500 font-medium":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>te("like"),children:a.jsxs("span",{className:"inline-flex items-center",children:[v.like?a.jsx(bl,{className:"mr-2"}):a.jsx(Lv,{className:"mr-2"}),"Like"]})}),a.jsx("button",{className:"flex items-center justify-center p-2 text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700 rounded-md",onClick:()=>i(!s),children:a.jsxs("span",{className:"inline-flex items-center",children:[a.jsx($v,{className:"mr-2"}),"Comment"]})}),a.jsx("button",{className:`flex items-center justify-center p-2 rounded-md ${v.pray?"text-purple-500 font-medium":"text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,onClick:()=>te("pray"),children:a.jsxs("span",{className:"inline-flex items-center",children:[a.jsx(Et,{className:"mr-2"}),"Pray"]})})]}),s&&a.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900 border-t border-gray-100 dark:border-gray-700",children:[t&&a.jsxs("form",{onSubmit:Ne,className:"mb-4 flex",children:[a.jsx("input",{type:"text",placeholder:"Write a comment...",className:"flex-1 p-2 border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-l-md focus:outline-none focus:ring-1 focus:ring-blue-500",value:o,onChange:V=>l(V.target.value),disabled:m}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-r-md disabled:opacity-50",disabled:!o.trim()||m,children:m?"Sending...":"Post"})]}),d?a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm py-2",children:"Loading comments..."}):c.length===0?a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm py-2",children:"No comments yet. Be the first to comment!"}):a.jsx("div",{className:"space-y-4",children:c.map(V=>{var G;return a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"h-8 w-8 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0",children:(G=V.profiles)!=null&&G.avatar_url?a.jsx("img",{src:V.profiles.avatar_url,alt:B(V),className:"h-full w-full object-cover"}):a.jsx("div",{className:"h-full w-full flex items-center justify-center",children:a.jsx(Gt,{className:"text-gray-400 dark:text-gray-500"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-lg px-3 py-2 shadow-sm",children:[a.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:B(V)}),a.jsx("div",{className:"text-gray-800 dark:text-gray-200",children:Me(V.content,V.id)})]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-2",children:A(V.created_at)})]})]},V.id)})})]})]})]})},Jv=({onPostCreated:e,churchId:t})=>{var P,L,D;const{user:r}=Ae(),[n,s]=p.useState(""),[i,o]=p.useState("regular"),[l,c]=p.useState([]),[u,d]=p.useState([]),[h,m]=p.useState(!1),[y,v]=p.useState(!1),[b,k]=p.useState(!1),g=p.useRef(),f=z=>{s(z.target.value),!y&&z.target.value&&v(!0)},x=z=>{const S=Array.from(z.target.files);if(S.length===0)return;const _=S.filter(I=>I.type.startsWith("image/")||I.type.startsWith("video/")),A=_.map(I=>({file:I,url:URL.createObjectURL(I),type:I.type.startsWith("image/")?"image":"video"}));c([...l,..._]),d([...u,...A]),v(!0)},w=z=>{URL.revokeObjectURL(u[z].url);const S=[...l];S.splice(z,1);const _=[...u];_.splice(z,1),c(S),d(_)},E=z=>{o(z),v(!0)},N=async z=>{if(z.preventDefault(),!(!n.trim()&&l.length===0))try{m(!0);const S=[];if(l.length>0)for(const j of l){const M=j.name.split(".").pop(),$=`${Date.now()}-${Math.random().toString(36).substring(2)}.${M}`,F=`posts/${r.id}/${$}`,{error:H}=await O.storage.from("media").upload(F,j);if(H)throw console.error("Media upload error:",H),H;const{data:q}=O.storage.from("media").getPublicUrl(F);S.push(q.publicUrl)}const _={user_id:r.id,church_id:t,content:n.trim(),media_urls:S,post_type:i,is_anonymous:i==="prayer"&&b},{data:A,error:I}=await O.from("posts").insert(_).select().single();if(I)throw console.error("Post creation error:",I),I;console.log("Post created successfully:",A),s(""),c([]),d([]),o("regular"),k(!1),v(!1),e&&e(A)}catch(S){console.error("Error creating post:",S),alert("Failed to create post. Please try again: "+S.message)}finally{m(!1)}},C=({type:z,icon:S,label:_,active:A})=>a.jsxs("button",{type:"button",className:`flex items-center px-3 py-1.5 rounded-full text-sm ${A?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,onClick:()=>E(z),children:[S,a.jsx("span",{className:"ml-1",children:_})]}),T=(P=r==null?void 0:r.user_metadata)==null?void 0:P.full_name,R=(T==null?void 0:T.split(" ")[0])||"there";return a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Ri,{userId:r==null?void 0:r.id,fullName:T,email:r==null?void 0:r.email,size:"lg"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("textarea",{placeholder:`What's on your mind, ${R}?`,className:"w-full border rounded-lg p-3 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-lg text-gray-700 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 bg-white dark:bg-gray-800 dark:border-gray-700 resize-none",rows:y?4:2,value:n,onChange:f,onClick:()=>v(!0)}),u.length>0&&a.jsx("div",{className:`grid gap-2 mb-3 ${u.length>1?"grid-cols-2":"grid-cols-1"}`,children:u.map((z,S)=>a.jsxs("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:[z.type==="image"?a.jsx("img",{src:z.url,alt:`Upload preview ${S+1}`,className:"w-full h-48 object-cover"}):a.jsx("video",{src:z.url,className:"w-full h-48 object-cover",controls:!0}),a.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-gray-900 bg-opacity-70 text-white rounded-full p-1",onClick:()=>w(S),children:a.jsx(Mt,{})})]},S))})]})]})}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-1",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",children:"Post type:"}),a.jsx(C,{type:"regular",icon:a.jsx(Gt,{className:"text-blue-500"}),label:"Regular",active:i==="regular"}),a.jsx(C,{type:"prayer",icon:a.jsx(Et,{className:"text-purple-500"}),label:"Prayer Request",active:i==="prayer"}),a.jsx(C,{type:"event",icon:a.jsx(Pr,{className:"text-green-500"}),label:"Event",active:i==="event"}),(((L=r==null?void 0:r.user_metadata)==null?void 0:L.role)==="admin"||((D=r==null?void 0:r.user_metadata)==null?void 0:D.role)==="worship_leader")&&a.jsx(C,{type:"announcement",icon:a.jsx(Sc,{className:"text-yellow-500"}),label:"Announcement",active:i==="announcement"})]})}),i==="prayer"&&a.jsx("div",{className:"px-4 py-2 border-t border-gray-100 dark:border-gray-700",children:a.jsxs("label",{className:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:z=>k(z.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),a.jsx("span",{children:"Post anonymously"})]})}),a.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{type:"button",className:"flex items-center text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md px-3 py-1.5",onClick:()=>g.current.click(),children:[a.jsx(zf,{className:"text-green-500 mr-1.5"}),a.jsx("span",{className:"text-sm",children:"Photo"})]}),a.jsxs("button",{type:"button",className:"flex items-center text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md px-3 py-1.5",onClick:()=>g.current.click(),children:[a.jsx(Bf,{className:"text-red-500 mr-1.5"}),a.jsx("span",{className:"text-sm",children:"Video"})]}),a.jsx("input",{type:"file",multiple:!0,ref:g,className:"hidden",onChange:x,accept:"image/*,video/*"})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{type:"button",className:"px-4 py-1.5 text-sm border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700",onClick:()=>{v(!1),s(""),c([]),d([]),o("regular"),k(!1)},children:"Cancel"}),a.jsx("button",{type:"submit",disabled:h||!n.trim()&&l.length===0,className:"px-4 py-1.5 text-sm font-medium bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:h?a.jsxs(a.Fragment,{children:[a.jsx(gs,{className:"animate-spin mr-1.5"}),"Posting..."]}):"Post"})]})]})]})]})})},Qv=({currentUserId:e,churchId:t})=>{const{user:r}=Ae(),[n,s]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState(null),[u,d]=p.useState("all"),[h,m]=p.useState(0),[y,v]=p.useState(!0),[b,k]=p.useState(0),g=10;p.useEffect(()=>{E()},[h,u,b,t]);const f=P=>(P.sort((L,D)=>{const z=L.is_pinned??!1,S=D.is_pinned??!1;return z&&!S?-1:!z&&S?1:new Date(D.created_at)-new Date(L.created_at)}),P);p.useEffect(()=>{e&&(r!=null&&r.user_metadata)&&(async()=>{try{const L=r.user_metadata.full_name,D=r.user_metadata.avatar_url;if(L)try{localStorage.setItem("userFullName",L),D&&localStorage.setItem("userAvatarUrl",D);const z=JSON.parse(localStorage.getItem("usernamesCache")||"{}");z[e]=L,localStorage.setItem("usernamesCache",JSON.stringify(z))}catch(z){console.error("Error updating localStorage cache:",z)}}catch(L){console.error("Error setting user metadata:",L)}})()},[e,r]);const x=P=>{s(L=>{const D=L.map(z=>z.id===P.id?P:z);return f(D)})},w=P=>{s(L=>L.filter(D=>D.id!==P))},E=async()=>{try{o(!0);let P=O.from("posts_with_authors").select("*").order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).range(h*g,(h+1)*g-1);if(u==="following"&&e){const{data:S}=await O.from("follows").select("following_id").eq("follower_id",e),_=(S==null?void 0:S.map(A=>A.following_id))||[];if(_.length===0){v(!1),s([]),o(!1);return}else P=P.in("user_id",_)}else u==="church"&&t?P=P.eq("church_id",t):u!=="all"&&(P=P.eq("post_type",u));const{data:L,error:D}=await P;if(D){console.error("Error with posts_with_authors view:",D);let S=O.from("posts").select("*").order("is_pinned",{ascending:!1}).order("created_at",{ascending:!1}).range(h*g,(h+1)*g-1);if(u==="following"&&e){const j=(followingData==null?void 0:followingData.map(M=>M.following_id))||[];S=S.in("user_id",j)}else u==="church"&&t?S=S.eq("church_id",t):u!=="all"&&(S=S.eq("post_type",u));const{data:_,error:A}=await S;if(A)throw A;v(_.length===g);const I=await Promise.all(_.map(async j=>{var F,H;let M="User",$=null;if(j.user_id===e)M=((F=r==null?void 0:r.user_metadata)==null?void 0:F.full_name)||"You",$=(H=r==null?void 0:r.user_metadata)==null?void 0:H.avatar_url;else try{const q=JSON.parse(localStorage.getItem("usernamesCache")||"{}");if(q[j.user_id])M=q[j.user_id];else{const{data:K}=await O.rpc("get_user_full_name",{user_id_param:j.user_id});if(K){M=K;const te=JSON.parse(localStorage.getItem("usernamesCache")||"{}");te[j.user_id]=K,localStorage.setItem("usernamesCache",JSON.stringify(te))}}}catch(q){console.log("Error fetching user data:",q)}return N(j,M,$)}));C(I),o(!1);return}v(L.length===g);const z=await Promise.all(L.map(async S=>{const _=S.full_name||"User",A=S.avatar_url;if(_&&_!=="User"&&S.user_id)try{const I=JSON.parse(localStorage.getItem("usernamesCache")||"{}");I[S.user_id]=_,localStorage.setItem("usernamesCache",JSON.stringify(I))}catch(I){console.log("Error updating usernames cache:",I)}return N(S,_,A)}));C(z),f(n)}catch(P){console.error("Error fetching posts:",P),c(P.message)}finally{o(!1)}},N=async(P,L,D)=>{let z={full_name:L,avatar_url:D},S=null;if(P.church_id&&!P.church_name){const{data:F,error:H}=await O.from("churches").select("name").eq("id",P.church_id).single();H||(S=F)}else P.church_name&&(S={name:P.church_name});const{data:_,error:A}=await O.from("reactions").select("reaction_type").eq("post_id",P.id),I=_?Array.from(_.reduce((F,{reaction_type:H})=>(F.set(H,(F.get(H)||0)+1),F),new Map)).map(([F,H])=>({reaction_type:F,count:H})):[];A&&console.error("Error fetching reactions:",A);const{count:j,error:M}=await O.from("comments").select("id",{count:"exact"}).eq("post_id",P.id);M&&console.error("Error fetching comments count:",M);let $={};if(e){const{data:F,error:H}=await O.from("reactions").select("reaction_type").eq("post_id",P.id).eq("user_id",e);H&&console.error("Error fetching user reactions:",H),F==null||F.forEach(q=>{$[q.reaction_type]=!0})}return{...P,profile:z,church:S,reactions:I||[],commentsCount:j||0,userReactions:$,created_at:P.created_at||new Date().toISOString()}},C=P=>{const L=f([...P]);s(h===0?L:D=>{const z=[...D,...L];return f(z)})},T=P=>{var L,D;if(e){const z={...P,profile:{full_name:((L=r==null?void 0:r.user_metadata)==null?void 0:L.full_name)||"You",avatar_url:((D=r==null?void 0:r.user_metadata)==null?void 0:D.avatar_url)||null},reactions:[],commentsCount:0,userReactions:{}};s(S=>{const _=[z,...S];return f(_)})}else m(0),k(z=>z+1)},R=()=>{!i&&y&&m(P=>P+1)};return a.jsxs("div",{className:"space-y-4",children:[e&&a.jsx(Jv,{onPostCreated:T,churchId:t}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded-lg shadow flex items-center space-x-1 overflow-x-auto",children:[a.jsx(xv,{className:"text-gray-400 mr-2 flex-shrink-0"}),a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium ${u==="all"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("all"),children:"All"}),e&&a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${u==="following"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("following"),children:"Following"}),t&&a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium whitespace-nowrap ${u==="church"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("church"),children:"My Church"}),a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium ${u==="event"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("event"),children:"Events"}),a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium ${u==="prayer"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("prayer"),children:"Prayer"}),a.jsx("button",{className:`px-3 py-1 rounded-full text-sm font-medium ${u==="announcement"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,onClick:()=>d("announcement"),children:"Announcements"})]}),l?a.jsxs("div",{className:"bg-red-100 dark:bg-red-900 p-4 rounded-md text-red-800 dark:text-red-200",children:["Error loading posts: ",l]}):n.length===0&&!i?a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow text-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"No posts found"}),a.jsx("p",{className:"mt-1 text-gray-500 dark:text-gray-400",children:u==="following"?"You're not following anyone yet, or the people you follow haven't posted anything.":u==="church"?"Your church doesn't have any posts yet.":u!=="all"?`No ${u} posts found.`:"There are no posts yet. Be the first to share something!"})]}):a.jsxs("div",{className:"space-y-4",children:[n.map(P=>a.jsx(Hf,{post:P,currentUserId:e,onPostUpdated:x,onPostDeleted:w},P.id)),i&&a.jsx("div",{className:"space-y-4",children:[1,2].map(P=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full animate-pulse"}),a.jsxs("div",{className:"space-y-1 flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4 animate-pulse"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/6 animate-pulse"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 animate-pulse"})]}),a.jsx("div",{className:"h-40 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]},P))}),y&&!i&&a.jsx("button",{onClick:R,className:"w-full py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md",children:"Load more"})]})]})};ie.extend(Lc);const Xv=()=>{const{user:e}=Ae(),[t,r]=p.useState([]),[n,s]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState(!0),[u,d]=p.useState(null),[h,m]=p.useState(null);return p.useEffect(()=>{(async()=>{try{c(!0);const v=localStorage.getItem("userChurchId");if(v)m(v);else try{const{data:b,error:k}=await O.from("profiles").select("church_id").eq("id",e.id).single();k?console.error("Profile error:",k):b!=null&&b.church_id&&(m(b.church_id),localStorage.setItem("userChurchId",b.church_id))}catch(b){console.error("Error querying profiles:",b)}if(h||v){const b=h||v,{data:k,error:g}=await O.from("churches").select("*").eq("id",b).single();g?console.error("Church error:",g):d(k);const f=ie().toISOString(),x=ie().add(7,"day").toISOString(),{data:w,error:E}=await O.from("events").select("*").eq("church_id",b).gte("start_time",f).lte("start_time",x).order("start_time",{ascending:!0}).limit(5);E?console.error("Event error:",E):r(w||[]);const{data:N,error:C}=await O.from("songs").select("*").eq("church_id",b).order("created_at",{ascending:!1}).limit(5);C?console.error("Song error:",C):s(N||[]);const{data:T,error:R}=await O.from("prayer_requests").select("*").eq("church_id",b).eq("is_private",!1).order("created_at",{ascending:!1}).limit(5);R?console.error("Prayer error:",R):o(T||[])}}catch(v){console.error("Error fetching dashboard data:",v)}finally{c(!1)}})()},[e==null?void 0:e.id]),l?a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}):a.jsxs("div",{className:"space-y-4 pt-2",children:[a.jsx("div",{children:!u&&a.jsxs("div",{className:"mt-3 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[a.jsx("p",{className:"text-yellow-700",children:"You're not connected to a church yet. Join or create one to access all features."}),a.jsxs(ve,{to:"/churches",className:"mt-3 inline-flex items-center justify-center w-full sm:w-auto px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Tr,{className:"mr-2"}),"Find or Create a Church"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2 space-y-6",children:a.jsx(Qv,{currentUserId:e.id,churchId:h})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Upcoming Events"}),a.jsx(ve,{to:"/calendar",className:"text-sm text-blue-600 font-medium",children:"View all "})]}),t.length===0?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No upcoming events in the next 7 days"}):a.jsx("div",{className:"space-y-2",children:t.map(y=>a.jsxs("div",{className:"flex items-start p-2 border border-gray-100 dark:border-gray-700 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsxs("div",{className:"min-w-[50px] text-center",children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100",children:ie(y.start_time).format("MMM")}),a.jsx("div",{className:"text-xl font-bold text-blue-600",children:ie(y.start_time).format("DD")})]}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:y.title}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ie(y.start_time).format("h:mm A")," - ",ie(y.end_time).format("h:mm A")]}),y.location&&a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.location})]})]},y.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Prayer Requests"}),a.jsx(ve,{to:"/prayer-requests",className:"text-sm text-blue-600 font-medium",children:"View all "})]}),i.length===0?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No prayer requests yet"}):a.jsx("div",{className:"space-y-2",children:i.map(y=>a.jsxs("div",{className:"p-2 border-b last:border-0",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:y.title}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 line-clamp-2",children:y.description}),a.jsxs("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[y.is_anonymous?"Anonymous":"User","  ",ie(y.created_at).fromNow()]})]},y.id))})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Recent Songs"}),a.jsx(ve,{to:"/songs",className:"text-sm text-blue-600 font-medium",children:"View all "})]}),n.length===0?a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"No songs added yet"}):a.jsx("div",{className:"space-y-2",children:n.map(y=>a.jsx("div",{className:"flex items-center p-2 border-b last:border-0",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm",children:y.title}),y.artist&&a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:y.artist})]})},y.id))})]})]})]})]})},Zv=()=>{const e=Be(),[t,r]=p.useState(ie()),[n,s]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState("month");p.useEffect(()=>{(async()=>{try{o(!0);const x=t.startOf("month").toISOString(),w=t.endOf("month").toISOString(),{data:E,error:N}=await O.from("events").select(`
            id,
            title,
            description,
            start_time,
            end_time,
            location,
            church_id,
            team_id,
            event_type,
            churches (name)
          `).gte("start_time",x).lte("start_time",w);if(N)throw N;s(E||[])}catch(x){console.error("Error fetching events:",x)}finally{o(!1)}})()},[t]);const u=()=>{l==="month"?r(t.subtract(1,"month")):l==="quarter"?r(t.subtract(3,"month")):l==="year"&&r(t.subtract(1,"year"))},d=()=>{l==="month"?r(t.add(1,"month")):l==="quarter"?r(t.add(3,"month")):l==="year"&&r(t.add(1,"year"))},h=()=>{const f=t.startOf("month"),x=t.endOf("month"),w=f.startOf("week"),E=x.endOf("week"),N=[];let C=w;for(;C.isBefore(E)||C.isSame(E,"day");)N.push(C),C=C.add(1,"day");return N},m=f=>n.filter(x=>ie(x.start_time).isSame(f,"day")),y=()=>{e("/services/new")},v=f=>{f.event_type==="service"?e(`/services/${f.id}`):e(`/events/${f.id}`)},b=()=>{const f=h(),x=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 border-b dark:border-gray-700 p-2",children:x.map(w=>a.jsx("div",{className:"text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:w},w))}),a.jsx("div",{className:"grid grid-cols-7 gap-1 p-2",children:f.map(w=>{const E=w.month()===t.month(),N=w.isSame(ie(),"day"),C=m(w);return a.jsxs("div",{className:`min-h-[80px] p-1 border rounded ${E?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900 text-gray-400 dark:text-gray-500"} ${N?"border-blue-500":"border-gray-200 dark:border-gray-700"}`,children:[a.jsx("div",{className:"text-right",children:a.jsx("span",{className:`text-sm font-medium ${N?"bg-blue-500 text-white rounded-full w-6 h-6 inline-flex items-center justify-center":""}`,children:w.date()})}),a.jsxs("div",{className:"mt-1 space-y-1",children:[C.slice(0,3).map(T=>a.jsxs("div",{className:`truncate text-xs rounded p-1 cursor-pointer ${T.event_type==="service"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300"}`,title:T.title,onClick:()=>v(T),children:[T.event_type==="service"&&a.jsx(Kt,{className:"inline mr-1",size:10}),T.title]},T.id)),C.length>3&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",C.length-3," more"]})]})]},w.valueOf())})})]})},k=()=>a.jsx("div",{className:"text-center py-20 text-gray-500 dark:text-gray-400",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Quarterly view coming soon"})}),g=()=>a.jsx("div",{className:"text-center py-20 text-gray-500 dark:text-gray-400",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Yearly view coming soon"})});return a.jsxs("div",{className:"space-y-4 pb-16 md:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Calendar"}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded shadow-sm flex items-center",title:"Add new service",onClick:y,children:[a.jsx(Ue,{className:"mr-1"}),a.jsx("span",{className:"hidden sm:inline",children:"Add Service"})]})})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:u,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300","aria-label":"Previous",children:a.jsx(Rf,{})}),a.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:[l==="month"&&t.format("MMMM YYYY"),l==="quarter"&&`Q${Math.ceil((t.month()+1)/3)} ${t.year()}`,l==="year"&&t.format("YYYY")]}),a.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300","aria-label":"Next",children:a.jsx(Af,{})})]}),a.jsxs("div",{className:"border dark:border-gray-700 rounded-md overflow-hidden",children:[a.jsx("button",{onClick:()=>c("month"),className:`px-3 py-1 text-sm ${l==="month"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Month"}),a.jsx("button",{onClick:()=>c("quarter"),className:`px-3 py-1 text-sm ${l==="quarter"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Quarter"}),a.jsx("button",{onClick:()=>c("year"),className:`px-3 py-1 text-sm ${l==="year"?"bg-blue-600 text-white":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"Year"})]})]}),i&&a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),!i&&a.jsxs(a.Fragment,{children:[l==="month"&&b(),l==="quarter"&&k(),l==="year"&&g()]}),a.jsxs("div",{className:"flex items-center justify-end space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"w-3 h-3 bg-blue-100 rounded mr-1"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Services"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"w-3 h-3 bg-green-100 rounded mr-1"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Other Events"})]})]})]})},e2=()=>{const e=Be(),[t,r]=p.useState([]),[n,s]=p.useState(!0),[i,o]=p.useState("");p.useEffect(()=>{(async()=>{try{s(!0);const{data:m,error:y}=await O.from("songs").select("*").order("title",{ascending:!0});if(y)throw y;r(m||[])}catch(m){console.error("Error fetching songs:",m)}finally{s(!1)}})()},[]);const l=t.filter(h=>h.title.toLowerCase().includes(i.toLowerCase())||h.artist&&h.artist.toLowerCase().includes(i.toLowerCase())),c=()=>{e("/songs/new")},u=h=>{e(`/songs/${h}`)},d=(h,m)=>{m.stopPropagation(),e(`/songs/edit/${h}`)};return a.jsxs("div",{className:"space-y-4 pb-16 md:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Songs"}),a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-sm",title:"Add new song",onClick:c,children:a.jsx(Ue,{})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Li,{className:"text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search songs by title or artist...",value:i,onChange:h=>o(h.target.value)})]}),n&&a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),!n&&a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:l.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(Kt,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"No songs found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:i?"No songs match your search criteria.":"Get started by adding a new song."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:c,children:[a.jsx(Ue,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Song"]})})]}):a.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(h=>a.jsx("li",{className:"px-4 py-4 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>u(h.id),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:h.title}),h.artist&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.artist})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[h.default_key&&a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300",children:["Key: ",h.default_key]}),a.jsx("button",{onClick:m=>u(h.id),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",title:"View song",children:a.jsx(Cc,{})}),a.jsx("button",{onClick:m=>d(h.id,m),className:"text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400",title:"Edit song",children:a.jsx(Fn,{})})]})]})},h.id))})})]})},t2=()=>{const e=Be(),[t,r]=p.useState([]),[n,s]=p.useState(!0),[i,o]=p.useState("");p.useEffect(()=>{(async()=>{try{s(!0);const{data:m,error:y}=await O.from("events").select(`
            id,
            title,
            description,
            start_time,
            end_time,
            location,
            church_id,
            team_id,
            churches (name)
          `).eq("event_type","service").order("start_time",{ascending:!1});if(y)throw y;r(m||[])}catch(m){console.error("Error fetching services:",m)}finally{s(!1)}})()},[]);const l=t.filter(h=>{var m;return h.title.toLowerCase().includes(i.toLowerCase())||h.description&&h.description.toLowerCase().includes(i.toLowerCase())||((m=h.churches)==null?void 0:m.name)&&h.churches.name.toLowerCase().includes(i.toLowerCase())}),c=()=>{e("/services/new")},u=h=>{e(`/services/${h}`)},d=(h,m)=>{m.stopPropagation(),e(`/services/edit/${h}`)};return a.jsxs("div",{className:"space-y-4 pb-16 md:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Services"}),a.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-sm",title:"Add new service",onClick:c,children:a.jsx(Ue,{})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Li,{className:"text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search services by title, description, or church...",value:i,onChange:h=>o(h.target.value)})]}),n&&a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}),!n&&a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.length===0?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx(Pr,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No services found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i?"No services match your search criteria.":"Get started by adding a new service."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:c,children:[a.jsx(Ue,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Service"]})})]}):a.jsx("ul",{className:"divide-y divide-gray-200",children:l.map(h=>{var m;return a.jsx("li",{className:"px-4 py-4 hover:bg-gray-50 cursor-pointer",onClick:()=>u(h.id),children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:h.title}),a.jsx("p",{className:"text-sm text-gray-500",children:ie(h.start_time).format("dddd, MMMM D, YYYY  h:mm A")}),((m=h.churches)==null?void 0:m.name)&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:h.churches.name})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:y=>u(h.id),className:"text-gray-500 hover:text-blue-600",title:"View service",children:a.jsx(Cc,{})}),a.jsx("button",{onClick:y=>d(h.id,y),className:"text-gray-500 hover:text-blue-600",title:"Edit service",children:a.jsx(Fn,{})})]})]})},h.id)})})})]})},_d=({imageUrl:e,onSave:t,onCancel:r,aspectRatio:n=1,initialPosition:s={x:50,y:50}})=>{const[i,o]=p.useState(s),[l,c]=p.useState(!1),[u,d]=p.useState({x:0,y:0}),h=p.useRef(null),m=p.useRef(null),y=g=>{g.preventDefault(),c(!0);const f=g.touches?g.touches[0].clientX:g.clientX,x=g.touches?g.touches[0].clientY:g.clientY;d({x:f,y:x})},v=g=>{if(!l||!h.current||!m.current)return;const f=g.touches?g.touches[0].clientX:g.clientX,x=g.touches?g.touches[0].clientY:g.clientY,w=f-u.x,E=x-u.y,N=h.current.offsetWidth,C=h.current.offsetHeight,T=Math.max(0,Math.min(100,i.x-w/N*100)),R=Math.max(0,Math.min(100,i.y-E/C*100));o({x:T,y:R}),d({x:f,y:x})},b=()=>{c(!1)};p.useEffect(()=>(l&&(document.addEventListener("mousemove",v),document.addEventListener("mouseup",b),document.addEventListener("touchmove",v),document.addEventListener("touchend",b)),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",b)}),[l,i,u]);const k=()=>{t(i)};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden max-w-3xl w-full",children:[a.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Adjust Image Position"}),a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:a.jsx(Mt,{})})]}),a.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[a.jsxs("div",{ref:h,className:"relative w-full overflow-hidden cursor-move",style:{height:n!==1?"240px":"300px",borderRadius:n!==1?"0.5rem":"50%"},onMouseDown:y,onTouchStart:y,children:[e&&a.jsx("img",{ref:m,src:e,alt:"Adjust position",className:"absolute w-full h-full object-cover select-none",style:{objectPosition:`${i.x}% ${i.y}%`,userSelect:"none",touchAction:"none"},draggable:"false"}),a.jsx("div",{className:"absolute inset-0 border-2 border-white border-dashed pointer-events-none"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Horizontal Position: ",Math.round(i.x),"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:i.x,onChange:g=>o({...i,x:parseInt(g.target.value)}),className:"w-full"})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Vertical Position: ",Math.round(i.y),"%"]}),a.jsx("input",{type:"range",min:"0",max:"100",value:i.y,onChange:g=>o({...i,y:parseInt(g.target.value)}),className:"w-full"})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Drag the image to position it, or use the sliders to fine-tune."})]}),a.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),a.jsxs("button",{type:"button",onClick:k,className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 flex items-center",children:[a.jsx(Pc,{className:"mr-2"})," Save Position"]})]})]})})},Nd=()=>{const{userId:e}=Vs(),{user:t,updateProfile:r}=Ae(),n=t==null?void 0:t.id,s=e||n,i=s===n,[o,l]=p.useState(!0),[c,u]=p.useState(!1),[d,h]=p.useState(null),[m,y]=p.useState("profile"),[v,b]=p.useState(!1),[k,g]=p.useState(!1),[f,x]=p.useState([]),[w,E]=p.useState([]),[N,C]=p.useState([]),[T,R]=p.useState(!1),[P,L]=p.useState(!1),[D,z]=p.useState(!1),[S,_]=p.useState(!1),[A,I]=p.useState(!1),[j,M]=p.useState(!1),[$,F]=p.useState({fullName:"",email:"",churchName:"",role:"",avatarUrl:"",coverUrl:"",bio:"",avatarPosition:{x:50,y:50},coverPosition:{x:50,y:50}});p.useEffect(()=>{H(),n&&s&&!i&&te()},[s,n]);const H=async()=>{try{l(!0);const{data:B,error:J}=await O.from("profiles").select("*").eq("id",s).single();if(J)throw J;let Ne="";if(B!=null&&B.church_id){const{data:Me,error:Ye}=await O.from("churches").select("name").eq("id",B.church_id).single();!Ye&&Me&&(Ne=Me.name)}console.log("Profile data from DB:",B);let de=B==null?void 0:B.avatar_position,re=B==null?void 0:B.cover_position;if(typeof de=="string")try{de=JSON.parse(de)}catch(Me){console.error("Error parsing avatar_position:",Me),de=null}if(typeof re=="string")try{re=JSON.parse(re)}catch(Me){console.error("Error parsing cover_position:",Me),re=null}F({fullName:(B==null?void 0:B.full_name)||"",email:(B==null?void 0:B.email)||"",churchName:Ne,role:(B==null?void 0:B.user_role)||"member",avatarUrl:(B==null?void 0:B.avatar_url)||"",coverUrl:(B==null?void 0:B.cover_url)||"",bio:(B==null?void 0:B.bio)||"",avatarPosition:de||{x:50,y:50},coverPosition:re||{x:50,y:50}}),q(s),K(s)}catch(B){console.error("Error fetching profile:",B),h({type:"error",text:"Failed to load profile data"})}finally{l(!1)}},q=async B=>{try{let{data:J,error:Ne}=await O.from("posts_with_authors").select("*").eq("user_id",B).order("created_at",{ascending:!1}).limit(10);if(Ne){console.error("Error fetching from posts_with_authors:",Ne);const{data:de,error:re}=await O.from("posts").select("*").eq("user_id",B).order("created_at",{ascending:!1}).limit(10);if(re)throw re;J=de}if(J&&J.length>0){const de=await Promise.all(J.map(async re=>{let Me={full_name:re.full_name||$.fullName,avatar_url:re.avatar_url||$.avatarUrl},Ye=null;if(re.church_id&&!re.church_name){const{data:vt,error:Xt}=await O.from("churches").select("name").eq("id",re.church_id).single();Xt||(Ye=vt)}else re.church_name&&(Ye={name:re.church_name});const{data:V,error:G}=await O.from("reactions").select("reaction_type").eq("post_id",re.id),he=V?Array.from(V.reduce((vt,{reaction_type:Xt})=>(vt.set(Xt,(vt.get(Xt)||0)+1),vt),new Map)).map(([vt,Xt])=>({reaction_type:vt,count:Xt})):[],{count:se,error:je}=await O.from("comments").select("id",{count:"exact"}).eq("post_id",re.id);let Rc={};if(n){const{data:vt}=await O.from("reactions").select("reaction_type").eq("post_id",re.id).eq("user_id",n);vt==null||vt.forEach(Xt=>{Rc[Xt.reaction_type]=!0})}return{...re,profile:Me,church:Ye,reactions:he||[],commentsCount:se||0,userReactions:Rc,created_at:re.created_at||new Date().toISOString()}}));x(de)}else x([])}catch(J){console.error("Error fetching posts:",J),x([])}},K=async B=>{try{const{data:J,error:Ne}=await O.from("follows").select("follower_id").eq("following_id",B);Ne||C(J||[]);const{data:de,error:re}=await O.from("follows").select("following_id").eq("follower_id",B);re||E(de||[])}catch(J){console.error("Error fetching follow counts:",J)}},te=async()=>{try{const{data:B,error:J}=await O.from("follows").select("id").eq("follower_id",n).eq("following_id",s).maybeSingle();J||R(!!B)}catch(B){console.error("Error checking follow status:",B)}},be=async B=>{B&&B.preventDefault();try{u(!0),h(null);const{error:J}=await O.from("profiles").update({full_name:$.fullName,bio:$.bio}).eq("id",n);if(J)throw J;r&&await r({fullName:$.fullName}),L(!1),h({type:"success",text:"Profile updated successfully"})}catch(J){console.error("Error updating profile:",J),h({type:"error",text:J.message||"Failed to update profile"})}finally{u(!1)}},ke=async B=>{try{b(!0);const J=B.target.files[0];if(!J)return;const Ne=J.name.split(".").pop(),de=`${n}/${Math.random().toString(36).substring(2)}.${Ne}`,{error:re}=await O.storage.from("avatars").upload(de,J);if(re)throw re;const{data:Me}=O.storage.from("avatars").getPublicUrl(de),{error:Ye}=await O.from("profiles").update({avatar_url:Me.publicUrl}).eq("id",n);if(Ye)throw Ye;F(V=>({...V,avatarUrl:Me.publicUrl})),h({type:"success",text:"Profile picture updated successfully"})}catch(J){console.error("Error uploading avatar:",J),h({type:"error",text:"Failed to upload avatar"})}finally{b(!1)}},pt=async B=>{try{g(!0);const J=B.target.files[0];if(!J)return;const Ne=J.name.split(".").pop(),de=`covers/${n}/${Math.random().toString(36).substring(2)}.${Ne}`,{error:re}=await O.storage.from("avatars").upload(de,J);if(re)throw re;const{data:Me}=O.storage.from("avatars").getPublicUrl(de),{error:Ye}=await O.from("profiles").update({cover_url:Me.publicUrl}).eq("id",n);if(Ye)throw Ye;F(V=>({...V,coverUrl:Me.publicUrl})),h({type:"success",text:"Cover image updated successfully"})}catch(J){console.error("Error uploading cover:",J),h({type:"error",text:"Failed to upload cover image"})}finally{g(!1)}},yt=async B=>{try{h(null);try{console.log("Saving avatar position:",B);const J={x:Math.round(B.x),y:Math.round(B.y)},{error:Ne}=await O.from("profiles").update({avatar_position:J}).eq("id",n);if(Ne)throw Ne;F(de=>({...de,avatarPosition:B})),h({type:"success",text:"Profile picture position updated"}),H()}catch(J){console.error("Position column may not exist yet:",J),h({type:"error",text:"Position update feature requires running the migrations. Check NEXT_STEPS.md."})}}catch(J){console.error("Error updating avatar position:",J),h({type:"error",text:"Failed to update profile picture position"})}finally{z(!1)}},Ee=async B=>{try{h(null);try{console.log("Saving cover position:",B);const J={x:Math.round(B.x),y:Math.round(B.y)},{error:Ne}=await O.from("profiles").update({cover_position:J}).eq("id",n);if(Ne)throw Ne;F(de=>({...de,coverPosition:B})),h({type:"success",text:"Cover image position updated"}),H()}catch(J){console.error("Position column may not exist yet:",J),h({type:"error",text:"Position update feature requires running the migrations. Check NEXT_STEPS.md."})}}catch(J){console.error("Error updating cover position:",J),h({type:"error",text:"Failed to update cover image position"})}finally{_(!1)}},ct=async()=>{try{if(T){const{error:B}=await O.from("follows").delete().eq("follower_id",n).eq("following_id",s);if(B)throw B;R(!1)}else{const{error:B}=await O.from("follows").insert({follower_id:n,following_id:s});if(B)throw B;R(!0)}K(s)}catch(B){console.error("Error toggling follow:",B),h({type:"error",text:"Failed to update follow status"})}};if(o)return a.jsxs("div",{className:"space-y-6 dark:bg-gray-900",children:[a.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]});const xt={posts:f.length,followers:N.length,following:w.length};return a.jsxs("div",{className:"space-y-6 pb-16 md:pb-0 dark:bg-gray-900 dark:text-white",children:[A&&$.avatarUrl&&a.jsx(wl,{imageUrl:$.avatarUrl,onClose:()=>I(!1)}),j&&$.coverUrl&&a.jsx(wl,{imageUrl:$.coverUrl,onClose:()=>M(!1)}),a.jsxs("div",{className:"relative h-48 bg-gray-200 dark:bg-gray-800 rounded-lg overflow-hidden",children:[$.coverUrl?a.jsx("img",{src:$.coverUrl,alt:"Cover",className:"w-full h-full object-cover cursor-pointer",style:{objectPosition:$.coverPosition?`${$.coverPosition.x}% ${$.coverPosition.y}%`:"50% 50%"},onClick:()=>M(!0)}):a.jsx("div",{className:"h-full w-full bg-gradient-to-r from-blue-500 to-purple-600"}),i&&P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute bottom-2 right-2 flex space-x-2",children:[$.coverUrl&&a.jsx("button",{className:"bg-white dark:bg-gray-800 bg-opacity-70 p-2 rounded-full hover:bg-opacity-100 transition-all",onClick:()=>_(!0),disabled:k,title:"Adjust cover photo position",children:a.jsx(pd,{className:"text-gray-700 dark:text-gray-300"})}),a.jsx("button",{className:"bg-white dark:bg-gray-800 bg-opacity-70 p-2 rounded-full hover:bg-opacity-100 transition-all shadow-lg",onClick:()=>document.getElementById("cover-upload").click(),disabled:k,title:"Upload new cover photo",children:a.jsx(gd,{className:"text-gray-700 dark:text-gray-300"})})]}),a.jsx("input",{type:"file",id:"cover-upload",onChange:pt,className:"hidden",accept:"image/*"})]})]}),a.jsxs("div",{className:"relative flex flex-col md:flex-row gap-4 -mt-16 px-4",children:[a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"w-32 h-32 rounded-full bg-white dark:bg-gray-700 p-1 shadow-lg",children:[$.avatarUrl?a.jsx("img",{src:$.avatarUrl,alt:$.fullName,className:"w-full h-full rounded-full object-cover cursor-pointer",style:{objectPosition:$.avatarPosition?`${$.avatarPosition.x}% ${$.avatarPosition.y}%`:"50% 50%"},onClick:()=>I(!0)}):a.jsx("div",{className:"w-full h-full rounded-full bg-gray-200 dark:bg-gray-600 flex items-center justify-center",children:a.jsx(Gt,{className:"text-gray-400 dark:text-gray-300 text-4xl"})}),i&&P&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute -bottom-2 -right-2 flex space-x-1",children:[$.avatarUrl&&a.jsx("button",{className:"bg-white dark:bg-gray-700 p-2 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-all z-10",onClick:()=>z(!0),disabled:v,title:"Adjust profile picture position",children:a.jsx(pd,{className:"text-gray-700 dark:text-gray-300 text-sm"})}),a.jsx("button",{className:"bg-white dark:bg-gray-700 p-2 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-all z-10",onClick:()=>document.getElementById("avatar-upload").click(),disabled:v,title:"Upload new profile picture",children:a.jsx(gd,{className:"text-gray-700 dark:text-gray-300 text-sm"})})]}),a.jsx("input",{type:"file",id:"avatar-upload",onChange:ke,className:"hidden",accept:"image/*"})]})]})}),a.jsxs("div",{className:"flex-1 pt-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:$.fullName}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center",children:[$.churchName?a.jsxs(a.Fragment,{children:[a.jsx(Tr,{className:"mr-1 text-gray-500 dark:text-gray-400"}),$.churchName," "]}):"",$.role==="member"?"Member":$.role==="admin"?"Administrator":$.role==="worship_leader"?"Worship Leader":$.role]}),$.bio?a.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line mt-2",children:$.bio}):i&&a.jsx("p",{className:"text-gray-500 dark:text-gray-400 italic mt-2",children:"Add a bio to tell people about yourself"})]}),a.jsx("div",{className:"mt-2 md:mt-0",children:i?a.jsxs("button",{className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 rounded-md flex items-center",onClick:()=>L(!P),children:[a.jsx(Fn,{className:"mr-1"})," ",P?"Cancel":"Edit"]}):a.jsx("button",{className:`px-4 py-2 ${T?"bg-gray-600 hover:bg-gray-700":"bg-blue-600 hover:bg-blue-700"} text-white rounded-md flex items-center`,onClick:ct,children:T?a.jsxs(a.Fragment,{children:[a.jsx(Ev,{className:"mr-2"})," Unfollow"]}):a.jsxs(a.Fragment,{children:[a.jsx($c,{className:"mr-2"})," Follow"]})})})]}),a.jsxs("div",{className:"flex mt-4 gap-4 text-center",children:[a.jsxs("div",{className:"flex-1 p-2 bg-white dark:bg-gray-800 rounded-md shadow-sm",children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:xt.posts}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Posts"})]}),a.jsxs("div",{className:"flex-1 p-2 bg-white dark:bg-gray-800 rounded-md shadow-sm",children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:xt.followers}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Followers"})]}),a.jsxs("div",{className:"flex-1 p-2 bg-white dark:bg-gray-800 rounded-md shadow-sm",children:[a.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:xt.following}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Following"})]})]})]})]}),D&&$.avatarUrl&&a.jsx(_d,{imageUrl:$.avatarUrl,onSave:yt,onCancel:()=>z(!1),aspectRatio:1,initialPosition:$.avatarPosition||{x:50,y:50}}),S&&$.coverUrl&&a.jsx(_d,{imageUrl:$.coverUrl,onSave:Ee,onCancel:()=>_(!1),aspectRatio:3,initialPosition:$.coverPosition||{x:50,y:50}}),d&&a.jsx("div",{className:`mb-4 p-3 rounded-md text-sm ${d.type==="success"?"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300"}`,children:d.text}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsx("button",{className:`pb-4 px-1 ${m==="profile"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>y("profile"),children:"Profile"}),a.jsx("button",{className:`pb-4 px-1 ${m==="posts"?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>y("posts"),children:"Posts"})]})}),m==="profile"&&a.jsx("div",{className:"space-y-6",children:i&&P?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Edit Profile"}),a.jsxs("form",{onSubmit:be,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),a.jsx("input",{type:"text",id:"fullName",value:$.fullName,onChange:B=>F({...$,fullName:B.target.value}),className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Bio"}),a.jsx("textarea",{id:"bio",value:$.bio||"",onChange:B=>F({...$,bio:B.target.value}),rows:"4",className:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Tell others about yourself..."})]}),a.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>L(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:c,children:c?"Updating...":"Save Changes"})]})]})]}):a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"About"}),a.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[$.fullName," is a ",$.role," at ",$.churchName||"a church","."]})]})}),m==="posts"&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Posts"}),i&&a.jsx(ve,{to:"/dashboard",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Go to Dashboard"})]}),f.length===0?a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center",children:a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No posts yet."})}):a.jsx("div",{className:"space-y-4",children:f.map(B=>a.jsx(Hf,{post:B,currentUserId:n},B.id))})]})]})},r2=({tags:e=[],onTagsChange:t,options:r=[],allowCustom:n=!1,placeholder:s="Add a tag...",label:i="Tags",name:o="tags"})=>{const[l,c]=p.useState(""),[u,d]=p.useState(!1),h=r.filter(b=>!e.includes(b)).filter(b=>b.toLowerCase().includes(l.toLowerCase())),m=b=>{b&&(e.includes(b)||t([...e,b]),c(""),d(!1))},y=b=>{t(e.filter(k=>k!==b))},v=b=>{b.key==="Enter"&&l&&(b.preventDefault(),n||r.includes(l)?m(l):h.length>0&&m(h[0])),b.key==="Escape"&&d(!1)};return a.jsxs("div",{className:"space-y-2",children:[i&&a.jsx("label",{htmlFor:o,className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:i}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.map(b=>a.jsxs("div",{className:"flex items-center bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 px-2 py-1 rounded-md text-sm",children:[a.jsx("span",{children:b}),a.jsx("button",{type:"button",onClick:()=>y(b),className:"ml-1 p-1 rounded-full hover:bg-blue-200 dark:hover:bg-blue-800","aria-label":`Remove ${b}`,children:a.jsx(Mt,{size:10})})]},b))}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",id:o,name:o,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:s,value:l,onChange:b=>{c(b.target.value),d(!0)},onFocus:()=>d(!0),onBlur:()=>{setTimeout(()=>d(!1),200)},onKeyDown:v}),u&&l&&h.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 max-h-60 overflow-auto",children:h.map(b=>a.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center",onMouseDown:()=>m(b),children:[a.jsx(Ue,{className:"text-blue-500 mr-2",size:12}),a.jsx("span",{children:b})]},b))}),u&&l&&h.length===0&&n&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 shadow-lg rounded-md border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer flex items-center",onMouseDown:()=>m(l),children:[a.jsx(Ue,{className:"text-blue-500 mr-2",size:12}),a.jsxs("span",{children:['Add "',l,'"']})]})})]})]})},n2=({isOpen:e,onClose:t,onAdd:r,categoryOptions:n,currentMainScope:s})=>{const[i,o]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(!1),[h,m]=p.useState(!1),[y,v]=p.useState(s==="global"),[b,k]=p.useState([]),[g,f]=p.useState(!1);p.useEffect(()=>{e&&v(s==="global")},[e,s]);const x=async w=>{if(w.preventDefault(),!i.trim()){alert("Please enter a title for your prayer request");return}f(!0);try{await r({title:i,description:l,isAnonymous:u,isPrivate:h,categories:b,isGlobal:y}),o(""),c(""),d(!1),m(!1),k([]),t()}catch(E){console.error("Error adding prayer request:",E),alert("Failed to add prayer request")}finally{f(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] flex flex-col overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex-shrink-0",children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"New Prayer Request"})}),a.jsxs("form",{onSubmit:x,className:"flex flex-col flex-1 overflow-hidden",children:[a.jsxs("div",{className:"p-4 space-y-4 overflow-y-auto flex-1",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title"}),a.jsx("input",{type:"text",id:"title",value:i,onChange:w=>o(w.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"What would you like prayer for?",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Details"}),a.jsx("textarea",{id:"description",value:l,onChange:w=>c(w.target.value),rows:"4",className:"mt-1 block w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Share more details about your prayer request..."})]}),a.jsx("div",{children:a.jsx(r2,{name:"categories",label:"Categories",tags:b,onTagsChange:k,options:n,allowCustom:!0,placeholder:"Add categories..."})}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-md p-3 space-y-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Share With:"}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("input",{id:"shareChurch",type:"radio",checked:!y,onChange:()=>v(!1),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"shareChurch",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[a.jsx(Tr,{className:"mr-1"})," My Church Only"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"Only members of your church will see this prayer request"})]})]}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx("input",{id:"shareGlobal",type:"radio",checked:y,onChange:()=>v(!0),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600"}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"shareGlobal",className:"text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[a.jsx(If,{className:"mr-1"})," Share Globally"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:"All Church Connect users can see and pray for this request"})]})]})]}),a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"isAnonymous",type:"checkbox",checked:u,onChange:w=>d(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),a.jsx("label",{htmlFor:"isAnonymous",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Post anonymously"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"isPrivate",type:"checkbox",checked:h,onChange:w=>m(w.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),a.jsx("label",{htmlFor:"isPrivate",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Private (only visible to church staff)"})]})]})]}),a.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 flex-shrink-0 bg-gray-50 dark:bg-gray-800",children:a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:g,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[g?a.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-t-2 border-white rounded-full"}):a.jsx(Ue,{className:"mr-2"}),"Add Prayer Request"]})]})})]})]})}):null},s2=({categories:e,activeCategories:t,onChange:r})=>{const[n,s]=p.useState(!1),i=o=>{t.includes(o)?r(t.filter(l=>l!==o)):r([...t,o])};return a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Uf,{className:"mr-1"}),"Categories"]}),n&&a.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg z-10 border border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"py-1",children:e.length===0?a.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 dark:text-gray-400",children:"No categories found"}):e.map(o=>a.jsxs("div",{className:"px-4 py-2 flex items-center",children:[a.jsx("input",{type:"checkbox",id:`category-${o}`,checked:t.includes(o),onChange:()=>i(o),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded"}),a.jsx("label",{htmlFor:`category-${o}`,className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:o})]},o))})})]})};ie.extend(Lc);const a2=({prayer:e,onPray:t,currentUserId:r})=>(e.user_id,a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"w-full",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.title}),a.jsx("div",{className:"flex justify-between items-center mt-1",children:a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.is_anonymous?"Anonymous":e.author_name||"User","  ",ie(e.created_at).fromNow()]})}),(!e.is_anonymous&&e.church_name||e.is_global)&&a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.is_global?"Global Prayer Request":`From: ${e.church_name}`})]})}),a.jsx("div",{className:"mt-3",children:a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e.description})}),e.categories&&e.categories.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-1",children:e.categories.map(n=>a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300",children:n},n))}),a.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[a.jsxs("button",{onClick:()=>t(e.id),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Et,{className:"mr-1"}),"I Prayed"]}),a.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400 text-sm",children:[a.jsx(Et,{className:"text-blue-500 dark:text-blue-400 mr-1"}),a.jsxs("span",{children:[e.prayer_count||0," ",e.prayer_count===1?"prayer":"prayers"]})]})]})]})})),i2=({prayers:e,loading:t,mainScope:r,subScope:n,activeCategories:s,currentUserId:i,onPray:o,onAddClick:l})=>t?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 text-center",children:[a.jsx(Et,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No prayer requests found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:r==="mine"?"You haven't created any prayer requests yet.":n==="others"?"No prayer requests from others found.":s.length>0?"No prayer requests matching selected categories.":r==="church"?"No prayer requests in your church community.":"No global prayer requests found."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{type:"button",onClick:l,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ue,{className:"-ml-1 mr-2 h-5 w-5"}),"Add Prayer Request"]})})]}):a.jsx("div",{className:"space-y-4",children:e.map(c=>a.jsx(a2,{prayer:c,onPray:o,currentUserId:i},c.id))}),o2=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[s,i]=p.useState("global"),[o,l]=p.useState("all"),[c,u]=p.useState(!1),[d,h]=p.useState([]),[m,y]=p.useState([]),[v,b]=p.useState({}),{user:k}=Ae(),g=["Health","Family","Financial","Spiritual","Guidance","Healing","Relationships","Work","Education","Emotional"];p.useEffect(()=>{f()},[s,o]);const f=async()=>{try{n(!0);const{data:N}=await O.from("profiles").select("church_id").eq("id",k==null?void 0:k.id).single();let C;s==="mine"?C=O.from("prayer_requests").select("*, churches:church_id(name)").eq("user_id",k==null?void 0:k.id).order("created_at",{ascending:!1}):s==="church"&&(N!=null&&N.church_id)?(C=O.from("prayer_requests").select("*, churches:church_id(name)").eq("church_id",N.church_id).eq("is_private",!1),o==="others"&&(C=C.neq("user_id",k==null?void 0:k.id)),C=C.order("created_at",{ascending:!1})):(C=O.from("prayer_requests").select("*, churches:church_id(name)").eq("is_global",!0).eq("is_private",!1),o==="others"&&(C=C.neq("user_id",k==null?void 0:k.id)),C=C.order("created_at",{ascending:!1}));const{data:T,error:R}=await C;if(R)throw R;const P=T.map(_=>{var A;return{..._,church_name:(A=_.churches)==null?void 0:A.name}}),L=new Set;P.forEach(_=>{_.categories&&Array.isArray(_.categories)&&_.categories.forEach(A=>L.add(A))});const D=[...new Set(P.filter(_=>!_.is_anonymous).map(_=>_.user_id))];let z={...v};if(D.length>0){const{data:_,error:A}=await O.from("profiles").select("id, full_name, avatar_url").in("id",D);!A&&_&&(_.forEach(I=>{z[I.id]=I}),b(z))}const S=P.map(_=>{const A=!_.is_anonymous&&z[_.user_id]?z[_.user_id].full_name:null;return{..._,author_name:A}});t(S||[]),h([...new Set([...g,...L])])}catch(N){console.error("Error fetching prayer requests:",N)}finally{n(!1)}},x=async N=>{try{const{data:C}=await O.from("profiles").select("church_id, full_name").eq("id",k==null?void 0:k.id).single(),{data:T,error:R}=await O.from("prayer_requests").insert({title:N.title,description:N.description,is_anonymous:N.isAnonymous,is_private:N.isPrivate,categories:N.categories,church_id:N.isGlobal?null:C==null?void 0:C.church_id,is_global:N.isGlobal,user_id:k==null?void 0:k.id,prayer_count:0}).select().single();if(R)throw R;if(!N.isPrivate){const{error:P}=await O.from("posts").insert({content:`${N.title}

${N.description}`,user_id:k==null?void 0:k.id,is_anonymous:N.isAnonymous,post_type:"prayer",church_id:N.isGlobal?null:C==null?void 0:C.church_id,is_global:N.isGlobal,categories:N.categories});P&&console.error("Error creating feed post for prayer request:",P)}f()}catch(C){throw console.error("Error adding prayer request:",C),C}},w=async N=>{try{const{data:C,error:T}=await O.from("prayer_requests").select("prayer_count").eq("id",N).single();if(T)throw T;const{error:R}=await O.from("prayer_requests").update({prayer_count:(C.prayer_count||0)+1}).eq("id",N);if(R)throw R;t(P=>P.map(L=>L.id===N?{...L,prayer_count:(L.prayer_count||0)+1}:L))}catch(C){console.error("Error recording prayer:",C),alert("Failed to record your prayer")}},E=e.filter(N=>m.length===0?!0:N.categories&&Array.isArray(N.categories)?N.categories.some(C=>m.includes(C)):!1);return a.jsxs("div",{className:"space-y-4 pb-16 md:pb-0",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Prayer Requests"}),a.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full shadow-sm",title:"Add new prayer request",children:a.jsx(Ue,{})})]}),a.jsxs("div",{className:"flex items-start rounded-md bg-blue-50 dark:bg-blue-900/20 p-3 mb-3",children:[a.jsx(bv,{className:"text-blue-500 mt-0.5 mr-2 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:a.jsxs("p",{children:["You can create prayer requests that are ",a.jsx("strong",{children:"shared globally"})," with all Church Connect users or ",a.jsx("strong",{children:"only with members of your church"}),"."]})})]}),a.jsx("div",{className:"flex justify-between items-center mb-2",children:a.jsxs("nav",{className:"flex w-full border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>{i("global"),l("all")},className:`flex-1 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center justify-center ${s==="global"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[a.jsx(If,{className:"mr-2"})," Global"]}),a.jsxs("button",{onClick:()=>{i("church"),l("all")},className:`flex-1 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center justify-center ${s==="church"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[a.jsx(Tr,{className:"mr-2"})," My Church"]}),a.jsxs("button",{onClick:()=>{i("mine"),l("all")},className:`flex-1 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm flex items-center justify-center ${s==="mine"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[a.jsx(Et,{className:"mr-2"})," My Requests"]})]})}),s!=="mine"&&a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsxs("nav",{className:"flex w-full",children:[a.jsx("button",{onClick:()=>l("all"),className:`flex-1 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${o==="all"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"All Requests"}),a.jsx("button",{onClick:()=>l("others"),className:`flex-1 whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${o==="others"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"}`,children:"Others' Requests"})]})}),d.length>0&&a.jsx("div",{className:"mb-4 flex justify-end",children:a.jsx(s2,{categories:d,activeCategories:m,onChange:y})}),a.jsx(i2,{prayers:E,loading:r,mainScope:s,subScope:o,activeCategories:m,currentUserId:k==null?void 0:k.id,onPray:w,onAddClick:()=>u(!0)}),a.jsx(n2,{isOpen:c,onClose:()=>u(!1),onAdd:x,categoryOptions:[...d],currentMainScope:s})]})},l2=()=>{const{user:e,loading:t,isAuthenticated:r}=Ae(),n=Be(),[s,i]=p.useState(null),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,h]=p.useState([]),[m,y]=p.useState(!1),[v,b]=p.useState(!1),[k,g]=p.useState(!1),[f,x]=p.useState(!1),[w,E]=p.useState(null),[N,C]=p.useState(!1),[T,R]=p.useState({name:"",location:"",description:""}),[P,L]=p.useState(!1);p.useEffect(()=>{!t&&!r&&(console.log("Churches page: User not authenticated, redirecting to login"),n("/login"))},[r,t,n]),p.useEffect(()=>{r&&e&&(async()=>{if(!(!e||o)){console.log("Churches page: Checking if user has a church");try{const j=localStorage.getItem("userChurchId");if(j){console.log("Churches page: Found church ID in localStorage:",j);const{data:F}=await O.from("churches").select("*").eq("id",j).single();if(F){console.log("Churches page: Confirmed church in database:",F.name),i(F),l(!0);return}else console.log("Churches page: Church not found in database, removing from localStorage"),localStorage.removeItem("userChurchId")}console.log("Churches page: Checking profile for church_id");const{data:M,error:$}=await O.from("profiles").select("church_id").eq("id",e.id).single();if(!$&&(M!=null&&M.church_id)){console.log("Churches page: Found church_id in profile:",M.church_id),localStorage.setItem("userChurchId",M.church_id);const{data:F}=await O.from("churches").select("*").eq("id",M.church_id).single();F&&i(F)}l(!0)}catch(j){console.error("Error checking user church:",j),l(!0)}}})()},[e,n,r,o]);const D=async()=>{if(!(!e||!s||!window.confirm(`Are you sure you want to leave ${s.name}?`))){x(!0),E(null);try{const{error:j}=await O.from("profiles").update({church_id:null}).eq("id",e.id);if(j)throw j;localStorage.removeItem("userChurchId"),alert(`You've successfully left ${s.name}.`),i(null)}catch(j){console.error("Error leaving church:",j),E("Failed to leave church. Please try again.")}finally{x(!1)}}},z=async I=>{if(I.preventDefault(),!!c.trim()){y(!0),E(null);try{let j=O.from("churches").select("*");c&&(j=j.ilike("name",`%${c}%`));const{data:M,error:$}=await j;if($)throw $;h(M||[]),b(!0)}catch(j){console.error("Error searching churches:",j),E("Failed to search churches. Please try again.")}finally{y(!1)}}},S=async I=>{if(!e){E("You need to be logged in to join a church.");return}g(!0),E(null);try{const{data:j,error:M}=await O.from("churches").select("name").eq("id",I).single();if(M)throw M;if(s&&!window.confirm(`You're currently a member of ${s.name}. Do you want to switch to ${j.name}?`)){g(!1);return}const{error:$}=await O.from("profiles").update({church_id:I}).eq("id",e.id);if($)throw $;localStorage.setItem("userChurchId",I),E(null),alert(`You've successfully joined ${j.name}!`),n("/dashboard")}catch(j){console.error("Error joining church:",j),E("Failed to join church. Please try again."),g(!1)}},_=I=>{const{name:j,value:M}=I.target;R({...T,[j]:M})},A=async I=>{if(I.preventDefault(),!e){E("You need to be logged in to create a church.");return}if(!T.name){E("Church name is required");return}if(!(s&&!window.confirm(`You're currently a member of ${s.name}. Do you want to create and join a new church?`))){L(!0),E(null);try{const j="admin",{data:M,error:$}=await O.from("churches").insert([{name:T.name,location:T.location,description:T.description,created_by:e.id}]).select().single();if($)throw $;const{error:F}=await O.from("profiles").update({church_id:M.id,user_role:j}).eq("id",e.id);if(F)throw F;localStorage.setItem("userChurchId",M.id),E(null),alert(`You've successfully created ${M.name}!`),n("/dashboard")}catch(j){console.error("Error creating church:",j),E("Failed to create church. Please try again.")}finally{L(!1)}}};return t||!r?a.jsx("div",{className:"flex justify-center items-center h-screen dark:bg-gray-900",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):!o&&e?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen dark:bg-gray-900",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Checking church membership..."})]}):a.jsxs("div",{className:"max-w-4xl mx-auto p-4 dark:text-white",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold dark:text-white",children:"Find or Create a Church"}),a.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-white",children:[a.jsx(ms,{className:"mr-1"}),"Back to Dashboard"]})]}),w&&a.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4 dark:bg-red-900 dark:border-red-700 dark:text-red-200",children:w}),s&&a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-blue-700 dark:text-blue-300",children:"Your Current Church"}),a.jsx("p",{className:"text-blue-600 dark:text-blue-200 font-medium",children:s.name}),s.location&&a.jsx("p",{className:"text-blue-600 dark:text-blue-200 text-sm",children:s.location})]}),a.jsxs("button",{onClick:D,disabled:f,className:"flex items-center px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",children:[f?a.jsx(gs,{className:"animate-spin mr-2"}):a.jsx(Ff,{className:"mr-2"}),"Leave Church"]})]}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-200 mt-2",children:"You can browse other churches below if you'd like to switch churches."})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden mb-6 dark:bg-gray-800 dark:border-gray-700",children:[a.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold dark:text-white",children:"Search for your church"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1 dark:text-gray-300",children:"Enter the name of your church to find and join it"})]}),a.jsxs("div",{className:"p-4",children:[a.jsxs("form",{onSubmit:z,className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Li,{className:"text-gray-400 dark:text-gray-500"})}),a.jsx("input",{type:"text",placeholder:"Search by church name",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:placeholder-gray-400",value:c,onChange:I=>u(I.target.value)})]}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-center",disabled:m,children:m?a.jsx(gs,{className:"animate-spin"}):"Search"})]}),v&&a.jsx("div",{className:"mt-4",children:d.length===0?a.jsxs("div",{className:"text-center py-6",children:[a.jsx(Tr,{className:"text-gray-400 dark:text-gray-500 text-4xl mx-auto mb-2"}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:['No churches found matching "',c,'"']}),a.jsxs("button",{className:"mt-4 text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center mx-auto dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>C(!0),children:[a.jsx(Ue,{className:"mr-1"}),"Create your church"]})]}):a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-700 mb-2 dark:text-gray-300",children:[d.length," ",d.length===1?"church":"churches"," found"]}),a.jsx("div",{className:"space-y-3",children:d.map(I=>a.jsxs("div",{className:"border rounded-md p-3 hover:bg-gray-50 dark:border-gray-700 dark:hover:bg-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:I.name}),I.location&&a.jsx("div",{className:"text-gray-600 text-sm dark:text-gray-400",children:I.location})]}),a.jsx("button",{className:`px-3 py-1 text-white text-sm rounded focus:outline-none focus:ring-2 disabled:opacity-50 ${s&&s.id===I.id?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}`,onClick:()=>S(I.id),disabled:k||s&&s.id===I.id,children:k?"Joining...":s&&s.id===I.id?"Current Church":"Join"})]}),I.description&&a.jsx("div",{className:"mt-1 text-sm text-gray-500 line-clamp-2 dark:text-gray-400",children:I.description})]},I.id))}),a.jsxs("div",{className:"mt-4 text-center",children:[a.jsx("p",{className:"text-gray-600 text-sm dark:text-gray-300",children:"Don't see your church?"}),a.jsxs("button",{className:"mt-1 text-blue-600 hover:text-blue-800 font-medium flex items-center justify-center mx-auto dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>C(!0),children:[a.jsx(Ue,{className:"mr-1"}),"Create your church"]})]})]})})]})]}),N&&a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden dark:bg-gray-800 dark:border-gray-700",children:[a.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold dark:text-white",children:"Create a new church"}),a.jsx("p",{className:"text-gray-600 text-sm mt-1 dark:text-gray-300",children:"Fill out the form below to create your church"})]}),a.jsx("div",{className:"p-4",children:a.jsx("form",{onSubmit:A,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Church Name ",a.jsx("span",{className:"text-red-500 dark:text-red-400",children:"*"})]}),a.jsx("input",{type:"text",id:"name",name:"name",className:"mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",value:T.name,onChange:_,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Location"}),a.jsx("input",{type:"text",id:"location",name:"location",className:"mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:placeholder-gray-400",value:T.location,onChange:_,placeholder:"City, State or full address"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),a.jsx("textarea",{id:"description",name:"description",rows:"3",className:"mt-1 block w-full border rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 dark:placeholder-gray-400",value:T.description,onChange:_,placeholder:"Brief description of your church"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700",onClick:()=>C(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",disabled:P,children:P?a.jsxs(a.Fragment,{children:[a.jsx(gs,{className:"animate-spin mr-2"}),"Creating..."]}):"Create Church"})]})]})})})]})]})};ie.extend(Lc);const c2=()=>{const{user:e}=Ae(),[t,r]=p.useState([]),[n,s]=p.useState(!0),[i,o]=p.useState(null);p.useEffect(()=>{if(!e)return;(async()=>{try{s(!0);const{data:h,error:m}=await O.from("notifications").select(`
            *,
            profiles:actor_id(full_name, avatar_url)
          `).eq("recipient_id",e.id).order("created_at",{ascending:!1}).limit(20);if(m)throw m;const y=h.filter(v=>!v.read).map(v=>v.id);y.length>0&&await O.from("notifications").update({read:!0}).in("id",y),r(h||[])}catch(h){console.error("Error fetching notifications:",h),o("Failed to load notifications. Please try again later.")}finally{s(!1)}})();const d=O.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`recipient_id=eq.${e.id}`},h=>{r(m=>[h.new,...m])}).subscribe();return()=>{d.unsubscribe()}},[e]);const l=u=>{switch(u){case"like":return a.jsx(bl,{className:"text-red-500"});case"comment":return a.jsx(fv,{className:"text-blue-500"});case"prayer":return a.jsx(Et,{className:"text-purple-500"});case"follow":return a.jsx($c,{className:"text-green-500"});default:return a.jsx(ti,{className:"text-gray-500"})}},c=u=>{var h;const d=((h=u.profiles)==null?void 0:h.full_name)||"Someone";switch(u.type){case"like":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:d})," liked your post"]});case"comment":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:d})," commented on your post"]});case"prayer":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:d})," prayed for your post"]});case"follow":return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:d})," started following you"]});default:return a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"font-medium",children:d})," interacted with your content"]})}};return n?a.jsxs("div",{className:"p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("div",{className:"space-y-4",children:[...Array(5)].map((u,d)=>a.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow animate-pulse",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700"}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})},d))})]}):i?a.jsxs("div",{className:"p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("div",{className:"bg-red-50 dark:bg-red-900/30 p-4 rounded-lg border border-red-200 dark:border-red-900",children:a.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})})]}):a.jsxs("div",{className:"p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white",children:"Notifications"}),t.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow text-center",children:[a.jsx(ti,{className:"mx-auto text-4xl text-gray-400 dark:text-gray-500 mb-3"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"You don't have any notifications yet."})]}):a.jsx("div",{className:"space-y-3",children:t.map(u=>{var d,h;return a.jsxs("div",{className:`bg-white dark:bg-gray-800 p-4 rounded-lg shadow flex items-start ${u.read?"":"border-l-4 border-blue-500"}`,children:[a.jsx("div",{className:"flex-shrink-0 mr-3",children:a.jsx(Ri,{userId:u.actor_id,fullName:(d=u.profiles)==null?void 0:d.full_name,avatarUrl:(h=u.profiles)==null?void 0:h.avatar_url,size:"md"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:c(u)}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:ie(u.created_at).fromNow()}),a.jsx("span",{className:"mx-2 text-gray-400",children:""}),a.jsxs("span",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[l(u.type),a.jsx("span",{className:"ml-1 capitalize",children:u.type})]})]})]})]},u.id)})})]})},On=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ri={Db:"C#",Eb:"D#",Gb:"F#",Ab:"G#",Bb:"A#","C#":"C#","D#":"D#","F#":"F#","G#":"G#","A#":"A#"},u2=(e,t)=>{if(!e||t===0)return e;const r=/^([A-G][#b]?)(.*)$/,n=e.match(r);if(!n)return e;const[s,i,o]=n;let l=i;ri[i]&&(l=ri[i]);const c=On.indexOf(l);if(c===-1)return e;const u=(c+t)%12,d=u<0?u+12:u;return On[d]+o},d2=(e,t)=>{const r=e.replace("m",""),n=t.replace("m",""),s=ri[r]||r,i=ri[n]||n,o=On.indexOf(s),l=On.indexOf(i);return o===-1||l===-1?0:(l-o+12)%12},h2=(e,t,r)=>{const n=d2(t,r);return u2(e,n)},Sd=(e,t,r)=>{if(!e||!t||!r||t===r)return e;const n=/\b([A-G][#b]?(?:m|maj|min|aug|dim|sus|add|maj7|m7|7|9|11|13|6|5)?(?:\/[A-G][#b]?)?)\b/g;return e.replace(n,s=>h2(s,t,r))},Wf=()=>{const e=On.map(r=>r),t=On.map(r=>`${r}m`);return[...e,...t]},Yf=async e=>{try{const{data:t,error:r}=await O.from("songs").select("*").eq("id",e).single();if(r)throw r;if(!t)throw new Error("Song not found");t.tags=[];try{const{error:n}=await O.from("song_tag_assignments").select("id").limit(1);if(!n){const{data:s}=await O.from("song_tag_assignments").select("tag_id").eq("song_id",e);if(s&&s.length>0){const i=s.map(l=>l.tag_id),{data:o}=await O.from("song_tags").select("id, name, color").in("id",i);o&&o.length>0&&(t.tags=o)}}}catch(n){console.warn("Could not fetch song tags:",n)}return t}catch(t){throw console.error("Error in fetchSongById:",t),t}},f2=async e=>{var c;const{data:t}=await O.auth.getUser();if(!((c=t==null?void 0:t.user)!=null&&c.id))throw new Error("User not authenticated");const{data:r,error:n}=await O.from("profiles").select("church_id").eq("id",t.user.id).single();if(n)throw n;if(!r.church_id)throw new Error("User not associated with a church");const s={...e,church_id:r.church_id,created_by:t.user.id},i=s.tags||[];delete s.tags;const{data:o,error:l}=await O.from("songs").insert(s).select().single();if(l)throw l;if(i.length>0&&o)try{await Kf(o.id,i)}catch(u){console.warn("Could not assign tags to song:",u)}return o},m2=async(e,t)=>{try{const r=t.tags||[],n={...t};delete n.tags,console.log("Updating song with data:",n);const{data:s,error:i}=await O.from("songs").update(n).eq("id",e).select().single();if(i)throw console.error("Error from supabase client update:",i),i;if(!s)throw new Error("No data returned from update operation");if(console.log("Song updated successfully:",s),r.length>0)try{const{error:o}=await O.from("song_tag_assignments").select("id").limit(1);o||(await O.from("song_tag_assignments").delete().eq("song_id",e),await Kf(e,r))}catch(o){console.warn("Could not update song tags:",o)}return s}catch(r){throw console.error("Error updating song:",r),r}},g2=async e=>{const{error:t}=await O.from("songs").delete().eq("id",e);if(t)throw t},p2=async()=>{try{const{error:e}=await O.from("song_tags").select("id").limit(1);if(e)return[];const{data:t,error:r}=await O.from("song_tags").select("*").order("name",{ascending:!0});if(r)throw r;return t||[]}catch(e){return console.warn("Could not fetch song tags:",e),[]}},y2=async e=>{var o;const{data:t}=await O.auth.getUser();if(!((o=t==null?void 0:t.user)!=null&&o.id))throw new Error("User not authenticated");const{data:r,error:n}=await O.from("profiles").select("church_id").eq("id",t.user.id).single();if(n)throw n;const{data:s,error:i}=await O.from("song_tags").insert({...e,church_id:r.church_id,created_by:t.user.id}).select().single();if(i)throw i;return s},Kf=async(e,t)=>{const n=t.map(i=>typeof i=="object"?i.id:i).map(i=>({song_id:e,tag_id:i}));if(n.length===0)return;const{error:s}=await O.from("song_tag_assignments").insert(n);if(s)throw s},x2=async(e,t,r)=>{const n=["chord-charts","sheet-music","backing-tracks"];if(!n.includes(r))throw new Error(`Invalid attachment type. Must be one of: ${n.join(", ")}`);const{data:s,error:i}=await O.from("songs").select("church_id").eq("id",e).single();if(i)throw i;const o=s.church_id,l=`${Date.now()}_${t.name}`,c=`${o}/${e}/${r}/${l}`,{data:u,error:d}=await O.storage.from("song-attachments").upload(c,t,{cacheControl:"3600",upsert:!1});if(d)throw d;const{data:h}=O.storage.from("song-attachments").getPublicUrl(u.path);return h.publicUrl},Cd=async e=>{try{const{data:t,error:r}=await O.from("songs").select("church_id").eq("id",e).single();if(r)throw r;const s=`${t.church_id}/${e}`,i=["chord-charts","sheet-music","backing-tracks"],o={};for(const l of i){const c=`${s}/${l}`,{data:u,error:d}=await O.storage.from("song-attachments").list(c);if(d&&d.message!=="The resource was not found")throw d;o[l]=(u||[]).map(h=>({...h,url:O.storage.from("song-attachments").getPublicUrl(`${c}/${h.name}`).data.publicUrl}))}return o}catch(t){return console.warn("Could not list song attachments:",t),{"chord-charts":[],"sheet-music":[],"backing-tracks":[]}}},v2=async(e,t,r)=>{try{const{data:n,error:s}=await O.from("songs").select("church_id").eq("id",e).single();if(s)throw s;const o=`${n.church_id}/${e}/${t}/${r}`,{error:l}=await O.storage.from("song-attachments").remove([o]);if(l)throw l}catch(n){throw console.warn("Could not delete song attachment:",n),n}};var Gf={exports:{}},b2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w2=b2,k2=w2;function Jf(){}function Qf(){}Qf.resetWarningCache=Jf;var j2=function(){function e(n,s,i,o,l,c){if(c!==k2){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Qf,resetWarningCache:Jf};return r.PropTypes=r,r};Gf.exports=j2();var _2=Gf.exports;const ps=ni(_2),Oc=({content:e,className:t=""})=>{if(!e)return null;const r=N2(e);return a.jsx("div",{className:`font-mono text-sm ${t}`,children:r.map((n,s)=>a.jsxs("div",{className:"chord-section mb-6",children:[n.title&&a.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-600 dark:text-blue-400",children:n.title}),a.jsx("div",{className:"chord-section-content pl-0 md:pl-2",children:n.lines.map((i,o)=>i.type==="chord-lyric-pair"?a.jsxs("div",{className:"mb-1",children:[a.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-bold whitespace-pre",children:i.chords}),a.jsx("div",{className:"whitespace-pre text-gray-900 dark:text-gray-100",children:i.lyrics})]},`line-${s}-${o}`):i.content.trim()===""?a.jsx("div",{className:"h-4"},`line-${s}-${o}`):a.jsx("div",{className:"whitespace-pre mb-1 text-gray-900 dark:text-gray-100",children:i.content},`line-${s}-${o}`))})]},`section-${s}`))})};function N2(e){if(!e)return[];const t=e.split(`
`),r=[];let n={lines:[]};for(let s=0;s<t.length;s++){const i=t[s],o=s+1<t.length?t[s+1]:null,l=i.trim().match(/^\[(.*?)\]$/);if(l){n.lines.length>0&&r.push(n),n={title:l[0],lines:[]};continue}Ed(i)&&o&&!Ed(o)?(n.lines.push({type:"chord-lyric-pair",chords:i,lyrics:o}),s++):n.lines.push({type:"text",content:i})}return n.lines.length>0&&r.push(n),r}function Ed(e){if(!e||e.trim()===""||!/\s{2,}/.test(e))return!1;const r=/^[A-G][#b]?(m|maj|min|aug|dim|sus|add|2|4|5|6|7|9|11|13|-|\+|\/)*/,s=e.split(/\s{2,}/).filter(o=>o.trim()!=="");return s.length===0?!1:s.filter(o=>r.test(o.trim())).length>=s.length/2}Oc.propTypes={content:ps.string,className:ps.string};const Xf=({selectedTags:e=[],onChange:t,readOnly:r=!1})=>{const[n,s]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState(null),[u,d]=p.useState(!1),[h,m]=p.useState(""),[y,v]=p.useState("#3B82F6");p.useEffect(()=>{(async()=>{try{o(!0);const f=await p2();s(f)}catch(f){console.error("Error loading tags:",f),c("Failed to load tags")}finally{o(!1)}})()},[]);const b=g=>{if(r)return;const f=e.some(w=>w.id===g.id);let x;f?x=e.filter(w=>w.id!==g.id):x=[...e,g],t(x)},k=async g=>{if(g.preventDefault(),!!h.trim())try{o(!0);const f=await y2({name:h.trim(),color:y});s([...n,f]),m(""),v("#3B82F6"),d(!1),t([...e,f])}catch(f){console.error("Error creating tag:",f),c("Failed to create tag")}finally{o(!1)}};return i&&n.length===0?a.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Loading tags..."}):l&&n.length===0?a.jsx("div",{className:"text-red-500 dark:text-red-400 text-sm",children:l}):a.jsxs("div",{className:"song-tags",children:[e.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1 flex items-center",children:[a.jsx(Uf,{className:"mr-1"})," Selected Tags:"]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(g=>a.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",style:{backgroundColor:`${g.color}20`,color:g.color,borderColor:g.color},children:[g.name,!r&&a.jsx("button",{type:"button",onClick:()=>b(g),className:"ml-1 focus:outline-none",children:a.jsx(Mt,{size:10})})]},g.id))})]}),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Available Tags:"}),a.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.map(g=>{const f=e.some(x=>x.id===g.id);return a.jsx("button",{type:"button",onClick:()=>b(g),className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium transition-colors ${f?"bg-opacity-80 text-white":"bg-opacity-20"}`,style:{backgroundColor:f?g.color:`${g.color}20`,color:f?"white":g.color},children:g.name},g.id)}),a.jsxs("button",{type:"button",onClick:()=>d(!0),className:`inline-flex items-center px-2 py-1 border border-dashed border-gray-300 dark:border-gray-600 
                         rounded-full text-xs font-medium text-gray-500 dark:text-gray-400 
                         hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-400 dark:hover:border-gray-500`,children:[a.jsx(Ue,{className:"mr-1",size:10}),"New Tag"]})]})]}),u&&a.jsxs("div",{className:"mt-4 p-3 border border-gray-200 dark:border-gray-700 rounded-md bg-gray-50 dark:bg-gray-700",children:[a.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-900 dark:text-gray-100",children:"Create New Tag"}),a.jsxs("form",{onSubmit:k,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tagName",className:"block text-xs text-gray-500 dark:text-gray-400",children:"Tag Name"}),a.jsx("input",{type:"text",id:"tagName",value:h,onChange:g=>m(g.target.value),className:`mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-1 px-2 
                             bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                             text-sm focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`,placeholder:"Enter tag name",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tagColor",className:"block text-xs text-gray-500 dark:text-gray-400",children:"Tag Color"}),a.jsxs("div",{className:"flex mt-1",children:[a.jsx("input",{type:"color",id:"tagColor",value:y,onChange:g=>v(g.target.value),className:"h-8 w-8 border border-gray-300 dark:border-gray-600 rounded"}),a.jsx("input",{type:"text",value:y,onChange:g=>v(g.target.value),className:`ml-2 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-1 px-2 
                               bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                               text-sm focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`,placeholder:"#HEX"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>d(!1),className:`px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-sm 
                             text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800
                             hover:bg-gray-50 dark:hover:bg-gray-700 
                             focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400`,children:"Cancel"}),a.jsx("button",{type:"submit",className:`px-3 py-1 border border-transparent rounded-md text-sm text-white 
                             bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600
                             focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400`,disabled:i||!h.trim(),children:"Create"})]})]})]})]})]})},S2=({songId:e,readOnly:t=!1})=>{const[r,n]=p.useState({"chord-charts":[],"sheet-music":[],"backing-tracks":[],"youtube-links":[]}),[s,i]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(""),[m,y]=p.useState(!1),v=p.useRef(null),[b,k]=p.useState(null),g=[{value:"chord-charts",label:"Chord Charts",icon:a.jsx(Jn,{})},{value:"sheet-music",label:"Sheet Music",icon:a.jsx(Kt,{})},{value:"backing-tracks",label:"Backing Tracks",icon:a.jsx(yd,{})},{value:"youtube-links",label:"YouTube Links",icon:a.jsx(go,{})}];p.useEffect(()=>{(async()=>{if(e)try{i(!0);const P=await Cd(e);try{const{data:L,error:D}=await O.from("song_youtube_links").select("*").eq("song_id",e);if(D&&D.code==="42P01")console.log("YouTube links table not yet created"),n({...P,"youtube-links":[]});else{if(D)throw D;{const S={...P,"youtube-links":(L||[]).map(_=>({name:_.title||"YouTube Video",url:_.url,id:_.id}))};n(S)}}}catch(L){console.log("Could not fetch YouTube links:",L),n({...P,"youtube-links":[]})}}catch(P){console.error("Error loading attachments:",P),u("Failed to load attachments")}finally{i(!1)}})()},[e]);const f=async R=>{const P=R.target.files[0];if(!(!P||!b))try{l(!0),await x2(e,P,b);const L=await Cd(e);n(D=>({...D,...L})),v.current&&(v.current.value="")}catch(L){console.error("Error uploading file:",L),u("Failed to upload file")}finally{l(!1),k(null)}},x=R=>{if(!R)return null;const P=[/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([^&\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtu\.be\/([^\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/embed\/([^\s]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/v\/([^\s?]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/shorts\/([^\s?]+)/];for(const L of P){const D=R.match(L);if(D&&D[1])return D[1].substring(0,11)}return null},w=async()=>{if(!d.trim())return;const R=x(d);if(!R){u("Invalid YouTube URL");return}try{l(!0);let P="YouTube Video";try{const S=await(await fetch(`https://www.youtube.com/oembed?url=${d}&format=json`)).json();S.title&&(P=S.title)}catch{console.log("Could not fetch video title, using default")}const{data:L,error:D}=await O.from("song_youtube_links").insert({song_id:e,url:d,title:P,video_id:R}).select().single();if(D)throw D;n(z=>({...z,"youtube-links":[...z["youtube-links"]||[],{name:P,url:d,id:L.id}]})),h(""),y(!1)}catch(P){console.error("Error adding YouTube link:",P),u("Failed to add YouTube link")}finally{l(!1)}},E=async(R,P,L)=>{try{if(R==="youtube-links"){const{error:D}=await O.from("song_youtube_links").delete().eq("id",L);if(D)throw D}else await v2(e,R,P);n(D=>({...D,[R]:D[R].filter(z=>R==="youtube-links"?z.id!==L:z.name!==P)}))}catch(D){console.error("Error deleting item:",D),u("Failed to delete item")}},N=R=>{if(R==="youtube-links"){y(!0);return}k(R),setTimeout(()=>{v.current&&v.current.click()},100)},C=R=>{switch(R.split(".").pop().toLowerCase()){case"pdf":return a.jsx(Jn,{className:"text-red-500"});case"doc":case"docx":return a.jsx(Jn,{className:"text-blue-500"});case"png":case"jpg":case"jpeg":return a.jsx(Jn,{className:"text-green-500"});case"mp3":case"wav":case"m4a":return a.jsx(yd,{className:"text-purple-500"});default:return a.jsx(Jn,{className:"text-gray-500"})}};if(s)return a.jsx("div",{className:"text-gray-500 text-sm",children:"Loading attachments..."});const T=Object.values(r).some(R=>R&&R.length>0);return a.jsxs("div",{className:"song-attachments",children:[c&&a.jsx("div",{className:"mb-3 text-sm text-red-500",children:c}),a.jsx("input",{type:"file",ref:v,className:"hidden",onChange:f,disabled:o}),m&&a.jsxs("div",{className:"mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-md",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(go,{className:"text-red-600 mr-2"}),a.jsx("span",{className:"font-medium text-sm",children:"Add YouTube Link"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Paste YouTube URL here",value:d,onChange:R=>h(R.target.value),className:"flex-1 p-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:w,disabled:o||!d.trim(),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Add"}),a.jsx("button",{onClick:()=>{y(!1),h("")},className:"px-3 py-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-200 text-sm rounded-md hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"})]})]})]}),!t&&!m&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"Add Attachment:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(R=>a.jsxs("button",{type:"button",onClick:()=>N(R.value),disabled:o,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o&&b===R.value?a.jsx("span",{className:"animate-spin mr-2 h-4 w-4 border-t-2 border-b-2 border-gray-500 rounded-full"}):a.jsxs(a.Fragment,{children:[R.icon,a.jsx(Ue,{className:"ml-1 mr-1",size:10})]}),R.label]},R.value))})]}),T?a.jsx("div",{className:"space-y-4",children:g.map(R=>{const P=r[R.value]||[];return P.length===0?null:a.jsxs("div",{className:"attachment-section",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[R.icon,a.jsx("span",{className:"ml-2",children:R.label}),a.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",P.length,")"]})]}),a.jsx("ul",{className:"divide-y divide-gray-200 border border-gray-200 rounded-md overflow-hidden",children:P.map(L=>a.jsxs("li",{className:"px-4 py-3 bg-white flex items-center justify-between hover:bg-gray-50",children:[a.jsxs("div",{className:"flex items-center",children:[R.value==="youtube-links"?a.jsx(go,{className:"text-red-600"}):C(L.name),a.jsx("span",{className:"ml-2 text-sm text-gray-600 truncate max-w-xs",children:L.name})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("a",{href:L.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",title:R.value==="youtube-links"?"View on YouTube":"Download",children:R.value==="youtube-links"?a.jsx(wv,{}):a.jsx(mv,{})}),!t&&a.jsx("button",{type:"button",onClick:()=>E(R.value,L.name,L.id),className:"text-red-500 hover:text-red-700",title:"Delete",children:a.jsx(Oi,{})})]})]},L.id||L.name))})]},R.value)})}):a.jsxs("div",{className:"text-sm text-gray-500 p-4 bg-gray-50 text-center rounded-md",children:["No attachments available for this song.",!t&&a.jsx("p",{className:"mt-1 text-xs",children:"Use the buttons above to add chord charts, sheet music, backing tracks, or YouTube links."})]})]})},C2=({lyrics:e})=>{const r=(n=>{var l;if(!n)return[];const s=/\[(.*?)\]/g,i=n.split(s).filter(c=>c.trim()),o=[];for(let c=0;c<i.length;c+=2){const u=i[c],d=((l=i[c+1])==null?void 0:l.trim())||"";u&&d?o.push({title:u,content:d}):u&&!d&&o.push({title:"",content:u})}return o})(e);return a.jsx("div",{className:"lyrics-display",children:r.length>0?a.jsx("div",{className:"space-y-6",children:r.map((n,s)=>a.jsxs("div",{className:"verse-container",children:[n.title&&a.jsxs("h3",{className:"text-lg font-semibold mb-2 text-blue-600 dark:text-blue-400",children:["[",n.title,"]"]}),a.jsx("div",{className:"verse-content whitespace-pre-line text-gray-800 dark:text-gray-200 leading-relaxed",children:n.content})]},s))}):a.jsx("div",{className:"text-gray-500 dark:text-gray-400 italic",children:"No lyrics available for this song."})})},E2=()=>{const{id:e}=Vs(),t=Be(),r=Cr(),n=new URLSearchParams(r.search),s=n.get("serviceKey"),i=n.get("eventId"),o=n.get("eventSongId");n.get("notes");const l=n.get("isDone"),[c,u]=p.useState(null),[d,h]=p.useState(null),[m,y]=p.useState(!0),[v,b]=p.useState(""),[k,g]=p.useState(""),[f,x]=p.useState(null),[w,E]=p.useState("song"),[N,C]=p.useState(!1),[T,R]=p.useState(!1),[P,L]=p.useState(!1),[D,z]=p.useState(!1),[S,_]=p.useState(l==="true"),[A,I]=p.useState("text-base"),j=Wf(),M=[{value:"text-sm",label:"Small"},{value:"text-base",label:"Medium"},{value:"text-lg",label:"Large"},{value:"text-xl",label:"Extra Large"}];p.useEffect(()=>{(async()=>{if(i)try{const{data:K,error:te}=await O.from("events").select("title, start_time").eq("id",i).single();if(te)throw te;h(K)}catch(K){console.error("Error fetching service details:",K)}})()},[i]),p.useEffect(()=>{(async()=>{try{y(!0);const K=await Yf(e);u(K);const te=s||K.default_key||"C";if(b(te),s&&K.default_key&&s!==K.default_key&&K.chords){const ke=K.chords.split(`
`).map(pt=>Sd(pt,K.default_key,s)).join(`
`);g(ke)}else g(K.chords||"")}catch(K){console.error("Error fetching song:",K),x("Could not load the song. Please try again.")}finally{y(!1)}})()},[e,s]);const $=q=>{if(!c||!c.chords)return;const K=c.default_key||"C";if(q===K){g(c.chords),b(q);return}const be=c.chords.split(`
`).map(ke=>Sd(ke,K,q)).join(`
`);g(be),b(q)},F=()=>{t(i?`/services/${i}`:"/songs")},H=async()=>{if(!(!o||!i))try{z(!0),_(q=>!q);try{const{error:q}=await O.from("event_songs").update({is_done:!S}).eq("id",o);if(q)throw console.log("Could not update is_done in database:",q),q;t(`/services/${i}`)}catch(q){throw console.log("Error updating is_done field:",q),_(K=>!K),q}}catch(q){console.error("Error updating song status:",q),alert("Failed to update song status. Please try again.")}finally{z(!1)}};return m?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):f?a.jsxs("div",{className:"text-center py-12 px-4",children:[a.jsx("p",{className:"text-red-500 dark:text-red-400",children:f}),a.jsxs("button",{onClick:F,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600",children:[a.jsx(ms,{className:"mr-2"})," Back"]})]}):c?a.jsxs("div",{className:"pb-[100px] flex flex-col min-h-screen bg-white dark:bg-gray-800 px-4 md:px-6",children:[a.jsxs("div",{className:"py-2 border-b border-gray-200 dark:border-gray-700 flex justify-between",children:[a.jsxs("button",{onClick:F,className:"text-gray-600 dark:text-gray-400 flex items-center","aria-label":"Back",children:[a.jsx(ms,{className:"mr-2"}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Back to ",i?"Service":"Songs"]})]}),a.jsxs(ve,{to:`/songs/edit/${e}`,className:"text-blue-600 dark:text-blue-400 flex items-center","aria-label":"Edit Song",children:[a.jsx(Fn,{className:"mr-2"}),a.jsx("span",{className:"text-sm",children:"Edit Song"})]})]}),a.jsx("div",{className:"py-3 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:c.title})}),d&&a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900 py-2 border-b border-blue-100 dark:border-blue-800",children:a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(ov,{className:"text-blue-500 mr-2"}),a.jsx("span",{className:"dark:text-blue-200",children:"Viewing for service: "}),a.jsx("span",{className:"text-blue-600 dark:text-blue-400 ml-1 font-medium",children:d.title})]})}),a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"flex",children:[a.jsxs("button",{onClick:()=>E("song"),className:`flex-1 py-2 text-center border-b-2 font-medium text-sm ${w==="song"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400"}`,"aria-pressed":w==="song",children:[a.jsx(Kt,{className:"inline mr-1"}),"Song"]}),a.jsxs("button",{onClick:()=>E("attachments"),className:`flex-1 py-2 text-center border-b-2 font-medium text-sm ${w==="attachments"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400"}`,"aria-pressed":w==="attachments",children:[a.jsx(Nv,{className:"inline mr-1"}),"Attachments"]})]})}),w==="song"?a.jsxs("div",{className:"flex-1",children:[c.chords&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center py-3",children:[a.jsxs("h2",{className:"text-base font-medium flex items-center text-gray-900 dark:text-white",children:[a.jsx(Kt,{className:"mr-2"}),"Chord Chart"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>L(!P),className:"text-blue-600 dark:text-blue-400 text-sm","aria-expanded":P,children:[a.jsx(vv,{className:"inline mr-1"}),"Font Size"]}),a.jsxs("button",{onClick:()=>R(!T),className:"text-blue-600 dark:text-blue-400 text-sm","aria-expanded":T,children:[a.jsx(pv,{className:"inline mr-1"}),"Transpose"]})]})]}),P&&a.jsx("div",{className:"py-3 bg-gray-50 dark:bg-gray-700 border-y border-gray-200 dark:border-gray-600",children:a.jsx("div",{className:"flex justify-between items-center px-2",children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fontSizeSelect",className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Font Size:"}),a.jsx("select",{id:"fontSizeSelect",value:A,onChange:q=>I(q.target.value),className:"w-32 px-1 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:M.map(q=>a.jsx("option",{value:q.value,children:q.label},q.value))})]})})}),T&&a.jsx("div",{className:"py-3 bg-gray-50 dark:bg-gray-700 border-y border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"flex justify-between items-center px-2",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"keySelect",className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Transpose to:"}),a.jsx("select",{id:"keySelect",value:v,onChange:q=>$(q.target.value),className:"w-20 px-1 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:j.map(q=>a.jsx("option",{value:q,children:q},q))})]}),a.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[a.jsxs("div",{children:["Original Key: ",a.jsx("span",{className:"font-medium",children:c.default_key||"Not set"})]}),v!==c.default_key&&a.jsx("button",{onClick:()=>$(c.default_key),className:"text-blue-600 dark:text-blue-400 underline",children:"Reset"})]})]})}),a.jsx("div",{className:"py-3 overflow-x-auto whitespace-nowrap",children:a.jsx(Oc,{content:k,className:A})})]}),c.lyrics&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-base font-medium py-3 border-b border-gray-200 dark:border-gray-700 dark:text-white",children:"Lyrics"}),a.jsx("div",{className:`py-3 ${A}`,children:a.jsx(C2,{lyrics:c.lyrics})})]}),a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("button",{onClick:()=>C(!N),className:"flex w-full items-center justify-between py-3 text-left text-gray-900 dark:text-gray-100","aria-expanded":N,children:[a.jsx("span",{className:"font-medium",children:"Song Information"}),N?a.jsx(uv,{}):a.jsx(cv,{})]}),N&&a.jsxs("div",{className:"py-3 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Artist"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.artist||"Unknown"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Original Key"}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:c.default_key||"Not specified"})]}),c.tempo&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tempo"}),a.jsxs("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:[c.tempo," BPM"]})]})]}),c.tags&&c.tags.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tags"}),a.jsx(Xf,{selectedTags:c.tags,readOnly:!0})]})]})]}),c.notes&&a.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-base font-medium py-3 border-b border-gray-200 dark:border-gray-700 dark:text-white",children:"Notes"}),a.jsx("div",{className:`py-3 break-words text-gray-900 dark:text-gray-100 ${A}`,children:c.notes.split(`
`).map((q,K)=>a.jsx("div",{children:q||a.jsx("br",{})},K))})]})]}):a.jsx("div",{className:"py-3",children:a.jsx(S2,{songId:e})}),i&&o&&a.jsx("div",{className:"fixed bottom-16 left-0 right-0 flex justify-center z-20 mb-4",children:a.jsxs("button",{onClick:H,disabled:D,className:`flex items-center justify-center px-4 py-2 
                      ${S?"bg-gray-500 dark:bg-gray-600 hover:bg-gray-600 dark:hover:bg-gray-700":"bg-green-500 dark:bg-green-600 hover:bg-green-600 dark:hover:bg-green-700"} 
                      text-white font-medium rounded-full shadow-md transition-colors text-sm`,children:[a.jsx(kn,{className:"mr-2"}),"Mark as ",S?"Not Done":"Done"]})})]}):a.jsxs("div",{className:"text-center py-12 px-4",children:[a.jsx("p",{className:"dark:text-white",children:"Song not found."}),a.jsxs("button",{onClick:F,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600",children:[a.jsx(ms,{className:"mr-2"})," Back"]})]})},Zf=({value:e,onChange:t,rows:r=10})=>{const[n,s]=p.useState(!1),[i,o]=p.useState(!1),l=["C","G","D","A","E","F","Am","Em","Dm","G7","C7","D7","Cmaj7","Fmaj7","Gsus4"],c=`[Verse 1]
C        G        Am       F
Here are some example chords above lyrics
C             G              Am  F
Words should be aligned with the chords above

[Chorus]
F         G       C
This is how a chorus might look
F         G       Am      G
With more chords and lyrics here

[Bridge]
Am   G   F   C
Simple progression
`,u=m=>{if(!e)t(m+"  ");else{const y=document.getElementById("chord-editor").selectionStart,v=e.substring(0,y),b=e.substring(y);t(v+m+"  "+b),o(!0)}},d=m=>{const y=`
[${m}]
`;if(!e)t(y);else{const v=document.getElementById("chord-editor").selectionStart,b=e.substring(0,v),k=e.substring(v);t(b+y+k)}o(!0)},h=m=>{t(m.target.value),i||o(!0)};return p.useEffect(()=>{},[e,i]),a.jsxs("div",{className:"chord-editor-container",children:[a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Quick Insert Chords:"}),a.jsxs("button",{type:"button",onClick:()=>s(!n),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm flex items-center",children:[a.jsx(Sv,{className:"mr-1"}),n?"Hide Help":"Show Help"]})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:l.map(m=>a.jsx("button",{type:"button",onClick:()=>u(m),className:`inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 
                       text-xs font-medium rounded shadow-sm text-gray-700 dark:text-gray-200 
                       bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 
                       focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400`,children:m},m))})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add Section:"}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:["Verse","Chorus","Bridge","Intro","Outro","Pre-Chorus"].map(m=>a.jsxs("button",{type:"button",onClick:()=>d(m),className:`inline-flex items-center px-2 py-1 border border-gray-300 dark:border-gray-600 
                       text-xs font-medium rounded shadow-sm text-gray-700 dark:text-gray-200 
                       bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 
                       focus:outline-none focus:ring-1 focus:ring-blue-500 dark:focus:ring-blue-400`,children:[a.jsx(Ue,{className:"mr-1 h-3 w-3"}),m]},m))})]}),n&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-800 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Chord Chart Formatting Help"}),a.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-2",children:"Format your chord chart by placing chords above lyrics with spaces between them. Use section markers like [Verse] or [Chorus] to organize your song."}),a.jsx("div",{className:"bg-white dark:bg-gray-800 p-2 rounded text-xs font-mono",children:a.jsx("pre",{className:"whitespace-pre-wrap text-gray-900 dark:text-gray-200",children:c})}),a.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-2",children:"Tip: Make sure to keep chord names short (C, G, Am, etc.) and use spaces to align them with lyrics."})]}),a.jsx("textarea",{id:"chord-editor",value:e,onChange:h,rows:r,className:`block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 
                 sm:text-sm font-mono`,placeholder:"Enter chords here..."}),a.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Use monospaced formatting for chords. Press Tab for indentation."})]})};Zf.propTypes={value:ps.string,onChange:ps.func.isRequired,rows:ps.number};const Pd=()=>{const e=Be(),{id:t}=Vs(),r=!!t,[n,s]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState({title:"",artist:"",default_key:"C",tempo:"",lyrics:"",chords:"",notes:"",tags:[]}),[h,m]=p.useState(!1),[y,v]=p.useState({}),b=Wf();p.useEffect(()=>{r&&k()},[t]);const k=async()=>{try{s(!0);const T=await Yf(t);d({title:T.title||"",artist:T.artist||"",default_key:T.default_key||"C",tempo:T.tempo||"",lyrics:T.lyrics||"",chords:T.chords||"",notes:T.notes||"",tags:T.tags||[]}),T.chords&&m(!0)}catch(T){console.error("Error fetching song:",T),c("Could not load the song. Please try again.")}finally{s(!1)}},g=()=>{const T={};return u.title.trim()||(T.title="Song title is required"),u.chords&&!u.default_key&&(T.default_key="Default key is required when providing chords"),u.tempo&&(isNaN(u.tempo)||u.tempo<20||u.tempo>300)&&(T.tempo="Tempo must be a number between 20 and 300"),v(T),Object.keys(T).length===0},f=T=>{const{name:R,value:P}=T.target;d(L=>({...L,[R]:P})),y[R]&&v(L=>{const D={...L};return delete D[R],D})},x=T=>{d(R=>({...R,chords:T}))},w=T=>{d(R=>({...R,tags:T}))},E=()=>{m(!h)},N=async T=>{if(T.preventDefault(),!!g())try{o(!0);const R={...u,tempo:u.tempo===""?null:Number(u.tempo)};if(r)await m2(t,R),e(`/songs/${t}`);else{const P=await f2(R);e(`/songs/${P.id}`)}}catch(R){console.error("Error saving song:",R),c(R.message||"Failed to save the song. Please try again.")}finally{o(!1)}},C=async()=>{if(!(!r||!window.confirm("Are you sure you want to delete this song? This action cannot be undone.")))try{o(!0),await g2(t),e("/songs")}catch(R){console.error("Error deleting song:",R),c("Failed to delete the song. Please try again.")}finally{o(!1)}};return n?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("button",{onClick:()=>e(r?`/songs/${t}`:"/songs"),className:"inline-flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300",children:[a.jsx(ms,{className:"mr-1"})," Back"]}),a.jsx("h1",{className:"text-2xl font-bold text-center flex-1 mx-4 text-gray-900 dark:text-white",children:r?"Edit Song":"Add New Song"}),r&&a.jsx("button",{onClick:C,className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",title:"Delete song",disabled:i,children:a.jsx(Oi,{size:20})})]}),l&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900 border-l-4 border-red-500 dark:border-red-700 p-4 mb-6",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Mf,{className:"h-5 w-5 text-red-400 dark:text-red-300"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})})]})}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"title",name:"title",value:u.title,onChange:f,className:`mt-1 block w-full border ${y.title?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"} 
                          rounded-md shadow-sm py-2 px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`}),y.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.title})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"artist",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Artist / Composer"}),a.jsx("input",{type:"text",id:"artist",name:"artist",value:u.artist,onChange:f,className:`mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"default_key",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:["Default Key ",u.chords&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:"default_key",name:"default_key",value:u.default_key,onChange:f,className:`mt-1 block w-full pl-3 pr-10 py-2 text-base border 
                          ${y.default_key?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"} 
                          bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm rounded-md`,children:[a.jsx("option",{value:"",children:"Select a key"}),b.map(T=>a.jsx("option",{value:T,children:T},T))]}),y.default_key&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.default_key})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tempo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tempo (BPM)"}),a.jsx("input",{type:"number",id:"tempo",name:"tempo",value:u.tempo,onChange:f,min:"20",max:"300",className:`mt-1 block w-full border 
                          ${y.tempo?"border-red-300 dark:border-red-700":"border-gray-300 dark:border-gray-600"} 
                          rounded-md shadow-sm py-2 px-3 bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                          focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`}),y.tempo?a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.tempo}):a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Typical range: 60-180 BPM"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Tags"}),a.jsx(Xf,{selectedTags:u.tags,onChange:w})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Chord Chart"}),u.chords&&a.jsx("button",{type:"button",onClick:E,className:"inline-flex items-center text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:h?a.jsxs(a.Fragment,{children:[a.jsx(yv,{className:"mr-1"})," Hide Preview"]}):a.jsxs(a.Fragment,{children:[a.jsx(Cc,{className:"mr-1"})," Show Preview"]})})]}),h&&u.chords&&a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Preview:"}),a.jsx(Oc,{content:u.chords})]}),a.jsx(Zf,{value:u.chords,onChange:x,rows:10})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Lyrics"}),a.jsx("textarea",{id:"lyrics",name:"lyrics",value:u.lyrics,onChange:f,rows:15,className:`block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 
                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                     focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`,placeholder:"Enter lyrics here..."}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Tip: Include section markers like [Verse], [Chorus], etc. for better organization."})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Additional Notes"}),a.jsx("textarea",{id:"notes",name:"notes",value:u.notes,onChange:f,rows:4,className:`block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 
                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                     focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`,placeholder:"Enter any additional notes, performance instructions, etc."}),a.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Include notes about song structure, performance tips, or arrangement details."})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:i,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md 
                     shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600
                     focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50`,children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-t-2 border-b-2 border-white rounded-full"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Pc,{className:"mr-2"})," Save Song"]})})})]})]})},P2=()=>{const{id:e}=Vs(),t=Be(),[r,n]=p.useState(null),[s,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(""),[d,h]=p.useState(""),[m,y]=p.useState(!1),[v,b]=p.useState(null),[k,g]=p.useState(new Set);p.useEffect(()=>{(async()=>{try{l(!0);const{data:C,error:T}=await O.from("events").select("*").eq("id",e).single();if(T)throw T;if(n(C),C!=null&&C.church_id){const{data:L,error:D}=await O.from("churches").select("name").eq("id",C.church_id).single();!D&&L&&u(L.name)}if(C!=null&&C.team_id){const{data:L,error:D}=await O.from("worship_teams").select("name").eq("id",C.team_id).single();!D&&L&&h(L.name)}const{data:R,error:P}=await O.from("event_songs").select(`
            id,
            song_order,
            key,
            notes,
            is_done,
            songs (
              id,
              title,
              artist,
              default_key
            )
          `).eq("event_id",e).order("song_order");if(P)throw console.error("Error fetching songs:",P),P;if(console.log("Songs data:",R),R){try{if(R.some(D=>"is_done"in D)){const D=new Set(R.filter(z=>z.is_done).map(z=>z.id));g(D)}}catch{console.log("No is_done field yet, using local state only")}i(R)}else i([])}catch(C){console.error("Error fetching service details:",C)}finally{l(!1)}})()},[e]);const f=N=>{if(!v)try{const C=s.find(R=>R.id===N);if(!C)return;const T=k.has(N);t(`/songs/${C.songs.id}?serviceKey=${encodeURIComponent(C.key||C.songs.default_key)}&eventId=${e}&eventSongId=${N}&notes=${encodeURIComponent(C.notes||"")}&isDone=${T}`)}catch(C){console.error("Error navigating to song details:",C),alert("Could not navigate to song details. Please try again.")}},x=()=>{t(`/services/edit/${e}`)},w=async(N,C)=>{C&&C.stopPropagation();try{b(N),g(T=>{const R=new Set(T);return R.has(N)?R.delete(N):R.add(N),R});try{const{error:T}=await O.from("event_songs").update({is_done:!k.has(N)}).eq("id",N);T&&console.log("Could not update is_done in database:",T)}catch(T){console.log("Error updating is_done field:",T)}}catch(T){console.error("Error updating song status:",T),alert("Failed to update song status. Please try again."),g(R=>{const P=new Set(R);return P.has(N)?P.delete(N):P.add(N),P})}finally{b(null)}},E=async()=>{if(window.confirm("Are you sure you want to delete this service? This action cannot be undone."))try{y(!0);const{error:N}=await O.from("event_songs").delete().eq("event_id",e);if(N)throw N;const{error:C}=await O.from("events").delete().eq("id",e);if(C)throw C;t("/calendar")}catch(N){console.error("Error deleting service:",N),alert("Error deleting service. Please try again.")}finally{y(!1)}};return o?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r?a.jsxs("div",{className:"max-w-3xl mx-auto p-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.title}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:x,className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 rounded-full",title:"Edit service",children:a.jsx(Fn,{size:20})}),a.jsx("button",{onClick:E,disabled:m,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-full disabled:opacity-50",title:"Delete service",children:a.jsx(Oi,{size:20})})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:a.jsxs("div",{className:"space-y-4",children:[r.description&&a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.description}),a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Pr,{className:"mt-1 text-gray-500 dark:text-gray-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:ie(r.start_time).format("dddd, MMMM D, YYYY")}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[a.jsx(dv,{className:"mr-1"}),ie(r.start_time).format("h:mm A")," - ",ie(r.end_time).format("h:mm A")]})]})]}),r.location&&a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(kv,{className:"mt-1 text-gray-500 dark:text-gray-400"}),a.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:r.location})]}),c&&a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(Tr,{className:"mt-1 text-gray-500 dark:text-gray-400"}),a.jsx("div",{className:"text-gray-900 dark:text-gray-100",children:c})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[a.jsxs("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[a.jsx(Kt,{className:"mr-2"})," Service Songs"]}),s.length===0?a.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No songs have been added to this service."}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-2 text-sm text-gray-600 dark:text-gray-400",children:["Total songs: ",s.length]}),a.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(N=>{var T,R;const C=k.has(N.id);return a.jsx("li",{className:`py-4 ${C?"bg-green-800 dark:bg-green-950 bg-opacity-10 dark:bg-opacity-20":""} hover:bg-gray-50 dark:hover:bg-gray-700`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-8 w-8 flex items-center justify-center bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300 rounded-full mr-3 font-medium",children:N.song_order}),a.jsx("div",{className:"flex-grow cursor-pointer",onClick:()=>f(N.id),children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:`font-medium ${C?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,children:((T=N.songs)==null?void 0:T.title)||"Unknown Title"}),((R=N.songs)==null?void 0:R.artist)&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:N.songs.artist}),a.jsxs("div",{className:"mt-1 flex flex-wrap gap-2",children:[N.key&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300",children:["Key: ",N.key]}),N.notes&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:["Notes: ",N.notes]}),C&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-300",children:[a.jsx(kn,{className:"mr-1",size:10})," Completed"]})]})]}),a.jsx("button",{onClick:P=>w(N.id,P),disabled:v===N.id,className:`ml-2 p-2 rounded-full ${C?"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900":"text-gray-400 dark:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700"} 
                            ${v===N.id?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,title:C?"Mark as incomplete":"Mark as complete",children:v===N.id?a.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-green-500 rounded-full border-t-transparent"}):C?a.jsx(lv,{size:20}):a.jsx(Tv,{size:20})})]})})]})},N.id)})})]})]})]}):a.jsxs("div",{className:"max-w-3xl mx-auto p-4 text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Service Not Found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"The service you're looking for doesn't exist or has been deleted."}),a.jsx("button",{onClick:()=>t("/calendar"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Back to Calendar"})]})},T2=({selectedSongs:e=[],onSongsChange:t,churchId:r})=>{const[n,s]=p.useState([]),[i,o]=p.useState(!1),[l,c]=p.useState(""),[u,d]=p.useState(!1);p.useEffect(()=>{(async()=>{if(r)try{o(!0);const{data:x,error:w}=await O.from("songs").select("id, title, artist, default_key").eq("church_id",r).order("title");if(w)throw w;s(x||[])}catch(x){console.error("Error fetching songs:",x)}finally{o(!1)}})()},[r]);const h=n.filter(f=>!e.some(x=>x.songId===f.id)),m=h.filter(f=>f.title.toLowerCase().includes(l.toLowerCase())||f.artist&&f.artist.toLowerCase().includes(l.toLowerCase())),y=f=>{const x={songId:f.id,title:f.title,artist:f.artist,key:f.default_key||"",notes:"",order:e.length+1};t([...e,x]),c(""),d(!1)},v=f=>{const x=[...e];x.splice(f,1);const w=x.map((E,N)=>({...E,order:N+1}));t(w)},b=(f,x)=>{if(x==="up"&&f===0||x==="down"&&f===e.length-1)return;const w=[...e],E=x==="up"?f-1:f+1;[w[f],w[E]]=[w[E],w[f]];const N=w.map((C,T)=>({...C,order:T+1}));t(N)},k=(f,x)=>{const w=[...e];w[f].key=x,t(w)},g=(f,x)=>{const w=[...e];w[f].notes=x,t(w)};return a.jsxs("div",{children:[e.length>0?a.jsx("div",{className:"space-y-4 mb-4",children:e.map((f,x)=>a.jsxs("div",{className:"border rounded-md p-3 bg-gray-50 dark:bg-gray-700 dark:border-gray-600",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-medium dark:text-white",children:[x+1,". ",f.title]}),f.artist&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:f.artist})]}),a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("button",{type:"button",onClick:()=>b(x,"up"),disabled:x===0,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-30 disabled:cursor-not-allowed dark:text-gray-300",title:"Move up",children:a.jsx(av,{size:14})}),a.jsx("button",{type:"button",onClick:()=>b(x,"down"),disabled:x===e.length-1,className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-30 disabled:cursor-not-allowed dark:text-gray-300",title:"Move down",children:a.jsx(sv,{size:14})}),a.jsx("button",{type:"button",onClick:()=>v(x),className:"p-1 rounded hover:bg-gray-200 dark:hover:bg-gray-600 text-red-500 dark:text-red-400",title:"Remove song",children:a.jsx(Mt,{size:14})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Performance Key"}),a.jsx("input",{type:"text",value:f.key||"",onChange:w=>k(x,w.target.value),className:`mt-1 block w-full text-sm border border-gray-300 dark:border-gray-600 
                               rounded-md shadow-sm p-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                               focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`,placeholder:"Key"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400",children:"Performance Notes"}),a.jsx("input",{type:"text",value:f.notes||"",onChange:w=>g(x,w.target.value),className:`mt-1 block w-full text-sm border border-gray-300 dark:border-gray-600 
                               rounded-md shadow-sm p-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                               focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`,placeholder:"Notes"})]})]})]},x))}):a.jsxs("div",{className:"text-center py-8 border-2 border-dashed rounded-md mb-4 dark:border-gray-600",children:[a.jsx(Kt,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No songs added"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Add songs to your service from your song library"})]}),u?a.jsxs("div",{className:"space-y-3 border p-3 rounded-md dark:border-gray-600 dark:bg-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-medium dark:text-white",children:"Add Song to Service"}),a.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-500 dark:text-gray-300 dark:hover:text-gray-200",children:a.jsx(Mt,{})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Li,{className:"text-gray-400 dark:text-gray-500"})}),a.jsx("input",{type:"text",className:`block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 
                         rounded-md leading-5 bg-white dark:bg-gray-800 text-gray-900 dark:text-white
                         placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 
                         focus:border-blue-500 dark:focus:border-blue-400 sm:text-sm`,placeholder:"Search songs by title or artist...",value:l,onChange:f=>c(f.target.value)})]}),i&&a.jsx("div",{className:"flex justify-center py-5",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})}),!i&&a.jsx("div",{className:"max-h-60 overflow-y-auto border rounded-md dark:border-gray-600",children:m.length===0?a.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:h.length===0?"No songs available. Add songs to your library first.":"No songs matching your search criteria."}):a.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:m.map(f=>a.jsx("li",{className:"px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer",onClick:()=>y(f),children:a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium dark:text-white",children:f.title}),f.artist&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:f.artist})]})},f.id))})})]}):a.jsxs("button",{type:"button",onClick:()=>d(!0),disabled:!r,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md 
                     shadow-sm text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600
                     focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50`,children:[a.jsx(Ue,{className:"mr-2"})," Add Song"]})]})},Td=()=>{const e=Be(),{id:t}=Vs(),{user:r}=Ae(),n=!!t,[s,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState([]),[d,h]=p.useState([]),[m,y]=p.useState([]),[v,b]=p.useState([]),[k,g]=p.useState(null),f=ie(),x=`Service - ${f.format("MMMM D, YYYY")}`,w=f.format("YYYY-MM-DD"),[E,N]=p.useState({title:x,description:"",start_time:`${w}T09:00`,end_time:`${w}T10:30`,service_date:w,location:"Church",church_id:"",team_id:null,event_type:"service",created_by:r==null?void 0:r.id});p.useEffect(()=>{if(E.service_date&&!n){const L=ie(E.service_date);N(D=>({...D,title:`Service - ${L.format("MMMM D, YYYY")}`,start_time:`${E.service_date}T09:00`,end_time:`${E.service_date}T10:30`}))}},[E.service_date,n]),p.useEffect(()=>{(async()=>{try{i(!0);const{data:D,error:z}=await O.from("churches").select("id, name");if(z)throw z;if(u(D||[]),E.church_id){const{data:S,error:_}=await O.from("worship_teams").select("id, name, description").eq("church_id",E.church_id);if(_)throw _;h(S||[])}if(n){const{data:S,error:_}=await O.from("events").select("*").eq("id",t).single();if(_)throw _;if(S){const A=ie(S.start_time).format("YYYY-MM-DD");N({...S,start_time:ie(S.start_time).format("YYYY-MM-DDTHH:mm"),end_time:ie(S.end_time).format("YYYY-MM-DDTHH:mm"),service_date:A});const{data:I,error:j}=await O.from("event_songs").select("id, song_id, song_order, key, notes, songs(id, title, artist, default_key)").eq("event_id",t).order("song_order");if(j)throw j;I&&y(I.map(M=>{var $,F,H;return{id:M.id,songId:M.song_id,order:M.song_order,key:M.key||(($=M.songs)==null?void 0:$.default_key)||"",notes:M.notes||"",title:((F=M.songs)==null?void 0:F.title)||"",artist:((H=M.songs)==null?void 0:H.artist)||""}}))}}}catch(D){console.error("Error fetching data:",D),g("Error loading data. Please try again.")}finally{i(!1)}})()},[t,n,r]);const C=L=>{const{name:D,value:z}=L.target;if(D==="church_id"||D==="team_id"){const S=z===""?null:z;N(_=>({..._,[D]:S})),D==="church_id"&&(T(S),N(_=>({..._,team_id:null})))}else N(S=>({...S,[D]:z}))},T=async L=>{if(!L){h([]);return}try{const{data:D,error:z}=await O.from("worship_teams").select("id, name, description").eq("church_id",L);if(z)throw z;h(D||[])}catch(D){console.error("Error fetching teams:",D),g("Error loading teams. Please try again.")}},R=L=>{y(L)},P=async L=>{L.preventDefault();try{if(l(!0),g(null),!E.church_id){g("Please select a church"),l(!1);return}const D={...E,start_time:ie(E.start_time).toISOString(),end_time:ie(E.end_time).toISOString(),created_by:r.id,team_id:E.team_id||null,church_id:E.church_id||null};delete D.service_date,console.log("Submitting service data:",D);let z=t;if(n){const{error:S}=await O.from("events").update(D).eq("id",t);if(S)throw console.error("Error updating service:",S),S}else{const{data:S,error:_}=await O.from("events").insert(D).select("id").single();if(_)throw console.error("Error creating service:",_),_;if(!S||!S.id)throw new Error("No service ID returned from creation");z=S.id}if(z){console.log("Service ID for songs and team members:",z);try{if(n){const{error:S}=await O.from("event_songs").delete().eq("event_id",z);if(S)throw console.error("Error deleting songs:",S),S}if(m.length>0){const S=m.map(A=>({event_id:z,song_id:A.songId,song_order:A.order,key:A.key||null,notes:A.notes||null}));console.log("Inserting songs:",S);const{error:_}=await O.from("event_songs").insert(S);if(_)throw console.error("Error inserting songs:",_),_}}catch(S){throw console.error("Error handling songs:",S),S}if(v.length>0){if(console.log("Saving team member assignments:",v),n){const S=v.filter(_=>_.id).map(_=>_.id);if(S.length>0){const{error:_}=await O.from("service_team_members").delete().eq("event_id",z).not("id","in",`(${S.join(",")})`);if(_)throw console.error("Error deleting team members:",_),_}else{const{error:_}=await O.from("service_team_members").delete().eq("event_id",z);if(_)throw console.error("Error deleting all team members:",_),_}}for(const S of v)if(S.id){const{error:_}=await O.from("service_team_members").update({role:S.role,notes:S.notes,is_confirmed:S.isConfirmed}).eq("id",S.id);if(_)throw console.error("Error updating team member:",_),_}else{const _={event_id:z,user_id:S.userId,role:S.role,notes:S.notes,is_confirmed:S.isConfirmed||!1};console.log("Adding new team member to service:",_);const{error:A}=await O.from("service_team_members").insert(_);if(A)throw console.error("Error adding team member:",A),A}}}else throw new Error("Failed to get a valid service ID");e("/calendar")}catch(D){console.error("Error saving service:",D),g(`Error saving service: ${D.message||"Please try again"}`)}finally{l(!1)}};return s?a.jsx("div",{className:"flex justify-center py-10",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-4 mb-20",children:[" ",a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:n?"Edit Service":"Create New Service"}),k&&a.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:a.jsx("p",{children:k})}),a.jsxs("form",{onSubmit:P,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4 mb-4",children:[" ",a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Service Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2",children:[" ",a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"service_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[a.jsx(Pr,{className:"inline mr-1"})," Service Date*"]}),a.jsx("input",{type:"date",id:"service_date",name:"service_date",required:!0,value:E.service_date,onChange:C,className:`mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm p-2 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"church_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Church*"}),a.jsxs("select",{id:"church_id",name:"church_id",required:!0,value:E.church_id||"",onChange:C,className:`mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm p-2 
                         bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                         focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`,children:[a.jsx("option",{value:"",children:"Select Church"}),c.map(L=>a.jsx("option",{value:L.id,children:L.name},L.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Service Title*"}),a.jsx("input",{type:"text",id:"title",name:"title",required:!0,value:E.title,onChange:C,className:`mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm p-2 
                       bg-white dark:bg-gray-700 text-gray-900 dark:text-white
                       focus:ring-blue-500 focus:border-blue-500 dark:focus:border-blue-400`})]})]}),E.church_id&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-4 mb-8",children:[" ",a.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Service Songs"}),a.jsx(T2,{selectedSongs:m,onSongsChange:R,churchId:E.church_id})]}),a.jsxs("div",{className:"flex justify-center mb-16",children:[" ",a.jsx("button",{type:"submit",disabled:o,className:`px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white 
                     bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-600 
                     focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 
                     disabled:opacity-50`,children:o?"Saving...":n?"Update Service":"Create Service"})]})]})]})};function $d(){return a.jsx(ev,{children:a.jsx(tv,{children:a.jsx(Z1,{children:a.jsx(Ey,{children:a.jsxs(by,{children:[a.jsx(ce,{path:"/login",element:a.jsx(Dv,{})}),a.jsx(ce,{path:"/register",element:a.jsx(zv,{})}),a.jsx(ce,{path:"/forgot-password",element:a.jsx(Fv,{})}),a.jsx(ce,{path:"/reset-password",element:a.jsx(Uv,{})}),a.jsx(ce,{path:"/verify-email",element:a.jsx(Bv,{})}),a.jsx(ce,{path:"/auth/callback",element:a.jsx(Vv,{})}),a.jsxs(ce,{element:a.jsx(Iv,{}),children:[a.jsx(ce,{path:"/dashboard",element:a.jsx(Xv,{})}),a.jsx(ce,{path:"/calendar",element:a.jsx(Zv,{})}),a.jsx(ce,{path:"/notifications",element:a.jsx(c2,{})}),a.jsx(ce,{path:"/songs",element:a.jsx(e2,{})}),a.jsx(ce,{path:"/songs/:id",element:a.jsx(E2,{})}),a.jsx(ce,{path:"/songs/new",element:a.jsx(Pd,{})}),a.jsx(ce,{path:"/songs/edit/:id",element:a.jsx(Pd,{})}),a.jsx(ce,{path:"/services",element:a.jsx(t2,{})}),a.jsx(ce,{path:"/services/:id",element:a.jsx(P2,{})}),a.jsx(ce,{path:"/services/new",element:a.jsx(Td,{})}),a.jsx(ce,{path:"/services/edit/:id",element:a.jsx(Td,{})}),a.jsx(ce,{path:"/profile",element:a.jsx(Nd,{})}),a.jsx(ce,{path:"/profile/:userId",element:a.jsx(Nd,{})}),a.jsx(ce,{path:"/prayer-requests",element:a.jsx(o2,{})}),a.jsx(ce,{path:"/churches",element:a.jsx(l2,{})})]}),a.jsx(ce,{path:"/",element:a.jsx(Z0,{to:"/dashboard",replace:!0})}),a.jsx(ce,{path:"*",element:a.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-white dark:bg-gray-900 dark:text-white",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"404 - Page Not Found"}),a.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"The page you're looking for doesn't exist."}),a.jsxs("div",{className:"mt-4 space-y-2",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"The server is configured with a public base URL of '/church-connect/'"}),a.jsx("button",{onClick:()=>window.location.pathname=lr(window.location.pathname.replace(/^\//,"")),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go to Correct URL"}),a.jsx("button",{onClick:()=>window.history.back(),className:"block w-full mt-2 px-4 py-2 bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-100 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Go Back"})]})]})})]})})})})})}Sf()?(console.log("Auth parameters detected in URL, redirecting to proper auth callback..."),fd()||Ca.createRoot(document.getElementById("root")).render(a.jsx(Ot.StrictMode,{children:a.jsx($d,{})}))):fd()||Ca.createRoot(document.getElementById("root")).render(a.jsx(Ot.StrictMode,{children:a.jsx($d,{})}));export{ni as g};
